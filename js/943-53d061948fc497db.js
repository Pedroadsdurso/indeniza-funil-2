(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[943],{5972:function(e,t,n){"use strict";n.d(t,{m:function(){return i}});var r=n(7458),a=n(6282);n(2983);let i=e=>{let{error:t}=e;return(0,r.jsx)("div",{style:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",padding:"0 1rem"},children:a.O.NEXT_PUBLIC_VIEWER_URL[0]?(0,r.jsx)("p",{style:{fontSize:"24px",textAlign:"center"},children:t.message}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h1",{style:{fontWeight:"bold",fontSize:"30px"},children:"NEXT_PUBLIC_VIEWER_URL is missing"}),(0,r.jsxs)("h2",{children:["Make sure to configure the app properly (",(0,r.jsx)("a",{href:"https://docs.typebot.io/self-hosting/configuration",children:"https://docs.typebot.io/self-hosting/configuration"}),")"]})]})})}},5006:function(e,t,n){"use strict";n.d(t,{A:function(){return a}});var r=n(7458);let a=()=>(0,r.jsxs)("div",{style:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[(0,r.jsx)("h1",{style:{fontWeight:"bold",fontSize:"30px"},children:"404"}),(0,r.jsx)("h2",{children:"The bot you're looking for doesn't exist"})]})},5460:function(e,t,n){"use strict";n.d(t,{H:function(){return p}});var r=n(7458),a=n(5617),i=n(3345),o=n.n(i),s=n(8950),l=n.n(s);n(2983);var d=n(8579),u=n(2062),c=n(6282);let p=e=>{let{url:t,typebotName:n,metadata:{title:i,description:s,favIconUrl:p,imageUrl:h,googleTagManagerId:m}={}}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o(),{children:[(0,r.jsx)("title",{children:null!=i?i:n}),(0,r.jsx)("meta",{name:"robots",content:"noindex"}),(0,r.jsx)("link",{rel:"icon",type:"image/png",href:null!=p?p:u.h.metadata.favIconUrl(c.O.NEXT_PUBLIC_VIEWER_URL[0])}),(0,r.jsx)("meta",{name:"title",content:null!=i?i:n}),(0,r.jsx)("meta",{name:"description",content:null!=s?s:"Build beautiful conversational forms and embed them directly in your applications without a line of code. Triple your response rate and collect answers that has more value compared to a traditional form."}),(0,r.jsx)("meta",{property:"og:type",content:"website"}),(0,r.jsx)("meta",{property:"og:url",content:null!=t?t:"https://bot.typebot.io"}),(0,r.jsx)("meta",{property:"og:title",content:null!=i?i:n}),(0,r.jsx)("meta",{property:"og:site_name",content:null!=i?i:n}),(0,r.jsx)("meta",{property:"og:description",content:null!=s?s:"Build beautiful conversational forms and embed them directly in your applications without a line of code. Triple your response rate and collect answers that has more value compared to a traditional form."}),(0,r.jsx)("meta",{property:"og:image",itemProp:"image",content:null!=h?h:u.h.metadata.imageUrl(c.O.NEXT_PUBLIC_VIEWER_URL[0])}),(0,r.jsx)("meta",{property:"twitter:card",content:"summary_large_image"}),(0,r.jsx)("meta",{property:"twitter:url",content:null!=t?t:"https://bot.typebot.io"}),(0,r.jsx)("meta",{property:"twitter:title",content:null!=i?i:n}),(0,r.jsx)("meta",{property:"twitter:description",content:null!=s?s:"Build beautiful conversational forms and embed them directly in your applications without a line of code. Triple your response rate and collect answers that has more value compared to a traditional form."}),(0,r.jsx)("meta",{property:"twitter:image",content:null!=h?h:u.h.metadata.imageUrl(c.O.NEXT_PUBLIC_VIEWER_URL[0])})]},"seo"),(0,d.UE)(m)&&(0,r.jsx)(l(),{id:"google-tag-manager",children:(0,a.J)(m)})]})}},6001:function(e,t,n){"use strict";let r,a,i,o;n.d(t,{i:function(){return rQ}});var s,l,d,u,c,p,h,m=n(7458),g=n(389),f=n(2983),b=n(9776),v=n(5689),y=n(3947),_=n(6806),E=n(959),x=n(6163),w=n(1016),I=n(3698),T=((d=T||{}).TEXT="text",d.IMAGE="image",d.VIDEO="video",d.EMBED="embed",d.AUDIO="audio",d),C=((u=C||{}).TEXT="text input",u.NUMBER="number input",u.EMAIL="email input",u.URL="url input",u.DATE="date input",u.PHONE="phone number input",u.CHOICE="choice input",u.PICTURE_CHOICE="picture choice input",u.PAYMENT="payment input",u.RATING="rating input",u.FILE="file input",u),S=((c=S||{}).GOOGLE_SHEETS="Google Sheets",c.OPEN_AI="OpenAI",c.GOOGLE_ANALYTICS="Google Analytics",c.WEBHOOK="Webhook",c.EMAIL="Email",c.ZAPIER="Zapier",c.MAKE_COM="Make.com",c.PABBLY_CONNECT="Pabbly",c.CHATWOOT="Chatwoot",c.PIXEL="Pixel",c.ZEMANTIC_AI="Zemantic AI",c),N=((p=N||{}).SET_VARIABLE="Set variable",p.CONDITION="Condition",p.REDIRECT="Redirect",p.SCRIPT="Code",p.TYPEBOT_LINK="Typebot link",p.WAIT="Wait",p.JUMP="Jump",p.AB_TEST="AB test",p),P=["openai","zemantic-ai","cal-com","chat-node","qr-code","dify-ai","mistral"],k=e=>(0,g.d)(void 0,null,function*(){let t;try{let n="string"==typeof e?e:e.url;t=yield fetch(n,{method:"string"==typeof e?"GET":e.method,mode:"cors",headers:"string"!=typeof e&&R(e.body)?{"Content-Type":"application/json"}:void 0,body:"string"!=typeof e&&R(e.body)?JSON.stringify(e.body):void 0});let r=yield t.json();if(!t.ok)throw"error"in r?r.error:r;return{data:r,response:t}}catch(e){return console.error(e),{error:e,response:t}}}),R=e=>null!=e,L=e=>null==e,A=e=>null==e||""===e,O=e=>null!=e&&""!==e,j=e=>Object.values(C).includes(e.type),U=e=>Object.values(T).includes(e.type),B=e=>Object.values(N).includes(e.type),M=e=>"choice input"===e.type,V=e=>Object.values(S).concat(P).includes(e.type),D=e=>Object.values(T).includes(e),z=e=>t=>t.id===e,Z=e=>/^\{\{.*\}\}$/.test(e),H=e=>e.startsWith("http")||e.startsWith("mailto:")||e.startsWith("tel:")||e.startsWith("sms:")||Z(e)?e:"https://".concat(e),G=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fieldToParse:"value",escapeForJson:!1};return n=>n&&""!==n?n.replace(/\{\{(.*?)\}\}/g,(n,r)=>{let a=r.replace(/{{|}}/g,""),i=e.find(e=>a===e.name&&("id"===t.fieldToParse||R(e.value)));if(!i)return"";if("id"===t.fieldToParse)return i.id;let{value:o}=i;return t.escapeForJson?W("string"==typeof o?o:JSON.stringify(o)):X(o)||""}):""},X=e=>{if(L(e))return null;if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return console.warn("Failed to safely stringify variable value",e),null}},F=e=>{if(null===e)return null;if(void 0!==e){if(Array.isArray(e)||"number"==typeof e)return e;if("true"===e)return!0;if("false"===e)return!1;if("null"===e)return null;if("undefined"!==e)try{return JSON.parse(e)}catch(t){return e}}},W=e=>e.replace(/\n/g,"\\n").replace(/"/g,'\\"').replace(/\\[^n"]/g,"\\\\ "),K=(e,t)=>Object.keys(e).reduce((n,r)=>{let a=e[r];return(0,g.b)((0,g.a)({},n),{[r]:"string"==typeof a?G(t)(a):a})},{}),Y=e=>{var t;return null==(t=e.filter(e=>U(e)||j(e)).pop())?void 0:t.type},J=e=>{var t;try{null==(t=window.top)||t.postMessage((0,g.a)({from:"typebot"},e),"*")}catch(e){console.error(e)}},q=(0,f.createContext)({}),$=e=>{let{children:t,typebot:n,apiHost:r,isPreview:a,isLoading:i,onNewLog:o}=e,[s,l]=(0,f.useState)(n),[d,u]=(0,f.useState)([]),[c,p]=(0,f.useState)(n.typebotId),[h,b]=(0,f.useState)([]),[v,y]=(0,f.useState)([]);(0,f.useEffect)(()=>{l(e=>(0,g.b)((0,g.a)({},e),{theme:n.theme,settings:n.settings}))},[n.theme,n.settings]);let _=(e,t)=>e.map(e=>{var n;let r=t.find(t=>t.name===e.name);return(0,g.b)((0,g.a)({},e),{value:null!=(n=null==r?void 0:r.value)?n:e.value})});return(0,m.jsx)(q.Provider,{value:{typebot:s,linkedTypebots:d,apiHost:r,isPreview:a,updateVariableValue:(e,t)=>{var n,r;let a=X(t);J({newVariableValue:{name:null!=(r=null==(n=s.variables.find(t=>t.id===e))?void 0:n.name)?r:"",value:null!=a?a:""}});let i=s.variables.find(t=>t.id===e),o=s.variables.filter(t=>t.name===(null==i?void 0:i.name)&&t.id!==e),d=[i,...o].filter(R);l(e=>(0,g.b)((0,g.a)({},e),{variables:e.variables.map(e=>d.some(t=>t.id===e.id)?(0,g.b)((0,g.a)({},e),{value:a}):e)}))},createEdge:e=>{l(t=>(0,g.b)((0,g.a)({},t),{edges:[...t.edges,e]}))},injectLinkedTypebot:e=>{let t=_(e.variables,s.variables),n={id:"typebotId"in e?e.typebotId:e.id,groups:e.groups,edges:e.edges,variables:t};return u(e=>[...e,n]),l((0,g.b)((0,g.a)({},s),{groups:[...s.groups,...n.groups],variables:[...s.variables,...n.variables],edges:[...s.edges,...n.edges]})),n},onNewLog:o,linkedBotQueue:h,isLoading:i,parentTypebotIds:v,pushParentTypebotId:e=>{y(t=>[...t,e])},pushEdgeIdInLinkedTypebotQueue:e=>b(t=>[...t,e]),popEdgeIdFromLinkedTypebotQueue:()=>{b(e=>e.slice(1)),y(e=>e.slice(1)),p(h[0].typebotId)},currentTypebotId:c,setCurrentTypebotId:p},children:t})},Q=()=>(0,f.useContext)(q),ee=()=>(0,m.jsx)("figure",{className:"flex justify-center items-center rounded-full text-white w-6 h-6 text-sm relative xs:w-10 xs:h-10 xs:text-xl","data-testid":"default-avatar",children:(0,m.jsxs)("svg",{width:"75",height:"75",viewBox:"0 0 75 75",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"absolute top-0 left-0 w-6 h-6 xs:w-full xs:h-full xs:text-xl",children:[(0,m.jsx)("mask",{id:"mask0",x:"0",y:"0","mask-type":"alpha",children:(0,m.jsx)("circle",{cx:"37.5",cy:"37.5",r:"37.5",fill:"#0042DA"})}),(0,m.jsxs)("g",{mask:"url(#mask0)",children:[(0,m.jsx)("rect",{x:"-30",y:"-43",width:"131",height:"154",fill:"#0042DA"}),(0,m.jsx)("rect",{x:"2.50413",y:"120.333",width:"81.5597",height:"86.4577",rx:"2.5",transform:"rotate(-52.6423 2.50413 120.333)",stroke:"#FED23D",strokeWidth:"5"}),(0,m.jsx)("circle",{cx:"76.5",cy:"-1.5",r:"29",stroke:"#FF8E20",strokeWidth:"5"}),(0,m.jsx)("path",{d:"M-49.8224 22L-15.5 -40.7879L18.8224 22H-49.8224Z",stroke:"#F7F8FF",strokeWidth:"5"})]})]})}),et=e=>{let{avatarSrc:t}=e,[n]=(0,f.useState)(t);return""===n?(0,m.jsx)(m.Fragment,{}):R(n)?(0,m.jsx)("figure",{className:"flex justify-center items-center rounded-full text-white w-6 h-6 text-sm relative xs:w-10 xs:h-10 xs:text-xl",children:(0,m.jsx)("img",{src:n,alt:"Bot avatar",className:"rounded-full object-cover w-full h-full"})}):(0,m.jsx)(ee,{})},en=(0,f.forwardRef)(function(e,t){let{hostAvatarSrc:n,keepShowing:r}=e,[a,i]=(0,f.useState)(!1),[o,s]=(0,f.useState)(0),l=()=>{if(!d.current||!u.current)return;let{height:e}=d.current.getBoundingClientRect(),{height:t}=u.current.getBoundingClientRect();s(e-t)},d=(0,f.useRef)(null),u=(0,f.useRef)(null);return(0,f.useImperativeHandle)(t,()=>({refreshTopOffset:l})),(0,f.useEffect)(()=>{if(!document)return;i(!0);let e=new y.do(l);return e.observe(document.body),()=>{e.disconnect()}},[]),(0,m.jsx)("div",{className:"flex w-6 xs:w-10 mr-2 mb-2 flex-shrink-0 items-center relative typebot-avatar-container ",ref:d,children:(0,m.jsx)(v.Z,{classNames:"bubble",timeout:500,in:a&&r,unmountOnExit:!0,children:(0,m.jsx)("div",{className:"absolute w-6 xs:w-10 h-6 xs:h-10 mb-4 xs:mb-2 flex items-center top-0",ref:u,style:{top:"".concat(o,"px"),transition:"top 350ms ease-out, opacity 500ms"},children:(0,m.jsx)(et,{avatarSrc:n})})})})}),er=()=>(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)("div",{className:"w-2 h-2 mr-1 rounded-full bubble1"}),(0,m.jsx)("div",{className:"w-2 h-2 mr-1 rounded-full bubble2"}),(0,m.jsx)("div",{className:"w-2 h-2 rounded-full bubble3"})]}),ea=e=>{let{url:t,onTransitionEnd:n}=e,{typebot:r,isLoading:a}=Q(),i=(0,f.useRef)(null),[o,s]=(0,f.useState)(!0),[l]=(0,f.useState)(G(r.variables)(t));return(0,f.useEffect)(()=>{if(!o||a)return;let e=setTimeout(()=>{s(!1),setTimeout(()=>{n()},400)},500);return()=>{clearTimeout(e)}},[a,o,n]),(0,m.jsx)("div",{className:"flex flex-col",children:(0,m.jsx)("div",{className:"flex mb-2 w-full lg:w-11/12 items-center",children:(0,m.jsxs)("div",{className:"flex relative z-10 items-start typebot-host-bubble",children:[(0,m.jsx)("div",{className:"flex items-center absolute px-4 py-2 rounded-lg bubble-typing z-10 ",style:{width:o?"4rem":"100%",height:o?"2rem":"100%"},children:o?(0,m.jsx)(er,{}):null}),(0,m.jsx)("audio",{ref:i,src:l,className:"z-10 content-opacity m-2 "+(o?"opacity-0":"opacity-100"),style:{height:o?"2rem":"revert"},autoPlay:!0,controls:!0})]})})})},ei=e=>{var t,n;let{block:r,onTransitionEnd:a}=e,{typebot:i,isLoading:o}=Q(),s=(0,f.useRef)(null),[l,d]=(0,f.useState)(!0),[u]=(0,f.useState)(G(i.variables)(null==(t=r.content)?void 0:t.url)),c=(0,f.useCallback)(()=>{d(!1),setTimeout(()=>{a()},400)},[a]);(0,f.useEffect)(()=>{if(!l||o)return;let e=setTimeout(()=>{d(!1),c()},1e3);return()=>{clearTimeout(e)}},[o,l,c]);let p=null!=(n=r.content)&&n.height?"string"==typeof r.content.height?G(i.variables)(r.content.height)+"px":r.content.height:"2rem";return(0,m.jsx)("div",{className:"flex flex-col w-full",ref:s,children:(0,m.jsx)("div",{className:"flex mb-2 w-full lg:w-11/12 items-center",children:(0,m.jsxs)("div",{className:"flex relative z-10 items-start typebot-host-bubble w-full",children:[(0,m.jsx)("div",{className:"flex items-center absolute px-4 py-2 rounded-lg bubble-typing z-10 ",style:{width:l?"4rem":"100%",height:l?"2rem":"100%"},children:l?(0,m.jsx)(er,{}):(0,m.jsx)(m.Fragment,{})}),(0,m.jsx)("iframe",{id:"embed-bubble-content",src:u,className:"w-full z-20 p-4 content-opacity "+(l?"opacity-0":"opacity-100"),style:{height:l?"2rem":p,borderRadius:"15px"}})]})})})},eo=e=>{var t;let{block:n,onTransitionEnd:r}=e,{typebot:a,isLoading:i}=Q(),o=(0,f.useRef)(null),s=(0,f.useRef)(null),[l,d]=(0,f.useState)(!0),[u]=(0,f.useState)(G(a.variables)(null==(t=n.content)?void 0:t.url)),c=(0,f.useCallback)(()=>{d(!1),setTimeout(()=>{r()},400)},[r]);return(0,f.useEffect)(()=>{if(!l||i)return;let e=setTimeout(()=>{d(!1),c()},5e3);return()=>{clearTimeout(e)}},[i,l,c]),(0,f.useEffect)(()=>{let e=s.current;if(!(!e||i||!l))return e.onload=()=>{d(!1),c()},()=>{e.onload=null}},[i,l,c]),(0,m.jsx)("div",{className:"flex flex-col",ref:o,children:(0,m.jsx)("div",{className:"flex mb-2 w-full lg:w-11/12 items-center",children:(0,m.jsxs)("div",{className:"flex relative z-10 items-start typebot-host-bubble",children:[(0,m.jsx)("div",{className:"flex items-center absolute px-4 py-2 rounded-lg bubble-typing z-10 ",style:{width:l?"4rem":"100%",height:l?"2rem":"100%"},children:l?(0,m.jsx)(er,{}):null}),(0,m.jsx)("img",{ref:s,src:u,className:"p-4 content-opacity z-10 w-auto rounded-lg "+(l?"opacity-0":"opacity-100"),style:{maxHeight:"32rem",height:l?"2rem":"auto",maxWidth:"100%"},alt:"Bubble image"})]})})})},es={general:{isInputPrefillEnabled:!1,isHideQueryParamsEnabled:!0,isNewResultOnRefreshEnabled:!0,rememberUser:{isEnabled:!1,storage:"session"},isBrandingEnabled:!1,isTypingEmulationEnabled:!0},typingEmulation:{enabled:!0,speed:400,maxDelay:3,delayBetweenBubbles:0,isDisabledOnFirstMessage:!0}},el=e=>{var t,n,r,a,i;let{bubbleContent:o,typingSettings:s}=e,l=null!=(n=null==(t=o.match(/(\w+)/g))?void 0:t.length)?n:0;0===l&&(l=o.length);let{enabled:d,speed:u,maxDelay:c}={enabled:null!=(r=null==s?void 0:s.enabled)?r:es.typingEmulation.enabled,speed:null!=(a=null==s?void 0:s.speed)?a:es.typingEmulation.speed,maxDelay:null!=(i=null==s?void 0:s.maxDelay)?i:es.typingEmulation.maxDelay},p=d?l/u*6e4:0;return p>1e3*c&&(p=1e3*c),p},ed=e=>{var t,n,r;let{block:a,onTransitionEnd:i}=e,{typebot:o,isLoading:s}=Q(),l=(0,f.useRef)(null),[d,u]=(0,f.useState)(!0),[c]=(0,f.useState)(G(o.variables)(null==(t=a.content)?void 0:t.html)),p=(0,f.useCallback)(()=>{u(!1),setTimeout(()=>{i()},400)},[i]);return(0,f.useEffect)(()=>{var e,t,n;if(!d||s)return;let r=setTimeout(()=>{p()},el({bubbleContent:null!=(t=null==(e=a.content)?void 0:e.plainText)?t:"",typingSettings:null==(n=o.settings)?void 0:n.typingEmulation}));return()=>{clearTimeout(r)}},[null==(n=a.content)?void 0:n.plainText,s,d,p,null==(r=o.settings)?void 0:r.typingEmulation]),(0,m.jsx)("div",{className:"flex flex-col",ref:l,children:(0,m.jsx)("div",{className:"flex mb-2 w-full items-center",children:(0,m.jsxs)("div",{className:"flex relative items-start typebot-host-bubble",children:[(0,m.jsx)("div",{className:"flex items-center absolute px-4 py-2 rounded-lg bubble-typing ",style:{width:d?"4rem":"100%",height:d?"2rem":"100%"},"data-testid":"host-bubble",children:d?(0,m.jsx)(er,{}):null}),"text"===a.type&&(0,m.jsx)("p",{style:{textOverflow:"ellipsis"},className:"overflow-hidden content-opacity mx-4 my-2 whitespace-pre-wrap slate-html-container relative "+(d?"opacity-0 h-6":"opacity-100 h-full"),dangerouslySetInnerHTML:{__html:c}})]})})})},eu=e=>{let{block:t,onTransitionEnd:n}=e,{typebot:r,isLoading:a}=Q(),i=(0,f.useRef)(null),[o,s]=(0,f.useState)(!0),l=(0,f.useCallback)(()=>{s(!1),setTimeout(()=>{n()},400)},[n]);return(0,f.useEffect)(()=>{if(!o||a)return;let e=setTimeout(()=>{s(!1),l()},1e3);return()=>{clearTimeout(e)}},[a,o,l]),(0,m.jsx)("div",{className:"flex flex-col",ref:i,children:(0,m.jsx)("div",{className:"flex mb-2 w-full lg:w-11/12 items-center",children:(0,m.jsxs)("div",{className:"flex relative z-10 items-start typebot-host-bubble",children:[(0,m.jsx)("div",{className:"flex items-center absolute px-4 py-2 rounded-lg bubble-typing z-10 ",style:{width:o?"4rem":"100%",height:o?"2rem":"100%"},children:o?(0,m.jsx)(er,{}):(0,m.jsx)(m.Fragment,{})}),(0,m.jsx)(ec,{content:t.content,isTyping:o,variables:r.variables})]})})})},ec=e=>{let{content:t,isTyping:n,variables:r}=e,[a]=(0,f.useState)(G(r)(null==t?void 0:t.url));if(!(null!=t&&t.type))return(0,m.jsx)(m.Fragment,{});switch(t.type){case"url":{let e=window.navigator.vendor.match(/apple/i);return(0,m.jsxs)("video",{controls:!0,className:"p-4 focus:outline-none w-full z-10 content-opacity rounded-md "+(n?"opacity-0":"opacity-100"),style:{height:n?"2rem":"auto",maxHeight:e?"40vh":""},autoPlay:!0,children:[(0,m.jsx)("source",{src:a,type:"video/mp4"}),"Sorry, your browser doesn't support embedded videos."]})}case"vimeo":case"youtube":{let e="vimeo"===t.type?"https://player.vimeo.com/video":"https://www.youtube.com/embed";return(0,m.jsx)("iframe",{src:"".concat(e,"/").concat(t.id),className:"w-full p-4 content-opacity z-10 rounded-md "+(n?"opacity-0":"opacity-100"),height:n?"2rem":"200px",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}}},ep=e=>{var t;let{block:n,onTransitionEnd:r}=e;switch(n.type){case"text":return(0,m.jsx)(ed,{block:n,onTransitionEnd:r});case"image":return(0,m.jsx)(eo,{block:n,onTransitionEnd:r});case"video":return(0,m.jsx)(eu,{block:n,onTransitionEnd:r});case"embed":return(0,m.jsx)(ei,{block:n,onTransitionEnd:r});case"audio":return(0,m.jsx)(ea,{url:null==(t=n.content)?void 0:t.url,onTransitionEnd:r})}},eh=(0,f.createContext)({}),em=e=>{let{children:t,resultId:n,onNewAnswer:r,onVariablesUpdated:a}=e,[i,o]=(0,f.useState)({answers:[],variables:[],createdAt:new Date}),s=e=>{let t=e.map(e=>(0,g.b)((0,g.a)({},e),{value:X(e.value)}));o(e=>{let n=[...e.variables.filter(e=>t.every(t=>t.id!==e.id||t.name!==e.name)),...t].filter(e=>R(e.value));return a&&a(n),(0,g.b)((0,g.a)({},e),{variables:n})})};return(0,m.jsx)(eh.Provider,{value:{resultId:n,resultValues:i,addAnswer:e=>t=>{var n,a;return t.variableId&&s([{id:t.variableId,value:t.content,name:null!=(a=null==(n=e.find(e=>e.id===t.variableId))?void 0:n.name)?a:""}]),o(e=>(0,g.b)((0,g.a)({},e),{answers:[...e.answers,t]})),r&&r(t)},updateVariables:s},children:t})},eg=()=>(0,f.useContext)(eh),ef=e=>{let{message:t,showAvatar:n,avatarSrc:r}=e,[a]=(0,f.useState)(t);return(0,m.jsx)(v.Z,{classNames:"bubble",timeout:1e3,children:(0,m.jsxs)("div",{className:"flex justify-end mb-2 items-end",style:{marginLeft:"50px"},children:[(0,m.jsx)("span",{className:"px-4 py-2 rounded-lg mr-2 whitespace-pre-wrap max-w-full typebot-guest-bubble cursor-pointer","data-testid":"guest-bubble",children:a}),n&&(0,m.jsx)(et,{avatarSrc:r})]})})},eb=window.matchMedia("only screen and (max-width: 760px)").matches,ev=window.parent&&window.location!==(null==(h=window.top)?void 0:h.location),ey=(e,t,n)=>{var r;return{status:e?"error":"success",description:e?n:t,details:null!=(r=e&&JSON.stringify(e,null,2).substring(0,1e3))?r:null}},e_=f.forwardRef(function(e,t){var{onChange:n}=e,r=(0,g.c)(e,["onChange"]);return(0,m.jsx)("input",(0,g.a)({ref:t,className:"focus:outline-none bg-transparent px-4 py-4 flex-1 w-full text-input",type:"text",style:{fontSize:"16px"},autoFocus:!eb,onChange:e=>n(e.target.value)},r))}),eE=e=>(0,m.jsx)("svg",(0,g.b)((0,g.a)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"19px",color:"white"},e),{children:(0,m.jsx)("path",{d:"M476.59 227.05l-.16-.07L49.35 49.84A23.56 23.56 0 0027.14 52 24.65 24.65 0 0016 72.59v113.29a24 24 0 0019.52 23.57l232.93 43.07a4 4 0 010 7.86L35.53 303.45A24 24 0 0016 327v113.31A23.57 23.57 0 0026.59 460a23.94 23.94 0 0013.22 4 24.55 24.55 0 009.52-1.93L476.4 285.94l.19-.09a32 32 0 000-58.8z"})})),ex=e=>{var{label:t,isDisabled:n,isLoading:r,disableIcon:a}=e,i=(0,g.c)(e,["label","isDisabled","isLoading","disableIcon"]);return(0,m.jsxs)("button",(0,g.b)((0,g.a)({type:"submit",disabled:n||r},i),{className:"py-2 px-4 justify-center font-semibold rounded-md text-white focus:outline-none flex items-center disabled:opacity-50 disabled:cursor-not-allowed disabled:brightness-100 transition-all filter hover:brightness-90 active:brightness-75 typebot-button "+i.className,children:[r&&(0,m.jsx)(ew,{className:"text-white"}),(0,m.jsx)("span",{className:"xs:flex "+(a?"":"hidden"),children:t}),(0,m.jsx)(eE,{className:"send-icon flex "+(a?"hidden":"xs:hidden")})]}))},ew=e=>(0,m.jsxs)("svg",(0,g.b)((0,g.a)({},e),{className:"animate-spin -ml-1 mr-3 h-5 w-5 "+e.className,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","data-testid":"loading-spinner",children:[(0,m.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,m.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})),eI=e=>{var t,n,r,a,i,o;let{block:s,onSubmit:l,defaultValue:d,hasGuestAvatar:u}=e,[c,p]=(0,f.useState)(null!=d?d:""),h=(0,f.useRef)(null),g=()=>{var e;return""!==c&&(null==(e=h.current)?void 0:e.reportValidity())},b=()=>{g()&&l({value:c})};return(0,m.jsxs)("div",{className:"flex items-end justify-between rounded-lg pr-2 typebot-input w-full","data-testid":"input",style:{marginRight:u?"50px":"0.5rem",maxWidth:"350px"},onKeyDown:e=>{"Enter"===e.key&&b()},children:[(0,m.jsx)(e_,{ref:h,value:c,placeholder:null!=(r=null==(n=null==(t=s.options)?void 0:t.labels)?void 0:n.placeholder)?r:"Type your email...",onChange:e=>p(e),type:"email",autoComplete:"email"}),(0,m.jsx)(ex,{type:"button",label:null!=(o=null==(i=null==(a=s.options)?void 0:a.labels)?void 0:i.button)?o:"Send",isDisabled:""===c,className:"my-2 ml-2",onClick:b})]})},eT=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,eC=e=>eT.test(e),eS=e=>{var t,n,r,a,i,o,s;let{block:l,onSubmit:d,defaultValue:u,hasGuestAvatar:c}=e,[p,h]=(0,f.useState)(null!=u?u:""),g=(0,f.useRef)(null),b=()=>{var e;return""!==p&&(null==(e=g.current)?void 0:e.reportValidity())},v=()=>{b()&&d({value:p})};return(0,m.jsxs)("div",{className:"flex items-end justify-between rounded-lg pr-2 typebot-input w-full","data-testid":"input",style:{marginRight:c?"50px":"0.5rem",maxWidth:"350px"},onKeyDown:e=>{"Enter"===e.key&&v()},children:[(0,m.jsx)(_.ZP,{ref:g,value:p,onChange:e=>h(e),placeholder:null!=(r=null==(n=null==(t=l.options)?void 0:t.labels)?void 0:n.placeholder)?r:"Your phone number...",defaultCountry:null==(a=l.options)?void 0:a.defaultCountryCode,autoFocus:!eb}),(0,m.jsx)(ex,{type:"button",label:null!=(s=null==(o=null==(i=l.options)?void 0:i.labels)?void 0:o.button)?s:"Send",isDisabled:""===p,className:"my-2 ml-2",onClick:v})]})},eN=e=>(0,_.tm)(e),eP=e=>{var t,n,r,a,i,o;let{block:s,onSubmit:l,defaultValue:d,hasGuestAvatar:u}=e,[c,p]=(0,f.useState)(null!=d?d:""),h=(0,f.useRef)(null),g=()=>{var e;return""!==c&&(null==(e=h.current)?void 0:e.reportValidity())},b=()=>{g()&&l({value:c})};return(0,m.jsxs)("div",{className:"flex items-end justify-between rounded-lg pr-2 typebot-input w-full","data-testid":"input",style:{marginRight:u?"50px":"0.5rem",maxWidth:"350px"},onKeyDown:e=>{"Enter"===e.key&&b()},children:[(0,m.jsx)(e_,{ref:h,value:c,placeholder:null!=(r=null==(n=null==(t=s.options)?void 0:t.labels)?void 0:n.placeholder)?r:"Type your URL...",onChange:e=>{if(!e.startsWith("https://"))return"https:/"===e?void 0:p("https://".concat(e));p(e)},type:"url",autoComplete:"url"}),(0,m.jsx)(ex,{type:"button",label:null!=(o=null==(i=null==(a=s.options)?void 0:a.labels)?void 0:i.button)?o:"Send",isDisabled:""===c,className:"my-2 ml-2",onClick:b})]})},ek=/^(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})$/,eR=e=>ek.test(e),eL=(e,t)=>{switch(t){case"email input":return eC(e);case"phone number input":return eN(e);case"url input":return eR(e)}return!0},eA=e=>j(e)&&R(e.options)&&"retryMessageContent"in e.options,eO=(e,t,n,r)=>{var a;let i=G(n)(null==(a=e.options)?void 0:a.retryMessageContent),o=e.id+1e3*Math.random(),s={id:(1e3*Math.random()).toString(),from:{blockId:o},to:{groupId:t,blockId:e.id}};return r(s),{id:o,type:"text",content:{html:"<div>".concat(i,"</div>"),richText:[],plainText:i},outgoingEdgeId:s.id}},ej=f.forwardRef(function(e,t){var{onChange:n}=e,r=(0,g.c)(e,["onChange"]);return(0,m.jsx)("textarea",(0,g.a)({ref:t,className:"focus:outline-none bg-transparent px-4 py-4 flex-1 w-full text-input",rows:6,"data-testid":"textarea",required:!0,style:{fontSize:"16px"},autoFocus:!eb,onChange:e=>n(e.target.value)},r))}),eU=e=>{var t,n,r,a,i,o,s,l,d,u;let{block:c,onSubmit:p,defaultValue:h,hasGuestAvatar:g}=e,[b,v]=(0,f.useState)(null!=h?h:""),y=(0,f.useRef)(null),_=null==(t=c.options)?void 0:t.isLong,E=e=>v(e),x=()=>{var e;return""!==b&&(null==(e=y.current)?void 0:e.reportValidity())},w=()=>{x()&&p({value:b})};return(0,m.jsxs)("div",{className:"flex items-end justify-between rounded-lg pr-2 typebot-input w-full","data-testid":"input",style:{marginRight:g?"50px":"0.5rem",maxWidth:_?void 0:"350px"},onKeyDown:e=>{_||"Enter"===e.key&&w()},children:[_?(0,m.jsx)(ej,{ref:y,onChange:E,value:b,placeholder:null!=(a=null==(r=null==(n=c.options)?void 0:n.labels)?void 0:r.placeholder)?a:"Type your answer..."}):(0,m.jsx)(e_,{ref:y,onChange:E,value:b,placeholder:null!=(s=null==(o=null==(i=c.options)?void 0:i.labels)?void 0:o.placeholder)?s:"Type your answer..."}),(0,m.jsx)(ex,{type:"button",label:null!=(u=null==(d=null==(l=c.options)?void 0:l.labels)?void 0:d.button)?u:"Send",isDisabled:""===b,className:"my-2 ml-2",onClick:w})]})},eB=e=>{var t,n,r,a,i,o,s,l,d,u;let{block:c,onSubmit:p,defaultValue:h,hasGuestAvatar:g}=e,[b,v]=(0,f.useState)(null!=h?h:""),y=(0,f.useRef)(null),_=()=>{var e;return""!==b&&(null==(e=y.current)?void 0:e.reportValidity())},E=()=>{_()&&p({value:b})};return(0,m.jsxs)("div",{className:"flex items-end justify-between rounded-lg pr-2 typebot-input w-full","data-testid":"input",style:{marginRight:g?"50px":"0.5rem",maxWidth:"350px"},onKeyDown:e=>{"Enter"===e.key&&E()},children:[(0,m.jsx)(e_,{ref:y,value:b,placeholder:null!=(r=null==(n=null==(t=c.options)?void 0:t.labels)?void 0:n.placeholder)?r:"Type your answer...",onChange:e=>v(e),type:"number",style:{appearance:"auto"},min:null==(a=c.options)?void 0:a.min,max:null==(i=c.options)?void 0:i.max,step:null!=(s=null==(o=c.options)?void 0:o.step)?s:"any"}),(0,m.jsx)(ex,{type:"button",label:null!=(u=null==(d=null==(l=c.options)?void 0:l.labels)?void 0:d.button)?u:"Send",isDisabled:""===b,className:"my-2 ml-2",onClick:E})]})},eM=e=>{let{from:t,to:n,hasTime:r,isRange:a}=e,i=window.navigator.language,o={day:"2-digit",month:"2-digit",year:"numeric",hour:r?"2-digit":void 0,minute:r?"2-digit":void 0},s=new Date(r?t:t.replace(/-/g,"/")).toLocaleString(i,o),l=new Date(r?n:n.replace(/-/g,"/")).toLocaleString(i,o);return"".concat(s).concat(a?" to ".concat(l):"")},eV=e=>{var t,n,r;let{onSubmit:a,options:i}=e,{hasTime:o,isRange:s,labels:l}=null!=i?i:{},[d,u]=(0,f.useState)({from:"",to:""});return(0,m.jsx)("div",{className:"flex flex-col w-full lg:w-4/6",children:(0,m.jsx)("div",{className:"flex items-center",children:(0,m.jsxs)("form",{className:"flex justify-between rounded-lg typebot-input pr-2 items-end",onSubmit:e=>{""===d.from&&""===d.to||(e.preventDefault(),a({value:"".concat(d.from).concat(s?" to ".concat(d.to):""),label:eM((0,g.b)((0,g.a)({},d),{hasTime:o,isRange:s}))}))},children:[(0,m.jsxs)("div",{className:"flex flex-col",children:[(0,m.jsxs)("div",{className:"flex items-center p-4 "+(s?"pb-0":""),children:[s&&(0,m.jsx)("p",{className:"font-semibold mr-2",children:null!=(t=null==l?void 0:l.from)?t:"From:"}),(0,m.jsx)("input",{className:"focus:outline-none flex-1 w-full text-input",style:{minHeight:"2rem",minWidth:"100px",fontSize:"16px"},type:o?"datetime-local":"date",onChange:e=>u((0,g.b)((0,g.a)({},d),{from:e.target.value})),"data-testid":"from-date"})]}),s&&(0,m.jsxs)("div",{className:"flex items-center p-4",children:[s&&(0,m.jsx)("p",{className:"font-semibold",children:null!=(n=null==l?void 0:l.to)?n:"To:"}),(0,m.jsx)("input",{className:"focus:outline-none flex-1 w-full text-input ml-2",style:{minHeight:"2rem",minWidth:"100px",fontSize:"16px"},type:o?"datetime-local":"date",onChange:e=>u((0,g.b)((0,g.a)({},d),{to:e.target.value})),"data-testid":"to-date"})]})]}),(0,m.jsx)(ex,{label:null!=(r=null==l?void 0:l.button)?r:"Send",isDisabled:""===d.to&&""===d.from,className:"my-2 ml-2"})]})})})},eD=e=>{var t,n;let{block:r,onSubmit:a}=e,{typebot:{variables:i}}=Q(),{resultValues:o}=eg(),[s,l]=(0,f.useState)([]),d=e=>t=>{var n;t.preventDefault(),null!=(n=r.options)&&n.isMultipleChoice?u(e):a({value:G(i)(r.items[e].content),itemId:r.items[e].id})},u=e=>{let t=s.indexOf(e);-1!==t?(s.splice(t,1),l([...s])):l([...s,e])},c=o&&0===o.answers.length&&1===r.items.length;return(0,m.jsxs)("form",{className:"flex flex-col items-end",onSubmit:()=>a({value:s.map(e=>G(i)(r.items[e].content)).join(", ")}),children:[(0,m.jsx)("div",{className:"flex flex-wrap justify-end",children:r.items.map((e,t)=>{var n,a;return(0,m.jsxs)("span",{className:"relative inline-flex ml-2 mb-2",children:[(0,m.jsx)("button",{role:null!=(n=r.options)&&n.isMultipleChoice?"checkbox":"button",onClick:d(t),className:"py-2 px-4 text-left font-semibold rounded-md transition-all filter hover:brightness-90 active:brightness-75 duration-100 focus:outline-none typebot-button "+(s.includes(t)||!(null!=(a=r.options)&&a.isMultipleChoice)?"":"selectable"),"data-testid":"button","data-itemid":e.id,children:G(i)(e.content)}),c&&(0,m.jsxs)("span",{className:"flex h-3 w-3 absolute top-0 right-0 -mt-1 -mr-1 ping",children:[(0,m.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full brightness-225 opacity-75"}),(0,m.jsx)("span",{className:"relative inline-flex rounded-full h-3 w-3 brightness-200"})]})]},e.id)})}),(0,m.jsx)("div",{className:"flex",children:s.length>0&&(0,m.jsx)(ex,{label:null!=(n=null==(t=r.options)?void 0:t.buttonLabel)?n:"Send",disableIcon:!0})})]})},ez=e=>new Promise(t=>{if(e.getElementById("stripe-script"))return t();let n=e.createElement("script");n.src="https://js.stripe.com/v3",n.id="stripe-script",e.body.appendChild(n),n.onload=()=>{t()}}),eZ=(0,f.createContext)({}),eH=e=>{let{children:t,onScroll:n}=e;return(0,m.jsx)(eZ.Provider,{value:{scroll:n},children:t})},eG=()=>(0,f.useContext)(eZ),eX=e=>{let{apiHost:t,isPreview:n,inputOptions:r,variables:a}=e;return k({url:"".concat(t,"/api/integrations/stripe/createPaymentIntent"),method:"POST",body:{inputOptions:r,isPreview:n,variables:a}})},eF=e=>{let{options:t,onSuccess:n}=e,{apiHost:r,isPreview:a,typebot:{variables:i},onNewLog:o}=Q(),[s,l]=(0,f.useState)(null),[d,u]=(0,f.useState)(""),[c,p]=(0,f.useState)("");return(0,f.useEffect)(()=>{(0,g.d)(void 0,null,function*(){let{data:e,error:n}=yield eX({apiHost:r,isPreview:a,variables:i,inputOptions:t});if(n)return o({status:"error",description:n.name+" "+n.message,details:n.message});e&&document&&(yield ez(document),null!=window&&window.Stripe&&(l(window.Stripe(e.publicKey)),u(e.clientSecret),p(e.amountLabel)))})},[]),s&&d?(0,m.jsx)(E.Elements,{stripe:s,options:{clientSecret:d},children:(0,m.jsx)(eW,{onSuccess:n,clientSecret:d,amountLabel:c,options:t,variables:i,viewerHost:r})}):(0,m.jsx)(ew,{className:"text-blue-500"})},eW=e=>{var t;let{onSuccess:n,clientSecret:r,amountLabel:a,options:i,variables:o,viewerHost:s}=e,{scroll:l}=eG(),[d,u]=(0,f.useState)(!0),c=(0,E.useStripe)(),p=(0,E.useElements)(),[h,b]=(0,f.useState)(),[v,y]=(0,f.useState)(!1),[_,x]=(0,f.useState)(!1);return(0,f.useEffect)(()=>{if(!(!c||!r)){if(d)return u(!1);c.retrievePaymentIntent(r).then(e=>{let{paymentIntent:t}=e;switch(null==t?void 0:t.status){case"succeeded":b("Payment succeeded!");break;case"processing":b("Your payment is processing.");break;case"requires_payment_method":b("Your payment was not successful, please try again.");break;default:b("Something went wrong.")}})}},[c,r]),(0,m.jsxs)("form",{id:"payment-form",onSubmit:e=>(0,g.d)(void 0,null,function*(){var t,r,a,l,d;if(e.preventDefault(),!c||!p)return;y(!0);let{error:u,paymentIntent:h}=yield c.confirmPayment({elements:p,confirmParams:{return_url:s,payment_method_data:{billing_details:{name:null!=(t=null==i?void 0:i.additionalInformation)&&t.name?G(o)(i.additionalInformation.name):void 0,email:null!=(r=null==i?void 0:i.additionalInformation)&&r.email?G(o)(null==(a=i.additionalInformation)?void 0:a.email):void 0,phone:null!=(l=null==i?void 0:i.additionalInformation)&&l.phoneNumber?G(o)(null==(d=i.additionalInformation)?void 0:d.phoneNumber):void 0}}},redirect:"if_required"});if(y(!1),(null==u?void 0:u.type)!=="validation_error"){if((null==u?void 0:u.type)==="card_error")return b(u.message);if(!u&&"succeeded"===h.status)return n()}}),className:"flex flex-col rounded-lg p-4 typebot-input w-full items-center",children:[(0,m.jsx)(E.PaymentElement,{id:"payment-element",className:"w-full",onReady:()=>{x(!0),l()}}),_&&(0,m.jsx)(ex,{label:"".concat(null==(t=null==i?void 0:i.labels)?void 0:t.button," ").concat(a),isDisabled:v||!c||!p,isLoading:v,className:"mt-4 w-full max-w-lg",disableIcon:!0}),h&&(0,m.jsx)("div",{id:"payment-message",className:"typebot-input-error-message mt-4 text-center",children:h})]})},eK=e=>{let{onSuccess:t,options:n}=e;switch(null==n?void 0:n.provider){case void 0:case"Stripe":return(0,m.jsx)(eF,{onSuccess:t,options:n})}},eY={length:10},eJ=e=>{var t,n,r,a,i,o,s,l,d,u;let{block:c,onSubmit:p}=e,[h,b]=(0,f.useState)(),v=e=>{var t;null!=(t=c.options)&&t.isOneClickSubmitEnabled&&p({value:e.toString()}),b(e)};return(0,m.jsxs)("form",{className:"flex flex-col",onSubmit:e=>{e.preventDefault(),L(h)||p({value:h.toString()})},children:[(null==(n=null==(t=c.options)?void 0:t.labels)?void 0:n.left)&&(0,m.jsx)("span",{className:"text-sm w-full mb-2 rating-label",children:c.options.labels.left}),(0,m.jsx)("div",{className:"flex flex-wrap justify-center",children:Array.from(Array((null!=(a=null==(r=c.options)?void 0:r.length)?a:eY.length)+((null==(i=c.options)?void 0:i.buttonType)==="Numbers"?1:0))).map((e,t)=>{var n;return(0,f.createElement)(eq,(0,g.b)((0,g.a)({},c.options),{key:t,rating:h,idx:t+((null==(n=c.options)?void 0:n.buttonType)==="Numbers"?0:1),onClick:v}))})}),(null==(s=null==(o=c.options)?void 0:o.labels)?void 0:s.right)&&(0,m.jsx)("span",{className:"text-sm w-full text-right mb-2 pr-2 rating-label",children:c.options.labels.right}),(0,m.jsx)("div",{className:"flex justify-end mr-2",children:R(h)&&(0,m.jsx)(ex,{label:null!=(u=null==(d=null==(l=c.options)?void 0:l.labels)?void 0:d.button)?u:"Send",disableIcon:!0})})]})},eq=e=>{let{rating:t,idx:n,buttonType:r,customIcon:a,onClick:i}=e;return"Numbers"===r?(0,m.jsx)("button",{onClick:e=>{e.preventDefault(),i(n)},className:"py-2 px-4 mr-2 mb-2 text-left font-semibold rounded-md transition-all filter hover:brightness-90 active:brightness-75 duration-100 focus:outline-none typebot-button "+(R(t)&&n<=t?"":"selectable"),children:n}):(0,m.jsx)("div",{className:"flex justify-center items-center rating-icon-container cursor-pointer mr-2 mb-2 "+(R(t)&&n<=t?"selected":""),onClick:()=>i(n),dangerouslySetInnerHTML:{__html:(null==a?void 0:a.isEnabled)&&!A(a.svg)?a.svg:e$}})},e$='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-star"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>',eQ=e=>(0,g.d)(void 0,[e],function*(e){let{basePath:t="/api",files:n,onUploadProgress:r}=e,a=[],i=0;for(let{file:e,path:o}of n){r&&r(i/n.length*100),i+=1;let{data:s}=yield k("".concat(t,"/storage/upload-url?filePath=").concat(encodeURIComponent(o),"&fileType=").concat(e.type));if(!(null!=s&&s.presignedUrl))continue;let l=s.presignedUrl;if(s.hasReachedStorageLimit)a.push(null);else{if(!(yield fetch(l,{method:"PUT",body:e})).ok)continue;a.push(l.split("?")[0])}}return a}),e0={labels:{placeholder:"<strong>\n      Click to upload\n    </strong> or drag and drop<br>\n    (size limit: 10MB)",button:"Upload",clear:"Clear",skip:"Skip",success:{single:"File uploaded",multiple:"{total} files uploaded"}}},e1=e=>{var t,n,r,a;let{block:{id:i,options:o},onSubmit:s,onSkip:l}=e,{isMultipleAllowed:d,labels:u,isRequired:c}=null!=o?o:{},p=o&&"sizeLimit"in o?null==o?void 0:o.sizeLimit:void 0,{isPreview:h,currentTypebotId:b}=Q(),{resultId:v}=eg(),[y,_]=(0,f.useState)([]),[E,x]=(0,f.useState)(!1),[w,I]=(0,f.useState)(0),[T,C]=(0,f.useState)(!1),[S,N]=(0,f.useState)(),P=e=>{N(void 0);let t=Array.from(e);return t.some(e=>e.size>(null!=p?p:10)*1048576)?N("A file is larger than ".concat(null!=p?p:10,"MB")):!d&&e?k(t[0]):void _([...y,...t])},k=e=>(0,g.d)(void 0,null,function*(){var t;if(h)return s({label:"File uploaded",value:"http://fake-upload-url.com"});x(!0);let n=yield eQ({basePath:"/api/typebots/".concat(b,"/blocks/").concat(i),files:[{file:e,path:"public/results/".concat(v,"/").concat(i,"/").concat(e.name)}]});if(x(!1),n.length)return s({label:"File uploaded",value:null!=(t=n[0])?t:""});N("An error occured while uploading the file")}),R=e=>(0,g.d)(void 0,null,function*(){if(h)return s({label:"".concat(e.length," file").concat(e.length>1?"s":""," uploaded"),value:e.map((e,t)=>"http://fake-upload-url.com/".concat(t)).join(", ")});x(!0);let t=yield eQ({basePath:"/api/typebots/".concat(b,"/blocks/").concat(i),files:e.map(e=>({file:e,path:"public/results/".concat(v,"/").concat(i,"/").concat(e.name)})),onUploadProgress:I});if(x(!1),I(0),t.length!==e.length)return N("An error occured while uploading the files");s({label:"".concat(t.length," file").concat(t.length>1?"s":""," uploaded"),value:t.join(", ")})});return(0,m.jsxs)("form",{className:"flex flex-col w-full",onSubmit:e=>(0,g.d)(void 0,null,function*(){e.preventDefault(),0!==y.length&&R(y)}),children:[(0,m.jsx)("label",{htmlFor:"dropzone-file",className:"typebot-upload-input py-6 flex flex-col justify-center items-center w-full bg-gray-50 rounded-lg border-2 border-gray-300 border-dashed cursor-pointer hover:bg-gray-100 px-8 mb-2 "+(T?"dragging-over":""),onDragOver:e=>{e.preventDefault(),C(!0)},onDragLeave:()=>C(!1),onDrop:e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer.files&&P(e.dataTransfer.files)},children:E?(0,m.jsx)(m.Fragment,{children:1===y.length?(0,m.jsx)(ew,{}):(0,m.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,m.jsx)("div",{className:"upload-progress-bar h-2.5 rounded-full",style:{width:"".concat(w>0?w:10,"%"),transition:"width 150ms cubic-bezier(0.4, 0, 0.2, 1)"}})})}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[y.length?(0,m.jsxs)("span",{className:"relative",children:[(0,m.jsx)(e5,{}),(0,m.jsx)("div",{className:"total-files-indicator flex items-center justify-center absolute -right-1 rounded-full px-1 h-4",style:{bottom:"5px"},children:y.length})]}):(0,m.jsx)(e2,{}),(0,m.jsx)("p",{className:"text-sm text-gray-500 text-center",dangerouslySetInnerHTML:{__html:null!=(t=null==u?void 0:u.placeholder)?t:""}})]}),(0,m.jsx)("input",{id:"dropzone-file",type:"file",className:"hidden",multiple:d,onChange:e=>(0,g.d)(void 0,null,function*(){e.target.files&&P(e.target.files)})})]})}),0===y.length&&!1===c&&(0,m.jsx)("div",{className:"flex justify-end",children:(0,m.jsx)("button",{className:"py-2 px-4 justify-center font-semibold rounded-md text-white focus:outline-none flex items-center disabled:opacity-50 disabled:cursor-not-allowed disabled:brightness-100 transition-all filter hover:brightness-90 active:brightness-75 typebot-button ",onClick:l,children:null!=(n=null==u?void 0:u.skip)?n:e0.labels.skip})}),d&&y.length>0&&!E&&(0,m.jsx)("div",{className:"flex justify-end",children:(0,m.jsxs)("div",{className:"flex",children:[y.length&&(0,m.jsx)("button",{className:"secondary-button py-2 px-4 justify-center font-semibold rounded-md text-white focus:outline-none flex items-center disabled:opacity-50 disabled:cursor-not-allowed disabled:brightness-100 transition-all filter hover:brightness-90 active:brightness-75 mr-2",onClick:()=>_([]),children:null!=(r=null==u?void 0:u.clear)?r:e0.labels.clear}),(0,m.jsx)(ex,{type:"submit",label:(null==u?void 0:u.button)===e0.labels.button?"".concat(u.button," ").concat(y.length," file").concat(y.length>1?"s":""):null!=(a=null==u?void 0:u.button)?a:"",disableIcon:!0})]})}),S&&(0,m.jsx)("p",{className:"text-red-500 text-sm",children:S})]})},e2=()=>(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mb-3",children:[(0,m.jsx)("polyline",{points:"16 16 12 12 8 16"}),(0,m.jsx)("line",{x1:"12",y1:"12",x2:"12",y2:"21"}),(0,m.jsx)("path",{d:"M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"}),(0,m.jsx)("polyline",{points:"16 16 12 12 8 16"})]}),e5=()=>(0,m.jsxs)("svg",{className:"mb-3",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,m.jsx)("path",{d:"M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"}),(0,m.jsx)("polyline",{points:"13 2 13 9 20 9"})]}),e4=(e,t)=>{for(let n=0;n<t.length;n++)for(let r=0;r<t[n].blocks.length;r++)if(t[n].blocks[r].id===e)return{block:t[n].blocks[r],group:t[n],blockIndex:r,groupIndex:n};throw Error("Block with id ".concat(e," was not found"))},e3=e=>{var t,n,r,a,i,o,s,l,d;let{block:u,hasAvatar:c,hasGuestAvatar:p,onTransitionEnd:h,onSkip:b}=e,{typebot:v,isLoading:y}=Q(),{addAnswer:_}=eg(),[E,x]=(0,f.useState)(),[w,I]=(0,f.useState)(!1),{variableId:T}=null!=(t=u.options)?t:{},C=(null!=(r=null==(n=v.settings.general)?void 0:n.isInputPrefillEnabled)?r:es.general.isInputPrefillEnabled)&&T?null==(a=v.variables.find(e=>{var t;return e.name===(null==(t=v.variables.find(z(T)))?void 0:t.name)}))?void 0:a.value:void 0;if(y)return null;if(E){let e=null==(o=null==(i=v.theme.chat)?void 0:i.guestAvatar)?void 0:o.url;return(0,m.jsx)(ef,{message:E,showAvatar:null!=(d=null==(l=null==(s=v.theme.chat)?void 0:s.guestAvatar)?void 0:l.isEnabled)&&d,avatarSrc:e&&G(v.variables)(e)})}return(0,m.jsxs)("div",{className:"flex justify-end",children:[c&&(0,m.jsx)("div",{className:"flex w-6 xs:w-10 h-6 xs:h-10 mr-2 mb-2 mt-1 flex-shrink-0 items-center"}),(0,m.jsx)(e9,{block:u,onSubmit:e=>(0,g.d)(void 0,[e],function*(e){let{label:t,value:n,itemId:r}=e;x(null!=t?t:n);let a=!eL(n,u.type);if(!a&&_){let{group:e}=e4(u.id,v.groups);yield _(v.variables)({blockId:u.id,groupId:e.id,content:n,variableId:T,uploadedFiles:"file input"===u.type})}w||h({label:t,value:n,itemId:r},a),I(!1)}),onSkip:b,defaultValue:null==C?void 0:C.toString(),hasGuestAvatar:p})]})},e9=e=>{let{block:t,onSubmit:n,onSkip:r,defaultValue:a,hasGuestAvatar:i}=e;switch(t.type){case"text input":return(0,m.jsx)(eU,{block:t,onSubmit:n,defaultValue:a,hasGuestAvatar:i});case"number input":return(0,m.jsx)(eB,{block:t,onSubmit:n,defaultValue:a,hasGuestAvatar:i});case"email input":return(0,m.jsx)(eI,{block:t,onSubmit:n,defaultValue:a,hasGuestAvatar:i});case"url input":return(0,m.jsx)(eP,{block:t,onSubmit:n,defaultValue:a,hasGuestAvatar:i});case"phone number input":return(0,m.jsx)(eS,{block:t,onSubmit:n,defaultValue:a,hasGuestAvatar:i});case"date input":return(0,m.jsx)(eV,{options:t.options,onSubmit:n});case"choice input":return(0,m.jsx)(eD,{block:t,onSubmit:n});case"payment input":return(0,m.jsx)(eK,{options:t.options,onSuccess:()=>{var e,r,a;return n({value:null!=(a=null==(r=null==(e=t.options)?void 0:e.labels)?void 0:r.success)?a:"Success"})}});case"rating input":return(0,m.jsx)(eJ,{block:t,onSubmit:n});case"file input":return(0,m.jsx)(e1,{block:t,onSubmit:n,onSkip:r});default:return null}},e6=e=>{var t;return'\nwindow.$chatwoot.setUser("'.concat(null!=(t=null==e?void 0:e.id)?t:"",'", {\n  email: ').concat(null!=e&&e.email?'"'.concat(e.email,'"'):"undefined",",\n  name: ").concat(null!=e&&e.name?'"'.concat(e.name,'"'):"undefined",",\n  avatar_url: ").concat(null!=e&&e.avatarUrl?'"'.concat(e.avatarUrl,'"'):"undefined",",\n  phone_number: ").concat(null!=e&&e.phoneNumber?'"'.concat(e.phoneNumber,'"'):"undefined",",\n});\n\n")},e7=function(){let{baseUrl:e,websiteToken:t,user:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"\nif (window.$chatwoot) {\n  if(".concat(!!n,") {\n    ").concat(e6(n),'\n  }\n  window.$chatwoot.toggle("open");\n} else {\n  (function (d, t) {\n    var BASE_URL = "').concat(e,'";\n    var g = d.createElement(t),\n      s = d.getElementsByTagName(t)[0];\n    g.src = BASE_URL + "/packs/js/sdk.js";\n    g.defer = true;\n    g.async = true;\n    s.parentNode.insertBefore(g, s);\n    g.onload = function () {\n      window.chatwootSDK.run({\n        websiteToken: "').concat(t,'",\n        baseUrl: BASE_URL,\n      });\n      window.addEventListener("chatwoot:ready", function () {\n        if(').concat(!!((null==n?void 0:n.id)||(null==n?void 0:n.email)),") {\n          ").concat(e6(n),'\n        }\n        window.$chatwoot.toggle("open");\n      });\n    };\n  })(document, "script");\n}')},e8=(e,t)=>{let{variables:n,isPreview:r,onNewLog:a}=t;if(r)a({status:"info",description:"Chatwoot won't open in preview mode",details:null});else if(ev)J({closeChatBubble:!0}),J({codeToExecute:G(n)(e7(e.options))});else{let t=Function(G(n)(e7(e.options)));try{t()}catch(e){console.error(e)}}return e.outgoingEdgeId},te=(e,t)=>(0,g.d)(void 0,[e,t],function*(e,t){var r;let{variables:a}=t;if(!(null!=(r=e.options)&&r.trackingId))return e.outgoingEdgeId;let{default:i}=yield n.e(121).then(n.bind(n,2121));return yield i(e.options.trackingId),(0,g.e)(K(e.options,a)),e.outgoingEdgeId}),tt=(e,t)=>(0,g.d)(void 0,null,function*(){if(!e.options||!("action"in e.options))return e.outgoingEdgeId;switch(e.options.action){case"Insert a row":tn(e.options,t);break;case"Update a row":tr(e.options,t);break;case"Get data from sheet":yield ta(e.options,t)}return e.outgoingEdgeId}),tn=(e,t)=>{let{variables:n,apiHost:r,onNewLog:a,resultId:i}=t;if(!e.cellsToInsert){a({status:"warning",description:"Cells to insert are undefined",details:null});return}k({url:"".concat(r,"/api/integrations/google-sheets/spreadsheets/").concat(e.spreadsheetId,"/sheets/").concat(e.sheetId),method:"POST",body:{action:"Insert a row",credentialsId:e.credentialsId,resultId:i,values:ti(e.cellsToInsert,n)}}).then(e=>{let{error:t}=e;a(ey(t,"Succesfully inserted a row in the sheet","Failed to insert a row in the sheet"))})},tr=(e,t)=>{var n,r,a;let{variables:i,apiHost:o,onNewLog:s,resultId:l}=t;e.cellsToUpsert&&"referenceCell"in e&&k({url:"".concat(o,"/api/integrations/google-sheets/spreadsheets/").concat(e.spreadsheetId,"/sheets/").concat(e.sheetId),method:"POST",body:{action:"Update a row",credentialsId:e.credentialsId,values:ti(e.cellsToUpsert,i),resultId:l,referenceCell:{column:null==(n=e.referenceCell)?void 0:n.column,value:G(i)(null!=(a=null==(r=e.referenceCell)?void 0:r.value)?a:"")}}}).then(e=>{let{error:t}=e;s(ey(t,"Succesfully updated a row in the sheet","Failed to update a row in the sheet"))})},ta=(e,t)=>(0,g.d)(void 0,[e,t],function*(e,t){var n,r,a,i,o,s;let{variables:l,updateVariableValue:d,updateVariables:u,apiHost:c,onNewLog:p,resultId:h}=t;if(!e.cellsToExtract)return;let{data:m,error:f}=yield k({url:"".concat(c,"/api/integrations/google-sheets/spreadsheets/").concat(e.spreadsheetId,"/sheets/").concat(e.sheetId),method:"POST",body:{action:"Get data from sheet",credentialsId:e.credentialsId,referenceCell:"referenceCell"in e?{column:null==(n=e.referenceCell)?void 0:n.column,value:G(l)(null!=(a=null==(r=e.referenceCell)?void 0:r.value)?a:"")}:void 0,filter:e.filter?{comparisons:null==(i=e.filter.comparisons)?void 0:i.map(e=>(0,g.b)((0,g.a)({},e),{value:G(l)(e.value)})),logicalOperator:null!=(s=null==(o=e.filter)?void 0:o.logicalOperator)?s:"AND"}:void 0,columns:e.cellsToExtract.map(e=>e.column),resultId:h}});p(ey(f,"Succesfully fetched data from sheet","Failed to fetch data from sheet")),m&&u(e.cellsToExtract.reduce((e,t)=>{var n,r;let a=l.find(z(t.variableId)),i=m.rows,o=null!=(r=i[Math.floor(Math.random()*i.length)][null!=(n=t.column)?n:""])?r:null;return a?(d(a.id,o),[...e,(0,g.b)((0,g.a)({},a),{value:o})]):e},[]))}),ti=(e,t)=>e.reduce((e,n)=>n.column&&n.value?(0,g.b)((0,g.a)({},e),{[n.column]:G(t)(n.value)}):e,{}),to=(e,t)=>{var n,r,a,i,o,s;let{variables:l,apiHost:d,isPreview:u,onNewLog:c,resultId:p,typebotId:h,resultValues:m}=t;if(u)return c({status:"info",description:"Emails are not sent in preview mode",details:null}),e.outgoingEdgeId;let{options:g}=e;return k({url:"".concat(d,"/api/typebots/").concat(h,"/integrations/email?resultId=").concat(p),method:"POST",body:{credentialsId:null==g?void 0:g.credentialsId,recipients:null==(n=null==g?void 0:g.recipients)?void 0:n.map(G(l)),subject:G(l)(null!=(r=null==g?void 0:g.subject)?r:""),body:G(l)(null!=(a=null==g?void 0:g.body)?a:""),cc:(null!=(i=null==g?void 0:g.cc)?i:[]).map(G(l)),bcc:(null!=(o=null==g?void 0:g.bcc)?o:[]).map(G(l)),replyTo:null!=g&&g.replyTo?G(l)(g.replyTo):void 0,fileUrls:null==(s=l.find(z(null==g?void 0:g.attachmentsVariableId)))?void 0:s.value,isCustomBody:null==g?void 0:g.isCustomBody,isBodyCode:null==g?void 0:g.isBodyCode,resultValues:m}}).then(e=>{let{error:t}=e;c(ey(t,"Succesfully sent an email","Failed to send an email"))}),e.outgoingEdgeId},ts=(e,t)=>(0,g.d)(void 0,[e,t],function*(e,t){var n,r;let{blockId:a,variables:i,updateVariableValue:o,updateVariables:s,typebotId:l,apiHost:d,resultValues:u,onNewLog:c,resultId:p,parentTypebotIds:h}=t,m=(0,x.stringify)({resultId:p}),{data:f,error:b}=yield k({url:"".concat(d,"/api/typebots/").concat(l,"/blocks/").concat(a,"/executeWebhook?").concat(m),method:"POST",body:{variables:i,resultValues:u,parentTypebotIds:h}}),v=null==f?void 0:f.statusCode.toString(),y=!v||(null==v?void 0:v.startsWith("4"))||(null==v?void 0:v.startsWith("5"));c({status:b?"error":y?"warning":"success",description:y?"Webhook returned an error":"Webhook successfuly executed",details:JSON.stringify(null!=b?b:f,null,2).substring(0,1e3)});let _=null==(r=null==(n=e.options)?void 0:n.responseVariableMapping)?void 0:r.reduce((e,t)=>{if(!(null!=t&&t.bodyPath)||!t.variableId)return e;let n=i.find(z(t.variableId));if(!n)return e;let r=Function("data","return data.".concat(G(i)(null==t?void 0:t.bodyPath)));try{let t=r(f);return o(null==n?void 0:n.id,t),[...e,(0,g.b)((0,g.a)({},n),{value:t})]}catch(t){return e}},[]);return _&&s(_),e.outgoingEdgeId}),tl=e=>{let{block:t,context:n}=e;switch(t.type){case"Google Sheets":return tt(t,n);case"Google Analytics":return te(t,n);case"Zapier":case"Make.com":case"Pabbly":case"Webhook":return ts(t,n);case"Email":return to(t,n);case"Chatwoot":return e8(t,n);default:return}},td=(e,t)=>{let{typebot:{variables:n}}=t,r=e.items.find(e=>{var t,r;let{content:a}=e;return(null==a?void 0:a.logicalOperator)==="AND"?null==(t=a.comparisons)?void 0:t.every(tu(n)):null==(r=null==a?void 0:a.comparisons)?void 0:r.some(tu(n))});return r?r.outgoingEdgeId:e.outgoingEdgeId},tu=e=>t=>{var n,r;if(!(null!=t&&t.variableId))return!1;let a=(null!=(r=null==(n=e.find(e=>e.id===t.variableId))?void 0:n.value)?r:"").toString().trim(),i=G(e)(t.value).trim();return!L(i)&&!!t.comparisonOperator&&tc(a,t.comparisonOperator,i)},tc=(e,t,n)=>{switch(t){case"Contains":return e.toLowerCase().includes(n.toLowerCase());case"Equal to":return e===n;case"Not equal":return e!==n;case"Greater than":return parseFloat(e)>parseFloat(n);case"Less than":return parseFloat(e)<parseFloat(n);case"Is set":return R(e)&&e.length>0}},tp=(e,t)=>{var n,r;let{typebot:{variables:a}}=t;if(!(null!=(n=e.options)&&n.url))return{nextEdgeId:e.outgoingEdgeId};let i=H(G(a)(e.options.url)),o=window.parent&&window.location!==(null==(r=window.top)?void 0:r.location),s=null;if(o){if(!e.options.isNewTab)return window.top.location.href=i,{nextEdgeId:e.outgoingEdgeId};try{s=window.open(i)}catch(e){J({redirectUrl:i})}}else s=window.open(i,e.options.isNewTab?"_blank":"_self");return{nextEdgeId:e.outgoingEdgeId,blockedPopupUrl:s?void 0:i}},th=(e,t)=>{var n;let{typebot:{variables:r},updateVariableValue:a,updateVariables:i}=t;if(!(null!=(n=e.options)&&n.variableId)||void 0!==e.options.type&&"Custom"!==e.options.type)return e.outgoingEdgeId;let o=e.options.expressionToEvaluate?tm(r)(e.options.expressionToEvaluate):void 0,s=r.find(z(e.options.variableId));return s&&(a(s.id,o),i([(0,g.b)((0,g.a)({},s),{value:o})])),e.outgoingEdgeId},tm=e=>t=>{let n=G(e,{fieldToParse:"id"})(t.includes("return ")?t:"return ".concat(t));try{return Function(...e.map(e=>e.id),n)(...e.map(e=>F(e.value)))}catch(n){return G(e)(t)}},tg=(e,t)=>(0,g.d)(void 0,[e,t],function*(e,t){var n,r;let{apiHost:a,injectLinkedTypebot:i,isPreview:o}=t,{data:s,error:l}=o?yield k("/api/typebots/".concat(null==(n=e.options)?void 0:n.typebotId)):yield k("".concat(a,"/api/publicTypebots/").concat(null==(r=e.options)?void 0:r.typebotId));if(!(!s||l))return i(s.typebot)}),tf=(e,t)=>(0,g.d)(void 0,null,function*(){var n,r,a,i,o;let{typebot:s,linkedTypebots:l,onNewLog:d,createEdge:u,setCurrentTypebotId:c,pushEdgeIdInLinkedTypebotQueue:p,pushParentTypebotId:h,currentTypebotId:m}=t,f=(null==(n=e.options)?void 0:n.typebotId)==="current"?s:null!=(r=[s,...l].find(t=>{var n,r;return"typebotId"in t?t.typebotId===(null==(n=e.options)?void 0:n.typebotId):t.id===(null==(r=e.options)?void 0:r.typebotId)}))?r:yield tg(e,t);if(!f)return d({status:"error",description:"Failed to link typebot",details:""}),{nextEdgeId:e.outgoingEdgeId};e.outgoingEdgeId&&p({edgeId:e.outgoingEdgeId,typebotId:m}),h(m),c("typebotId"in f?f.typebotId:f.id);let b=null!=(o=null==(a=e.options)?void 0:a.groupId)?o:null==(i=f.groups.find(e=>e.blocks.some(e=>"start"===e.type)))?void 0:i.id;if(!b)return{nextEdgeId:e.outgoingEdgeId};let v={id:(1e3*Math.random()).toString(),from:{blockId:""},to:{groupId:b}};return u(v),{nextEdgeId:v.id,linkedTypebot:(0,g.b)((0,g.a)({},f),{edges:[...f.edges,v]})}}),tb=(e,t)=>(0,g.d)(void 0,[e,t],function*(e,t){var n;let{typebot:{variables:r}}=t;if(!(null!=(n=e.options)&&n.secondsToWaitFor))return e.outgoingEdgeId;let a=G(r)(e.options.secondsToWaitFor);return isNaN(a)||(yield new Promise(e=>setTimeout(e,1e3*parseInt(a)))),e.outgoingEdgeId}),tv=(e,t)=>(0,g.d)(void 0,[e,t],function*(e,t){var n;let{typebot:{variables:r}}=t;if(null!=(n=e.options)&&n.content){if(e.options.shouldExecuteInParentContext&&ev)J({codeToExecute:G(r)(e.options.content)});else{let t=Function(...r.map(e=>e.id),G(r,{fieldToParse:"id"})(e.options.content));try{yield t(...r.map(e=>F(e.value)))}catch(e){console.error(e)}}return e.outgoingEdgeId}}),ty=(e,t)=>(0,g.d)(void 0,null,function*(){switch(e.type){case"Set variable":return{nextEdgeId:th(e,t)};case"Condition":return{nextEdgeId:td(e,t)};case"Redirect":return tp(e,t);case"Code":return{nextEdgeId:yield tv(e,t)};case"Typebot link":return tf(e,t);case"Wait":return{nextEdgeId:yield tb(e,t)};default:return{}}}),t_=e=>{let{url:t,onLinkClick:n}=e;return(0,m.jsxs)("div",{className:"w-full max-w-xs p-4 text-gray-500 bg-white rounded-lg shadow flex flex-col gap-2",role:"alert",children:[(0,m.jsx)("span",{className:"mb-1 text-sm font-semibold text-gray-900",children:"Popup blocked"}),(0,m.jsx)("div",{className:"mb-2 text-sm font-normal",children:"The bot wants to open a new tab but it was blocked by your broswer. It needs a manual approval."}),(0,m.jsx)("a",{href:t,target:"_blank",className:"py-1 px-4 justify-center text-sm font-semibold rounded-md text-white focus:outline-none flex items-center disabled:opacity-50 disabled:cursor-not-allowed disabled:brightness-100 transition-all filter hover:brightness-90 active:brightness-75 typebot-button",rel:"noreferrer",onClick:n,children:"Continue in new tab"})]})},tE=e=>{var t,n;let{blocks:r,startBlockIndex:a,groupTitle:i,onGroupEnd:o,keepShowingHostAvatar:s}=e,{currentTypebotId:l,typebot:d,updateVariableValue:u,createEdge:c,apiHost:p,isPreview:h,parentTypebotIds:b,onNewLog:v,injectLinkedTypebot:y,linkedTypebots:_,setCurrentTypebotId:E,pushEdgeIdInLinkedTypebotQueue:x,pushParentTypebotId:w}=Q(),{resultValues:I,updateVariables:T,resultId:C}=eg(),{scroll:S}=eG(),[N,P]=(0,f.useState)([]),[k,L]=(0,f.useState)([]),[A,O]=(0,f.useState)(),Z=e=>{if(P([...N,e]),U(e)){let t=Y(N);t&&D(t)?L(k.map((t,n)=>n===k.length-1?{bubbles:[...t.bubbles,e]}:t)):L([...k,{bubbles:[e]}])}j(e)&&(0===k.length||R(k[k.length-1].input)?L([...k,{bubbles:[],input:e}]):L(k.map((t,n)=>n===k.length-1?(0,g.b)((0,g.a)({},t),{input:e}):t)))};(0,f.useEffect)(()=>{let e=r[a];e&&Z(e)},[]),(0,f.useEffect)(()=>{S(),H()},[N]);let H=()=>(0,g.d)(void 0,null,function*(){var e;let t=[...N].pop();if(t){if(B(t)){let{nextEdgeId:n,linkedTypebot:r,blockedPopupUrl:a}=yield ty(t,{isPreview:h,apiHost:p,typebot:d,linkedTypebots:_,updateVariableValue:u,updateVariables:T,injectLinkedTypebot:y,onNewLog:v,createEdge:c,setCurrentTypebotId:E,pushEdgeIdInLinkedTypebotQueue:x,currentTypebotId:l,pushParentTypebotId:w});if(a&&O(a),"Redirect"===t.type&&(null==(e=t.options)?void 0:e.isNewTab)===!1)return;n?o({edgeId:n,updatedTypebot:r}):X()}if(V(t)){let{group:e}=e4(t.id,d.groups),n=yield tl({block:t,context:{apiHost:p,typebotId:l,groupId:e.id,blockId:t.id,variables:d.variables,isPreview:h,updateVariableValue:u,updateVariables:T,resultValues:I,groups:d.groups,onNewLog:v,resultId:C,parentTypebotIds:b}});n?o({edgeId:n}):X()}"start"===t.type&&o({edgeId:t.outgoingEdgeId})}}),X=(e,t)=>{var n,i,s;S();let l=[...N].pop();if(l){if(t&&eA(l)){let{group:e}=e4(l.id,d.groups);return Z(eO(l,e.id,d.variables,c))}if(j(l)&&(null==(n=l.options)?void 0:n.variableId)&&e&&u(l.options.variableId,e.value),M(l)&&!(null!=(i=l.options)&&i.isMultipleChoice)){let t=null==(s=l.items.find(z(null==e?void 0:e.itemId)))?void 0:s.outgoingEdgeId;if(t)return o({edgeId:t})}if((null==l?void 0:l.outgoingEdgeId)||N.length===r.length)return o({edgeId:l.outgoingEdgeId})}let p=r[N.length+a];p?Z(p):o({})},F=null==(n=null==(t=d.theme.chat)?void 0:t.hostAvatar)?void 0:n.url;return(0,m.jsx)("div",{className:"flex w-full","data-group-name":i,children:(0,m.jsx)("div",{className:"flex flex-col w-full min-w-0",children:k.map((e,t)=>{var n,r,a,i,o,l;return(0,m.jsx)(tx,{displayChunk:e,hostAvatar:{isEnabled:null==(a=null==(r=null==(n=d.theme.chat)?void 0:n.hostAvatar)?void 0:r.isEnabled)||a,src:F&&G(d.variables)(F)},hasGuestAvatar:null!=(l=null==(o=null==(i=d.theme.chat)?void 0:i.guestAvatar)?void 0:o.isEnabled)&&l,onDisplayNextBlock:X,keepShowingHostAvatar:s,blockedPopupUrl:A,onBlockedPopupLinkClick:()=>O(void 0)},t)})})})},tx=e=>{let{displayChunk:{bubbles:t,input:n},hostAvatar:r,hasGuestAvatar:a,keepShowingHostAvatar:i,blockedPopupUrl:o,onBlockedPopupLinkClick:s,onDisplayNextBlock:l}=e,[d,u]=(0,f.useState)(!1),c=(0,f.useRef)();(0,f.useEffect)(()=>{p()});let p=()=>{var e;return null==(e=c.current)?void 0:e.refreshTopOffset()};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"flex",children:[r.isEnabled&&t.length>0&&(0,m.jsx)(en,{ref:c,hostAvatarSrc:r.src,keepShowing:(i||R(n))&&!d}),(0,m.jsx)("div",{className:"flex-1",style:{marginRight:a?"50px":"0.5rem"},children:(0,m.jsx)(b.Z,{children:t.map(e=>(0,m.jsx)(v.Z,{classNames:"bubble",timeout:500,unmountOnExit:!0,children:(0,m.jsx)(ep,{block:e,onTransitionEnd:()=>{l(),p()}})},e.id))})})]}),!d&&(0,m.jsx)(v.Z,{classNames:"bubble",timeout:500,unmountOnExit:!0,in:R(n),children:n?(0,m.jsx)(e3,{block:n,onTransitionEnd:l,onSkip:()=>{l(),u(!0)},hasAvatar:r.isEnabled,hasGuestAvatar:a}):(0,m.jsx)("div",{})}),o?(0,m.jsx)("div",{className:"flex justify-end",children:(0,m.jsx)(t_,{url:o,onLinkClick:s})}):null]})},tw={general:{bgImage:"--typebot-container-bg-image",bgColor:"--typebot-container-bg-color",fontFamily:"--typebot-container-font-family"},chat:{hostBubbles:{bgColor:"--typebot-host-bubble-bg-color",color:"--typebot-host-bubble-color"},guestBubbles:{bgColor:"--typebot-guest-bubble-bg-color",color:"--typebot-guest-bubble-color"},inputs:{bgColor:"--typebot-input-bg-color",color:"--typebot-input-color",placeholderColor:"--typebot-input-placeholder-color"},buttons:{bgColor:"--typebot-button-bg-color",color:"--typebot-button-color"}}},tI=(e,t)=>{!e||(e.general&&tT(e.general,t),e.chat&&tC(e.chat,t))},tT=(e,t)=>{let{background:n,font:r}=e;r&&t.setProperty(tw.general.fontFamily,r)},tC=(e,t)=>{let{hostBubbles:n,guestBubbles:r,buttons:a,inputs:i}=e;n&&tS(n,t),r&&tN(r,t),a&&tP(a,t),i&&tk(i,t)},tS=(e,t)=>{e.backgroundColor&&t.setProperty(tw.chat.hostBubbles.bgColor,e.backgroundColor),e.color&&t.setProperty(tw.chat.hostBubbles.color,e.color)},tN=(e,t)=>{e.backgroundColor&&t.setProperty(tw.chat.guestBubbles.bgColor,e.backgroundColor),e.color&&t.setProperty(tw.chat.guestBubbles.color,e.color)},tP=(e,t)=>{e.backgroundColor&&t.setProperty(tw.chat.buttons.bgColor,e.backgroundColor),e.color&&t.setProperty(tw.chat.buttons.color,e.color)},tk=(e,t)=>{e.backgroundColor&&t.setProperty(tw.chat.inputs.bgColor,e.backgroundColor),e.color&&t.setProperty(tw.chat.inputs.color,e.color),e.placeholderColor&&t.setProperty(tw.chat.inputs.placeholderColor,e.placeholderColor)},tR=e=>{let{theme:t,predefinedVariables:n,startGroupId:r,onNewGroupVisible:a,onCompleted:i}=e,{typebot:o,updateVariableValue:s,linkedBotQueue:l,popEdgeIdFromLinkedTypebotQueue:d}=Q(),[u,c]=(0,f.useState)([]),{updateVariables:p}=eg(),h=(0,f.useRef)(null),b=(0,f.useRef)(null),[v,y]=(0,f.useState)(!1),_=e=>{let{edgeId:t,updatedTypebot:n,groupId:r}=e,s=null!=n?n:o;if(r){let e=s.groups.find(z(r));return e?(a({id:"edgeId",from:{blockId:"block"},to:{groupId:r}}),c([...u,{group:e,startBlockIndex:0}])):void 0}let p=s.edges.find(z(t));if(!p){if(l.length>0){let e=l[0].edgeId;d(),_({edgeId:e})}return i()}let h=s.groups.find(z(p.to.groupId));if(!h)return i();let m=p.to.blockId?h.blocks.findIndex(z(p.to.blockId)):0;a(p),c([...u,{group:h,startBlockIndex:-1===m?0:m}])};(0,f.useEffect)(()=>{if(v)return;R(n)&&Object.keys(n).length>0&&p(E(n)),y(!0);let e=o.groups[0].blocks[0].outgoingEdgeId;(e||r)&&_({edgeId:r?void 0:e,groupId:r})},[n]);let E=e=>{let t=[];return Object.keys(e).forEach(n=>{let r=o.variables.find(e=>e.name.toLowerCase()===n.toLowerCase());if(!e||L(r))return;let a=e[n];a&&(s(null==r?void 0:r.id,a),t.push((0,g.b)((0,g.a)({},r),{value:a})))}),t};return(0,f.useEffect)(()=>{document&&tI(t,document.body.style)},[t]),(0,m.jsxs)("div",{ref:b,className:"overflow-y-scroll w-full lg:w-3/4 min-h-full rounded lg:px-5 px-3 pt-10 relative scrollable-container typebot-chat-view",children:[(0,m.jsx)(eH,{onScroll:()=>{b.current&&setTimeout(()=>{w.NY.scrollToBottom({duration:500,container:b.current})},1)},children:u.map((e,t)=>{let n=u[t+1],r=n&&j(n.group.blocks[n.startBlockIndex]);return(0,m.jsx)(tE,{blocks:e.group.blocks,startBlockIndex:e.startBlockIndex,onGroupEnd:_,groupTitle:e.group.title,keepShowingHostAvatar:t===u.length-1||r},e.group.id+t)})}),(0,m.jsx)("div",{className:"w-full h-32",ref:h})]})},tL=()=>{let e=(0,f.useRef)(null);return(0,f.useEffect)(()=>{if(!document)return;let t=document.querySelector('[data-testid="container"]'),n=new MutationObserver(function(n){n.forEach(function(n){n.removedNodes.forEach(function(n){"lite-badge"==n.id&&t.append(e.current)})})});return n.observe(t,{subtree:!1,childList:!0}),()=>{n.disconnect()}},[]),(0,m.jsxs)("a",{ref:e,href:"https://www.typebot.io/?utm_source=litebadge",target:"_blank",rel:"noopener noreferrer",className:"fixed py-1 px-2 bg-white z-50 rounded shadow-md lite-badge",style:{bottom:"20px"},id:"lite-badge",children:["Made with ",(0,m.jsx)("span",{className:"text-blue-500",children:"Typebot"}),"."]})};(tZ=tH||(tH={})).assertEqual=e=>e,tZ.assertIs=function(e){},tZ.assertNever=function(e){throw Error()},tZ.arrayToEnum=e=>{let t={};for(let n of e)t[n]=n;return t},tZ.getValidEnumValues=e=>{let t=tZ.objectKeys(e).filter(t=>"number"!=typeof e[e[t]]),n={};for(let r of t)n[r]=e[r];return tZ.objectValues(n)},tZ.objectValues=e=>tZ.objectKeys(e).map(function(t){return e[t]}),tZ.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},tZ.find=(e,t)=>{for(let n of e)if(t(n))return n},tZ.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,tZ.joinValues=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" | ";return e.map(e=>"string"==typeof e?"'".concat(e,"'"):e).join(t)},tZ.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(tG||(tG={})).mergeShapes=(e,t)=>(0,g.a)((0,g.a)({},e),t);var tA=tH.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),tO=e=>{switch(typeof e){case"undefined":return tA.undefined;case"string":return tA.string;case"number":return isNaN(e)?tA.nan:tA.number;case"boolean":return tA.boolean;case"function":return tA.function;case"bigint":return tA.bigint;case"symbol":return tA.symbol;case"object":return Array.isArray(e)?tA.array:null===e?tA.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?tA.promise:"undefined"!=typeof Map&&e instanceof Map?tA.map:"undefined"!=typeof Set&&e instanceof Set?tA.set:"undefined"!=typeof Date&&e instanceof Date?tA.date:tA.object;default:return tA.unknown}},tj=tH.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),tU=class extends Error{get errors(){return this.issues}format(e){let t=e||function(e){return e.message},n={_errors:[]},r=e=>{for(let a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(r);else if("invalid_return_type"===a.code)r(a.returnTypeError);else if("invalid_arguments"===a.code)r(a.argumentsError);else if(0===a.path.length)n._errors.push(t(a));else{let e=n,r=0;for(;r<a.path.length;){let n=a.path[r];r===a.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(a))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,tH.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e.message,t={},n=[];for(let r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}constructor(e){var t;super(),t=this,this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.issues=[...t.issues,...e]};let n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}};tU.create=e=>new tU(e);var tB=(e,t)=>{let n;switch(e.code){case tj.invalid_type:n=e.received===tA.undefined?"Required":"Expected ".concat(e.expected,", received ").concat(e.received);break;case tj.invalid_literal:n="Invalid literal value, expected ".concat(JSON.stringify(e.expected,tH.jsonStringifyReplacer));break;case tj.unrecognized_keys:n="Unrecognized key(s) in object: ".concat(tH.joinValues(e.keys,", "));break;case tj.invalid_union:n="Invalid input";break;case tj.invalid_union_discriminator:n="Invalid discriminator value. Expected ".concat(tH.joinValues(e.options));break;case tj.invalid_enum_value:n="Invalid enum value. Expected ".concat(tH.joinValues(e.options),", received '").concat(e.received,"'");break;case tj.invalid_arguments:n="Invalid function arguments";break;case tj.invalid_return_type:n="Invalid function return type";break;case tj.invalid_date:n="Invalid date";break;case tj.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n='Invalid input: must include "'.concat(e.validation.includes,'"'),"number"==typeof e.validation.position&&(n="".concat(n," at one or more positions greater than or equal to ").concat(e.validation.position))):"startsWith"in e.validation?n='Invalid input: must start with "'.concat(e.validation.startsWith,'"'):"endsWith"in e.validation?n='Invalid input: must end with "'.concat(e.validation.endsWith,'"'):tH.assertNever(e.validation):n="regex"!==e.validation?"Invalid ".concat(e.validation):"Invalid";break;case tj.too_small:n="array"===e.type?"Array must contain ".concat(e.exact?"exactly":e.inclusive?"at least":"more than"," ").concat(e.minimum," element(s)"):"string"===e.type?"String must contain ".concat(e.exact?"exactly":e.inclusive?"at least":"over"," ").concat(e.minimum," character(s)"):"number"===e.type?"Number must be ".concat(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ").concat(e.minimum):"date"===e.type?"Date must be ".concat(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ").concat(new Date(Number(e.minimum))):"Invalid input";break;case tj.too_big:n="array"===e.type?"Array must contain ".concat(e.exact?"exactly":e.inclusive?"at most":"less than"," ").concat(e.maximum," element(s)"):"string"===e.type?"String must contain ".concat(e.exact?"exactly":e.inclusive?"at most":"under"," ").concat(e.maximum," character(s)"):"number"===e.type?"Number must be ".concat(e.exact?"exactly":e.inclusive?"less than or equal to":"less than"," ").concat(e.maximum):"bigint"===e.type?"BigInt must be ".concat(e.exact?"exactly":e.inclusive?"less than or equal to":"less than"," ").concat(e.maximum):"date"===e.type?"Date must be ".concat(e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"," ").concat(new Date(Number(e.maximum))):"Invalid input";break;case tj.custom:n="Invalid input";break;case tj.invalid_intersection_types:n="Intersection results could not be merged";break;case tj.not_multiple_of:n="Number must be a multiple of ".concat(e.multipleOf);break;case tj.not_finite:n="Number must be finite";break;default:n=t.defaultError,tH.assertNever(e)}return{message:n}},tM=tB;function tV(){return tM}var tD=e=>{let{data:t,path:n,errorMaps:r,issueData:a}=e,i=[...n,...a.path||[]],o=(0,g.b)((0,g.a)({},a),{path:i}),s="";for(let e of r.filter(e=>!!e).slice().reverse())s=e(o,{data:t,defaultError:s}).message;return(0,g.b)((0,g.a)({},a),{path:i,message:a.message||s})};function tz(e,t){let n=tD({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,tV(),tB].filter(e=>!!e)});e.common.issues.push(n)}var tZ,tH,tG,tX,tF=class{dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let n=[];for(let r of t){if("aborted"===r.status)return tW;"dirty"===r.status&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static mergeObjectAsync(e,t){return(0,g.d)(this,null,function*(){let n=[];for(let e of t)n.push({key:yield e.key,value:yield e.value});return tF.mergeObjectSync(e,n)})}static mergeObjectSync(e,t){let n={};for(let r of t){let{key:t,value:a}=r;if("aborted"===t.status||"aborted"===a.status)return tW;"dirty"===t.status&&e.dirty(),"dirty"===a.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==a.value||r.alwaysSet)&&(n[t.value]=a.value)}return{status:e.value,value:n}}constructor(){this.value="valid"}},tW=Object.freeze({status:"aborted"}),tK=e=>({status:"dirty",value:e}),tY=e=>({status:"valid",value:e}),tJ=e=>"aborted"===e.status,tq=e=>"dirty"===e.status,t$=e=>"valid"===e.status,tQ=e=>"undefined"!=typeof Promise&&e instanceof Promise;(t5=tX||(tX={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},t5.toString=e=>"string"==typeof e?e:null==e?void 0:e.message;var t0=class{get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}},t1=(e,t)=>{if(t$(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new tU(e.common.issues);return this._error=t,this._error}}};function t2(e){if(!e)return{};let{errorMap:t,invalid_type_error:n,required_error:r,description:a}=e;if(t&&(n||r))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:a}:{errorMap:(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:void 0===t.data?{message:null!=r?r:t.defaultError}:{message:null!=n?n:t.defaultError},description:a}}var t5,t4,t3=class{get description(){return this._def.description}_getType(e){return tO(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:tO(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new tF,ctx:{common:e.parent.common,data:e.data,parsedType:tO(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(tQ(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;let r={common:{issues:[],async:null!==(n=null==t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:tO(e)},a=this._parseSync({data:e,path:r.path,parent:r});return t1(r,a)}parseAsync(e,t){return(0,g.d)(this,null,function*(){let n=yield this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error})}safeParseAsync(e,t){return(0,g.d)(this,null,function*(){let n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:tO(e)},r=this._parse({data:e,path:n.path,parent:n});return t1(n,(yield tQ(r)?r:Promise.resolve(r)))})}refine(e,t){let n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,r)=>{let a=e(t),i=()=>r.addIssue((0,g.a)({code:tj.custom},n(t)));return"undefined"!=typeof Promise&&a instanceof Promise?a.then(e=>!!e||(i(),!1)):!!a||(i(),!1)})}refinement(e,t){return this._refinement((n,r)=>!!e(n)||(r.addIssue("function"==typeof t?t(n,r):t),!1))}_refinement(e){return new nA({schema:this,typeName:nH.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return nO.create(this,this._def)}nullable(){return nj.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return nf.create(this,this._def)}promise(){return nL.create(this,this._def)}or(e){return nv.create([this,e],this._def)}and(e){return nE.create(this,e,this._def)}transform(e){return new nA((0,g.b)((0,g.a)({},t2(this._def)),{schema:this,typeName:nH.ZodEffects,effect:{type:"transform",transform:e}}))}default(e){return new nU((0,g.b)((0,g.a)({},t2(this._def)),{innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:nH.ZodDefault}))}brand(){return new nD((0,g.a)({typeName:nH.ZodBranded,type:this},t2(this._def)))}catch(e){return new nB((0,g.b)((0,g.a)({},t2(this._def)),{innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:nH.ZodCatch}))}describe(e){return new this.constructor((0,g.b)((0,g.a)({},this._def),{description:e}))}pipe(e){return nz.create(this,e)}readonly(){return nZ.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}},t9=/^c[^\s-]{8,}$/i,t6=/^[a-z][a-z0-9]*$/,t7=/^[0-9A-HJKMNP-TV-Z]{26}$/,t8=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ne=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,nt=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,nn=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,nr=e=>e.precision?new RegExp(e.offset?"^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{".concat(e.precision,"}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):"^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{".concat(e.precision,"}Z$")):0===e.precision?e.offset?RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):e.offset?RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$"),na=class extends t3{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==tA.string){let t=this._getOrReturnCtx(e);return tz(t,{code:tj.invalid_type,expected:tA.string,received:t.parsedType}),tW}let t=new tF,n;for(let i of this._def.checks)if("min"===i.kind)e.data.length<i.value&&(tz(n=this._getOrReturnCtx(e,n),{code:tj.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),t.dirty());else if("max"===i.kind)e.data.length>i.value&&(tz(n=this._getOrReturnCtx(e,n),{code:tj.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),t.dirty());else if("length"===i.kind){let r=e.data.length>i.value,a=e.data.length<i.value;(r||a)&&(n=this._getOrReturnCtx(e,n),r?tz(n,{code:tj.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&tz(n,{code:tj.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),t.dirty())}else if("email"===i.kind)ne.test(e.data)||(tz(n=this._getOrReturnCtx(e,n),{validation:"email",code:tj.invalid_string,message:i.message}),t.dirty());else if("emoji"===i.kind)t4||(t4=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),t4.test(e.data)||(tz(n=this._getOrReturnCtx(e,n),{validation:"emoji",code:tj.invalid_string,message:i.message}),t.dirty());else if("uuid"===i.kind)t8.test(e.data)||(tz(n=this._getOrReturnCtx(e,n),{validation:"uuid",code:tj.invalid_string,message:i.message}),t.dirty());else if("cuid"===i.kind)t9.test(e.data)||(tz(n=this._getOrReturnCtx(e,n),{validation:"cuid",code:tj.invalid_string,message:i.message}),t.dirty());else if("cuid2"===i.kind)t6.test(e.data)||(tz(n=this._getOrReturnCtx(e,n),{validation:"cuid2",code:tj.invalid_string,message:i.message}),t.dirty());else if("ulid"===i.kind)t7.test(e.data)||(tz(n=this._getOrReturnCtx(e,n),{validation:"ulid",code:tj.invalid_string,message:i.message}),t.dirty());else if("url"===i.kind)try{new URL(e.data)}catch(r){tz(n=this._getOrReturnCtx(e,n),{validation:"url",code:tj.invalid_string,message:i.message}),t.dirty()}else{var r,a;"regex"===i.kind?(i.regex.lastIndex=0,i.regex.test(e.data)||(tz(n=this._getOrReturnCtx(e,n),{validation:"regex",code:tj.invalid_string,message:i.message}),t.dirty())):"trim"===i.kind?e.data=e.data.trim():"includes"===i.kind?e.data.includes(i.value,i.position)||(tz(n=this._getOrReturnCtx(e,n),{code:tj.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),t.dirty()):"toLowerCase"===i.kind?e.data=e.data.toLowerCase():"toUpperCase"===i.kind?e.data=e.data.toUpperCase():"startsWith"===i.kind?e.data.startsWith(i.value)||(tz(n=this._getOrReturnCtx(e,n),{code:tj.invalid_string,validation:{startsWith:i.value},message:i.message}),t.dirty()):"endsWith"===i.kind?e.data.endsWith(i.value)||(tz(n=this._getOrReturnCtx(e,n),{code:tj.invalid_string,validation:{endsWith:i.value},message:i.message}),t.dirty()):"datetime"===i.kind?nr(i).test(e.data)||(tz(n=this._getOrReturnCtx(e,n),{code:tj.invalid_string,validation:"datetime",message:i.message}),t.dirty()):"ip"===i.kind?(r=e.data,("v4"===(a=i.version)||!a)&&nt.test(r)||("v6"===a||!a)&&nn.test(r)||(tz(n=this._getOrReturnCtx(e,n),{validation:"ip",code:tj.invalid_string,message:i.message}),t.dirty())):tH.assertNever(i)}return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement(t=>e.test(t),(0,g.a)({validation:t,code:tj.invalid_string},tX.errToObj(n)))}_addCheck(e){return new na((0,g.b)((0,g.a)({},this._def),{checks:[...this._def.checks,e]}))}email(e){return this._addCheck((0,g.a)({kind:"email"},tX.errToObj(e)))}url(e){return this._addCheck((0,g.a)({kind:"url"},tX.errToObj(e)))}emoji(e){return this._addCheck((0,g.a)({kind:"emoji"},tX.errToObj(e)))}uuid(e){return this._addCheck((0,g.a)({kind:"uuid"},tX.errToObj(e)))}cuid(e){return this._addCheck((0,g.a)({kind:"cuid"},tX.errToObj(e)))}cuid2(e){return this._addCheck((0,g.a)({kind:"cuid2"},tX.errToObj(e)))}ulid(e){return this._addCheck((0,g.a)({kind:"ulid"},tX.errToObj(e)))}ip(e){return this._addCheck((0,g.a)({kind:"ip"},tX.errToObj(e)))}datetime(e){var t;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck((0,g.a)({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t},tX.errToObj(null==e?void 0:e.message)))}regex(e,t){return this._addCheck((0,g.a)({kind:"regex",regex:e},tX.errToObj(t)))}includes(e,t){return this._addCheck((0,g.a)({kind:"includes",value:e,position:null==t?void 0:t.position},tX.errToObj(null==t?void 0:t.message)))}startsWith(e,t){return this._addCheck((0,g.a)({kind:"startsWith",value:e},tX.errToObj(t)))}endsWith(e,t){return this._addCheck((0,g.a)({kind:"endsWith",value:e},tX.errToObj(t)))}min(e,t){return this._addCheck((0,g.a)({kind:"min",value:e},tX.errToObj(t)))}max(e,t){return this._addCheck((0,g.a)({kind:"max",value:e},tX.errToObj(t)))}length(e,t){return this._addCheck((0,g.a)({kind:"length",value:e},tX.errToObj(t)))}nonempty(e){return this.min(1,tX.errToObj(e))}trim(){return new na((0,g.b)((0,g.a)({},this._def),{checks:[...this._def.checks,{kind:"trim"}]}))}toLowerCase(){return new na((0,g.b)((0,g.a)({},this._def),{checks:[...this._def.checks,{kind:"toLowerCase"}]}))}toUpperCase(){return new na((0,g.b)((0,g.a)({},this._def),{checks:[...this._def.checks,{kind:"toUpperCase"}]}))}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}};na.create=e=>{var t;return new na((0,g.a)({checks:[],typeName:nH.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t},t2(e)))};var ni=class extends t3{_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==tA.number){let t=this._getOrReturnCtx(e);return tz(t,{code:tj.invalid_type,expected:tA.number,received:t.parsedType}),tW}let t,n=new tF;for(let r of this._def.checks)"int"===r.kind?tH.isInteger(e.data)||(tz(t=this._getOrReturnCtx(e,t),{code:tj.invalid_type,expected:"integer",received:"float",message:r.message}),n.dirty()):"min"===r.kind?(r.inclusive?e.data<r.value:e.data<=r.value)&&(tz(t=this._getOrReturnCtx(e,t),{code:tj.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty()):"max"===r.kind?(r.inclusive?e.data>r.value:e.data>=r.value)&&(tz(t=this._getOrReturnCtx(e,t),{code:tj.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty()):"multipleOf"===r.kind?0!==function(e,t){let n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r;return parseInt(e.toFixed(a).replace(".",""))%parseInt(t.toFixed(a).replace(".",""))/Math.pow(10,a)}(e.data,r.value)&&(tz(t=this._getOrReturnCtx(e,t),{code:tj.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(tz(t=this._getOrReturnCtx(e,t),{code:tj.not_finite,message:r.message}),n.dirty()):tH.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,tX.toString(t))}gt(e,t){return this.setLimit("min",e,!1,tX.toString(t))}lte(e,t){return this.setLimit("max",e,!0,tX.toString(t))}lt(e,t){return this.setLimit("max",e,!1,tX.toString(t))}setLimit(e,t,n,r){return new ni((0,g.b)((0,g.a)({},this._def),{checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:tX.toString(r)}]}))}_addCheck(e){return new ni((0,g.b)((0,g.a)({},this._def),{checks:[...this._def.checks,e]}))}int(e){return this._addCheck({kind:"int",message:tX.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:tX.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:tX.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:tX.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:tX.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:tX.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:tX.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:tX.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:tX.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&tH.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}};ni.create=e=>new ni((0,g.a)({checks:[],typeName:nH.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1},t2(e)));var no=class extends t3{_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==tA.bigint){let t=this._getOrReturnCtx(e);return tz(t,{code:tj.invalid_type,expected:tA.bigint,received:t.parsedType}),tW}let t,n=new tF;for(let r of this._def.checks)"min"===r.kind?(r.inclusive?e.data<r.value:e.data<=r.value)&&(tz(t=this._getOrReturnCtx(e,t),{code:tj.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty()):"max"===r.kind?(r.inclusive?e.data>r.value:e.data>=r.value)&&(tz(t=this._getOrReturnCtx(e,t),{code:tj.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty()):"multipleOf"===r.kind?e.data%r.value!==BigInt(0)&&(tz(t=this._getOrReturnCtx(e,t),{code:tj.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):tH.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,tX.toString(t))}gt(e,t){return this.setLimit("min",e,!1,tX.toString(t))}lte(e,t){return this.setLimit("max",e,!0,tX.toString(t))}lt(e,t){return this.setLimit("max",e,!1,tX.toString(t))}setLimit(e,t,n,r){return new no((0,g.b)((0,g.a)({},this._def),{checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:tX.toString(r)}]}))}_addCheck(e){return new no((0,g.b)((0,g.a)({},this._def),{checks:[...this._def.checks,e]}))}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:tX.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:tX.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:tX.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:tX.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:tX.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}};no.create=e=>{var t;return new no((0,g.a)({checks:[],typeName:nH.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t},t2(e)))};var ns=class extends t3{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==tA.boolean){let t=this._getOrReturnCtx(e);return tz(t,{code:tj.invalid_type,expected:tA.boolean,received:t.parsedType}),tW}return tY(e.data)}};ns.create=e=>new ns((0,g.a)({typeName:nH.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1},t2(e)));var nl=class extends t3{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==tA.date){let t=this._getOrReturnCtx(e);return tz(t,{code:tj.invalid_type,expected:tA.date,received:t.parsedType}),tW}if(isNaN(e.data.getTime()))return tz(this._getOrReturnCtx(e),{code:tj.invalid_date}),tW;let t=new tF,n;for(let r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(tz(n=this._getOrReturnCtx(e,n),{code:tj.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),t.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(tz(n=this._getOrReturnCtx(e,n),{code:tj.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),t.dirty()):tH.assertNever(r);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new nl((0,g.b)((0,g.a)({},this._def),{checks:[...this._def.checks,e]}))}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:tX.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:tX.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}};nl.create=e=>new nl((0,g.a)({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:nH.ZodDate},t2(e)));var nd=class extends t3{_parse(e){if(this._getType(e)!==tA.symbol){let t=this._getOrReturnCtx(e);return tz(t,{code:tj.invalid_type,expected:tA.symbol,received:t.parsedType}),tW}return tY(e.data)}};nd.create=e=>new nd((0,g.a)({typeName:nH.ZodSymbol},t2(e)));var nu=class extends t3{_parse(e){if(this._getType(e)!==tA.undefined){let t=this._getOrReturnCtx(e);return tz(t,{code:tj.invalid_type,expected:tA.undefined,received:t.parsedType}),tW}return tY(e.data)}};nu.create=e=>new nu((0,g.a)({typeName:nH.ZodUndefined},t2(e)));var nc=class extends t3{_parse(e){if(this._getType(e)!==tA.null){let t=this._getOrReturnCtx(e);return tz(t,{code:tj.invalid_type,expected:tA.null,received:t.parsedType}),tW}return tY(e.data)}};nc.create=e=>new nc((0,g.a)({typeName:nH.ZodNull},t2(e)));var np=class extends t3{_parse(e){return tY(e.data)}constructor(){super(...arguments),this._any=!0}};np.create=e=>new np((0,g.a)({typeName:nH.ZodAny},t2(e)));var nh=class extends t3{_parse(e){return tY(e.data)}constructor(){super(...arguments),this._unknown=!0}};nh.create=e=>new nh((0,g.a)({typeName:nH.ZodUnknown},t2(e)));var nm=class extends t3{_parse(e){let t=this._getOrReturnCtx(e);return tz(t,{code:tj.invalid_type,expected:tA.never,received:t.parsedType}),tW}};nm.create=e=>new nm((0,g.a)({typeName:nH.ZodNever},t2(e)));var ng=class extends t3{_parse(e){if(this._getType(e)!==tA.undefined){let t=this._getOrReturnCtx(e);return tz(t,{code:tj.invalid_type,expected:tA.void,received:t.parsedType}),tW}return tY(e.data)}};ng.create=e=>new ng((0,g.a)({typeName:nH.ZodVoid},t2(e)));var nf=class extends t3{_parse(e){let{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==tA.array)return tz(t,{code:tj.invalid_type,expected:tA.array,received:t.parsedType}),tW;if(null!==r.exactLength){let e=t.data.length>r.exactLength.value,a=t.data.length<r.exactLength.value;(e||a)&&(tz(t,{code:e?tj.too_big:tj.too_small,minimum:a?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(tz(t,{code:tj.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(tz(t,{code:tj.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((e,n)=>r.type._parseAsync(new t0(t,e,t.path,n)))).then(e=>tF.mergeArray(n,e));let a=[...t.data].map((e,n)=>r.type._parseSync(new t0(t,e,t.path,n)));return tF.mergeArray(n,a)}get element(){return this._def.type}min(e,t){return new nf((0,g.b)((0,g.a)({},this._def),{minLength:{value:e,message:tX.toString(t)}}))}max(e,t){return new nf((0,g.b)((0,g.a)({},this._def),{maxLength:{value:e,message:tX.toString(t)}}))}length(e,t){return new nf((0,g.b)((0,g.a)({},this._def),{exactLength:{value:e,message:tX.toString(t)}}))}nonempty(e){return this.min(1,e)}};nf.create=(e,t)=>new nf((0,g.a)({type:e,minLength:null,maxLength:null,exactLength:null,typeName:nH.ZodArray},t2(t)));var nb=class extends t3{_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=tH.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==tA.object){let t=this._getOrReturnCtx(e);return tz(t,{code:tj.invalid_type,expected:tA.object,received:t.parsedType}),tW}let{status:t,ctx:n}=this._processInputParams(e),{shape:r,keys:a}=this._getCached(),i=[];if(!(this._def.catchall instanceof nm&&"strip"===this._def.unknownKeys))for(let e in n.data)a.includes(e)||i.push(e);let o=[];for(let e of a){let t=r[e],a=n.data[e];o.push({key:{status:"valid",value:e},value:t._parse(new t0(n,a,n.path,e)),alwaysSet:e in n.data})}if(this._def.catchall instanceof nm){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of i)o.push({key:{status:"valid",value:e},value:{status:"valid",value:n.data[e]}});else if("strict"===e)i.length>0&&(tz(n,{code:tj.unrecognized_keys,keys:i}),t.dirty());else if("strip"!==e)throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of i){let r=n.data[t];o.push({key:{status:"valid",value:t},value:e._parse(new t0(n,r,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then(()=>(0,g.d)(this,null,function*(){let e=[];for(let t of o){let n=yield t.key;e.push({key:n,value:yield t.value,alwaysSet:t.alwaysSet})}return e})).then(e=>tF.mergeObjectSync(t,e)):tF.mergeObjectSync(t,o)}get shape(){return this._def.shape()}strict(e){return tX.errToObj,new nb((0,g.a)((0,g.b)((0,g.a)({},this._def),{unknownKeys:"strict"}),void 0!==e?{errorMap:(t,n)=>{var r,a,i,o;let s=null!==(i=null===(a=(r=this._def).errorMap)||void 0===a?void 0:a.call(r,t,n).message)&&void 0!==i?i:n.defaultError;return"unrecognized_keys"===t.code?{message:null!==(o=tX.errToObj(e).message)&&void 0!==o?o:s}:{message:s}}}:{}))}strip(){return new nb((0,g.b)((0,g.a)({},this._def),{unknownKeys:"strip"}))}passthrough(){return new nb((0,g.b)((0,g.a)({},this._def),{unknownKeys:"passthrough"}))}extend(e){return new nb((0,g.b)((0,g.a)({},this._def),{shape:()=>(0,g.a)((0,g.a)({},this._def.shape()),e)}))}merge(e){return new nb({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>(0,g.a)((0,g.a)({},this._def.shape()),e._def.shape()),typeName:nH.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new nb((0,g.b)((0,g.a)({},this._def),{catchall:e}))}pick(e){let t={};return tH.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new nb((0,g.b)((0,g.a)({},this._def),{shape:()=>t}))}omit(e){let t={};return tH.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new nb((0,g.b)((0,g.a)({},this._def),{shape:()=>t}))}deepPartial(){return function e(t){if(!(t instanceof nb))return t instanceof nf?new nf((0,g.b)((0,g.a)({},t._def),{type:e(t.element)})):t instanceof nO?nO.create(e(t.unwrap())):t instanceof nj?nj.create(e(t.unwrap())):t instanceof nx?nx.create(t.items.map(t=>e(t))):t;{let n={};for(let r in t.shape){let a=t.shape[r];n[r]=nO.create(e(a))}return new nb((0,g.b)((0,g.a)({},t._def),{shape:()=>n}))}}(this)}partial(e){let t={};return tH.objectKeys(this.shape).forEach(n=>{let r=this.shape[n];e&&!e[n]?t[n]=r:t[n]=r.optional()}),new nb((0,g.b)((0,g.a)({},this._def),{shape:()=>t}))}required(e){let t={};return tH.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof nO;)e=e._def.innerType;t[n]=e}}),new nb((0,g.b)((0,g.a)({},this._def),{shape:()=>t}))}keyof(){return nP(tH.objectKeys(this.shape))}constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}};nb.create=(e,t)=>new nb((0,g.a)({shape:()=>e,unknownKeys:"strip",catchall:nm.create(),typeName:nH.ZodObject},t2(t))),nb.strictCreate=(e,t)=>new nb((0,g.a)({shape:()=>e,unknownKeys:"strict",catchall:nm.create(),typeName:nH.ZodObject},t2(t))),nb.lazycreate=(e,t)=>new nb((0,g.a)({shape:e,unknownKeys:"strip",catchall:nm.create(),typeName:nH.ZodObject},t2(t)));var nv=class extends t3{_parse(e){let{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map(e=>(0,g.d)(this,null,function*(){let n=(0,g.b)((0,g.a)({},t),{common:(0,g.b)((0,g.a)({},t.common),{issues:[]}),parent:null});return{result:yield e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}}))).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;let n=e.map(e=>new tU(e.ctx.common.issues));return tz(t,{code:tj.invalid_union,unionErrors:n}),tW});{let e,r=[];for(let a of n){let n=(0,g.b)((0,g.a)({},t),{common:(0,g.b)((0,g.a)({},t.common),{issues:[]}),parent:null}),i=a._parseSync({data:t.data,path:t.path,parent:n});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let a=r.map(e=>new tU(e));return tz(t,{code:tj.invalid_union,unionErrors:a}),tW}}get options(){return this._def.options}};nv.create=(e,t)=>new nv((0,g.a)({options:e,typeName:nH.ZodUnion},t2(t)));var ny=e=>e instanceof nS?ny(e.schema):e instanceof nA?ny(e.innerType()):e instanceof nN?[e.value]:e instanceof nk?e.options:e instanceof nR?Object.keys(e.enum):e instanceof nU?ny(e._def.innerType):e instanceof nu?[void 0]:e instanceof nc?[null]:null,n_=class extends t3{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==tA.object)return tz(t,{code:tj.invalid_type,expected:tA.object,received:t.parsedType}),tW;let n=this.discriminator,r=t.data[n],a=this.optionsMap.get(r);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(tz(t,{code:tj.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),tW)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){let r=new Map;for(let n of t){let t=ny(n.shape[e]);if(!t)throw Error("A discriminator value for key `".concat(e,"` could not be extracted from all schema options"));for(let a of t){if(r.has(a))throw Error("Discriminator property ".concat(String(e)," has duplicate value ").concat(String(a)));r.set(a,n)}}return new n_((0,g.a)({typeName:nH.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r},t2(n)))}},nE=class extends t3{_parse(e){let{status:t,ctx:n}=this._processInputParams(e),r=(e,r)=>{if(tJ(e)||tJ(r))return tW;let a=function e(t,n){let r=tO(t),a=tO(n);if(t===n)return{valid:!0,data:t};if(r===tA.object&&a===tA.object){let r=tH.objectKeys(n),a=tH.objectKeys(t).filter(e=>-1!==r.indexOf(e)),i=(0,g.a)((0,g.a)({},t),n);for(let r of a){let a=e(t[r],n[r]);if(!a.valid)return{valid:!1};i[r]=a.data}return{valid:!0,data:i}}if(r!==tA.array||a!==tA.array)return r===tA.date&&a===tA.date&&+t==+n?{valid:!0,data:t}:{valid:!1};{if(t.length!==n.length)return{valid:!1};let r=[];for(let a=0;a<t.length;a++){let i=e(t[a],n[a]);if(!i.valid)return{valid:!1};r.push(i.data)}return{valid:!0,data:r}}}(e.value,r.value);return a.valid?((tq(e)||tq(r))&&t.dirty(),{status:t.value,value:a.data}):(tz(n,{code:tj.invalid_intersection_types}),tW)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(e=>{let[t,n]=e;return r(t,n)}):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};nE.create=(e,t,n)=>new nE((0,g.a)({left:e,right:t,typeName:nH.ZodIntersection},t2(n)));var nx=class extends t3{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==tA.array)return tz(n,{code:tj.invalid_type,expected:tA.array,received:n.parsedType}),tW;if(n.data.length<this._def.items.length)return tz(n,{code:tj.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),tW;!this._def.rest&&n.data.length>this._def.items.length&&(tz(n,{code:tj.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let r=[...n.data].map((e,t)=>{let r=this._def.items[t]||this._def.rest;return r?r._parse(new t0(n,e,n.path,t)):null}).filter(e=>!!e);return n.common.async?Promise.all(r).then(e=>tF.mergeArray(t,e)):tF.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new nx((0,g.b)((0,g.a)({},this._def),{rest:e}))}};nx.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new nx((0,g.a)({items:e,typeName:nH.ZodTuple,rest:null},t2(t)))};var nw=class extends t3{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==tA.object)return tz(n,{code:tj.invalid_type,expected:tA.object,received:n.parsedType}),tW;let r=[],a=this._def.keyType,i=this._def.valueType;for(let e in n.data)r.push({key:a._parse(new t0(n,e,n.path,e)),value:i._parse(new t0(n,n.data[e],n.path,e))});return n.common.async?tF.mergeObjectAsync(t,r):tF.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,n){return new nw(t instanceof t3?(0,g.a)({keyType:e,valueType:t,typeName:nH.ZodRecord},t2(n)):(0,g.a)({keyType:na.create(),valueType:e,typeName:nH.ZodRecord},t2(t)))}},nI=class extends t3{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==tA.map)return tz(n,{code:tj.invalid_type,expected:tA.map,received:n.parsedType}),tW;let r=this._def.keyType,a=this._def.valueType,i=[...n.data.entries()].map((e,t)=>{let[i,o]=e;return{key:r._parse(new t0(n,i,n.path,[t,"key"])),value:a._parse(new t0(n,o,n.path,[t,"value"]))}});if(n.common.async){let e=new Map;return Promise.resolve().then(()=>(0,g.d)(this,null,function*(){for(let n of i){let r=yield n.key,a=yield n.value;if("aborted"===r.status||"aborted"===a.status)return tW;("dirty"===r.status||"dirty"===a.status)&&t.dirty(),e.set(r.value,a.value)}return{status:t.value,value:e}}))}{let e=new Map;for(let n of i){let r=n.key,a=n.value;if("aborted"===r.status||"aborted"===a.status)return tW;("dirty"===r.status||"dirty"===a.status)&&t.dirty(),e.set(r.value,a.value)}return{status:t.value,value:e}}}};nI.create=(e,t,n)=>new nI((0,g.a)({valueType:t,keyType:e,typeName:nH.ZodMap},t2(n)));var nT=class extends t3{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==tA.set)return tz(n,{code:tj.invalid_type,expected:tA.set,received:n.parsedType}),tW;let r=this._def;null!==r.minSize&&n.data.size<r.minSize.value&&(tz(n,{code:tj.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&n.data.size>r.maxSize.value&&(tz(n,{code:tj.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());let a=this._def.valueType;function i(e){let n=new Set;for(let r of e){if("aborted"===r.status)return tW;"dirty"===r.status&&t.dirty(),n.add(r.value)}return{status:t.value,value:n}}let o=[...n.data.values()].map((e,t)=>a._parse(new t0(n,e,n.path,t)));return n.common.async?Promise.all(o).then(e=>i(e)):i(o)}min(e,t){return new nT((0,g.b)((0,g.a)({},this._def),{minSize:{value:e,message:tX.toString(t)}}))}max(e,t){return new nT((0,g.b)((0,g.a)({},this._def),{maxSize:{value:e,message:tX.toString(t)}}))}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};nT.create=(e,t)=>new nT((0,g.a)({valueType:e,minSize:null,maxSize:null,typeName:nH.ZodSet},t2(t)));var nC=class extends t3{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==tA.function)return tz(t,{code:tj.invalid_type,expected:tA.function,received:t.parsedType}),tW;function n(e,n){return tD({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,tV(),tB].filter(e=>!!e),issueData:{code:tj.invalid_arguments,argumentsError:n}})}function r(e,n){return tD({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,tV(),tB].filter(e=>!!e),issueData:{code:tj.invalid_return_type,returnTypeError:n}})}let a={errorMap:t.common.contextualErrorMap},i=t.data;if(this._def.returns instanceof nL){let e=this;return tY(function(){for(var t=arguments.length,o=Array(t),s=0;s<t;s++)o[s]=arguments[s];return(0,g.d)(this,null,function*(){let t=new tU([]),s=yield e._def.args.parseAsync(o,a).catch(e=>{throw t.addIssue(n(o,e)),t}),l=yield Reflect.apply(i,this,s);return yield e._def.returns._def.type.parseAsync(l,a).catch(e=>{throw t.addIssue(r(l,e)),t})})})}{let e=this;return tY(function(){for(var t=arguments.length,o=Array(t),s=0;s<t;s++)o[s]=arguments[s];let l=e._def.args.safeParse(o,a);if(!l.success)throw new tU([n(o,l.error)]);let d=Reflect.apply(i,this,l.data),u=e._def.returns.safeParse(d,a);if(!u.success)throw new tU([r(d,u.error)]);return u.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new nC((0,g.b)((0,g.a)({},this._def),{args:nx.create(t).rest(nh.create())}))}returns(e){return new nC((0,g.b)((0,g.a)({},this._def),{returns:e}))}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new nC((0,g.a)({args:e||nx.create([]).rest(nh.create()),returns:t||nh.create(),typeName:nH.ZodFunction},t2(n)))}constructor(){super(...arguments),this.validate=this.implement}},nS=class extends t3{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}};nS.create=(e,t)=>new nS((0,g.a)({getter:e,typeName:nH.ZodLazy},t2(t)));var nN=class extends t3{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return tz(t,{received:t.data,code:tj.invalid_literal,expected:this._def.value}),tW}return{status:"valid",value:e.data}}get value(){return this._def.value}};function nP(e,t){return new nk((0,g.a)({values:e,typeName:nH.ZodEnum},t2(t)))}nN.create=(e,t)=>new nN((0,g.a)({value:e,typeName:nH.ZodLiteral},t2(t)));var nk=class extends t3{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),n=this._def.values;return tz(t,{expected:tH.joinValues(n),received:t.parsedType,code:tj.invalid_type}),tW}if(-1===this._def.values.indexOf(e.data)){let t=this._getOrReturnCtx(e),n=this._def.values;return tz(t,{received:t.data,code:tj.invalid_enum_value,options:n}),tW}return tY(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e){return nk.create(e)}exclude(e){return nk.create(this.options.filter(t=>!e.includes(t)))}};nk.create=nP;var nR=class extends t3{_parse(e){let t=tH.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==tA.string&&n.parsedType!==tA.number){let e=tH.objectValues(t);return tz(n,{expected:tH.joinValues(e),received:n.parsedType,code:tj.invalid_type}),tW}if(-1===t.indexOf(e.data)){let e=tH.objectValues(t);return tz(n,{received:n.data,code:tj.invalid_enum_value,options:e}),tW}return tY(e.data)}get enum(){return this._def.values}};nR.create=(e,t)=>new nR((0,g.a)({values:e,typeName:nH.ZodNativeEnum},t2(t)));var nL=class extends t3{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==tA.promise&&!1===t.common.async?(tz(t,{code:tj.invalid_type,expected:tA.promise,received:t.parsedType}),tW):tY((t.parsedType===tA.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}};nL.create=(e,t)=>new nL((0,g.a)({type:e,typeName:nH.ZodPromise},t2(t)));var nA=class extends t3{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===nH.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null,a={addIssue:e=>{tz(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),"preprocess"===r.type){let e=r.transform(n.data,a);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(e).then(e=>this._def.schema._parseAsync({data:e,path:n.path,parent:n})):this._def.schema._parseSync({data:e,path:n.path,parent:n})}if("refinement"===r.type){let e=e=>{let t=r.refinement(e,a);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==n.common.async)return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(n=>"aborted"===n.status?tW:("dirty"===n.status&&t.dirty(),e(n.value).then(()=>({status:t.value,value:n.value}))));{let r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===r.status?tW:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}}if("transform"===r.type){if(!1!==n.common.async)return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(e=>t$(e)?Promise.resolve(r.transform(e.value,a)).then(e=>({status:t.value,value:e})):e);{let e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!t$(e))return e;let i=r.transform(e.value,a);if(i instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:i}}}tH.assertNever(r)}};nA.create=(e,t,n)=>new nA((0,g.a)({schema:e,typeName:nH.ZodEffects,effect:t},t2(n))),nA.createWithPreprocess=(e,t,n)=>new nA((0,g.a)({schema:t,effect:{type:"preprocess",transform:e},typeName:nH.ZodEffects},t2(n)));var nO=class extends t3{_parse(e){return this._getType(e)===tA.undefined?tY(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};nO.create=(e,t)=>new nO((0,g.a)({innerType:e,typeName:nH.ZodOptional},t2(t)));var nj=class extends t3{_parse(e){return this._getType(e)===tA.null?tY(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};nj.create=(e,t)=>new nj((0,g.a)({innerType:e,typeName:nH.ZodNullable},t2(t)));var nU=class extends t3{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return t.parsedType===tA.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}};nU.create=(e,t)=>new nU((0,g.a)({innerType:e,typeName:nH.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default},t2(t)));var nB=class extends t3{_parse(e){let{ctx:t}=this._processInputParams(e),n=(0,g.b)((0,g.a)({},t),{common:(0,g.b)((0,g.a)({},t.common),{issues:[]})}),r=this._def.innerType._parse({data:n.data,path:n.path,parent:(0,g.a)({},n)});return tQ(r)?r.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new tU(n.common.issues)},input:n.data})})):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new tU(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};nB.create=(e,t)=>new nB((0,g.a)({innerType:e,typeName:nH.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch},t2(t)));var nM=class extends t3{_parse(e){if(this._getType(e)!==tA.nan){let t=this._getOrReturnCtx(e);return tz(t,{code:tj.invalid_type,expected:tA.nan,received:t.parsedType}),tW}return{status:"valid",value:e.data}}};nM.create=e=>new nM((0,g.a)({typeName:nH.ZodNaN},t2(e)));var nV=Symbol("zod_brand"),nD=class extends t3{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}},nz=class extends t3{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(0,g.d)(this,null,function*(){let e=yield this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?tW:"dirty"===e.status?(t.dirty(),tK(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})});{let e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?tW:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new nz({in:e,out:t,typeName:nH.ZodPipeline})}},nZ=class extends t3{_parse(e){let t=this._def.innerType._parse(e);return t$(t)&&(t.value=Object.freeze(t.value)),t}};nZ.create=(e,t)=>new nZ((0,g.a)({innerType:e,typeName:nH.ZodReadonly},t2(t)));var nH,nG=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return e?np.create().superRefine((r,a)=>{var i,o;if(!e(r)){let e="function"==typeof t?t(r):"string"==typeof t?{message:t}:t,s=null===(o=null!==(i=e.fatal)&&void 0!==i?i:n)||void 0===o||o;a.addIssue((0,g.b)((0,g.a)({code:"custom"},"string"==typeof e?{message:e}:e),{fatal:s}))}}):np.create()},nX={object:nb.lazycreate};(s=nH||(nH={})).ZodString="ZodString",s.ZodNumber="ZodNumber",s.ZodNaN="ZodNaN",s.ZodBigInt="ZodBigInt",s.ZodBoolean="ZodBoolean",s.ZodDate="ZodDate",s.ZodSymbol="ZodSymbol",s.ZodUndefined="ZodUndefined",s.ZodNull="ZodNull",s.ZodAny="ZodAny",s.ZodUnknown="ZodUnknown",s.ZodNever="ZodNever",s.ZodVoid="ZodVoid",s.ZodArray="ZodArray",s.ZodObject="ZodObject",s.ZodUnion="ZodUnion",s.ZodDiscriminatedUnion="ZodDiscriminatedUnion",s.ZodIntersection="ZodIntersection",s.ZodTuple="ZodTuple",s.ZodRecord="ZodRecord",s.ZodMap="ZodMap",s.ZodSet="ZodSet",s.ZodFunction="ZodFunction",s.ZodLazy="ZodLazy",s.ZodLiteral="ZodLiteral",s.ZodEnum="ZodEnum",s.ZodEffects="ZodEffects",s.ZodNativeEnum="ZodNativeEnum",s.ZodOptional="ZodOptional",s.ZodNullable="ZodNullable",s.ZodDefault="ZodDefault",s.ZodCatch="ZodCatch",s.ZodPromise="ZodPromise",s.ZodBranded="ZodBranded",s.ZodPipeline="ZodPipeline",s.ZodReadonly="ZodReadonly";var nF=na.create,nW=ni.create,nK=nM.create,nY=no.create,nJ=ns.create,nq=nl.create,n$=nd.create,nQ=nu.create,n0=nc.create,n1=np.create,n2=nh.create,n5=nm.create,n4=ng.create,n3=nf.create,n9=nb.create,n6=nb.strictCreate,n7=nv.create,n8=n_.create,re=nE.create,rt=nx.create,rn=nw.create,rr=nI.create,ra=nT.create,ri=nC.create,ro=nS.create,rs=nN.create,rl=nk.create,rd=nR.create,ru=nL.create,rc=nA.create,rp=nO.create,rh=nj.create,rm=nA.createWithPreprocess,rg=nz.create,rf=Object.freeze({__proto__:null,defaultErrorMap:tB,setErrorMap:function(e){tM=e},getErrorMap:tV,makeIssue:tD,EMPTY_PATH:[],addIssueToContext:tz,ParseStatus:tF,INVALID:tW,DIRTY:tK,OK:tY,isAborted:tJ,isDirty:tq,isValid:t$,isAsync:tQ,get util(){return tH},get objectUtil(){return tG},ZodParsedType:tA,getParsedType:tO,ZodType:t3,ZodString:na,ZodNumber:ni,ZodBigInt:no,ZodBoolean:ns,ZodDate:nl,ZodSymbol:nd,ZodUndefined:nu,ZodNull:nc,ZodAny:np,ZodUnknown:nh,ZodNever:nm,ZodVoid:ng,ZodArray:nf,ZodObject:nb,ZodUnion:nv,ZodDiscriminatedUnion:n_,ZodIntersection:nE,ZodTuple:nx,ZodRecord:nw,ZodMap:nI,ZodSet:nT,ZodFunction:nC,ZodLazy:nS,ZodLiteral:nN,ZodEnum:nk,ZodNativeEnum:nR,ZodPromise:nL,ZodEffects:nA,ZodTransformer:nA,ZodOptional:nO,ZodNullable:nj,ZodDefault:nU,ZodCatch:nB,ZodNaN:nM,BRAND:nV,ZodBranded:nD,ZodPipeline:nz,ZodReadonly:nZ,custom:nG,Schema:t3,ZodSchema:t3,late:nX,get ZodFirstPartyTypeKind(){return nH},coerce:{string:e=>na.create((0,g.b)((0,g.a)({},e),{coerce:!0})),number:e=>ni.create((0,g.b)((0,g.a)({},e),{coerce:!0})),boolean:e=>ns.create((0,g.b)((0,g.a)({},e),{coerce:!0})),bigint:e=>no.create((0,g.b)((0,g.a)({},e),{coerce:!0})),date:e=>nl.create((0,g.b)((0,g.a)({},e),{coerce:!0}))},any:n1,array:n3,bigint:nY,boolean:nJ,date:nq,discriminatedUnion:n8,effect:rc,enum:rl,function:ri,instanceof:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{message:"Input not instance of ".concat(e.name)};return nG(t=>t instanceof e,t)},intersection:re,lazy:ro,literal:rs,map:rr,nan:nK,nativeEnum:rd,never:n5,null:n0,nullable:rh,number:nW,object:n9,oboolean:()=>nJ().optional(),onumber:()=>nW().optional(),optional:rp,ostring:()=>nF().optional(),pipeline:rg,preprocess:rm,promise:ru,record:rn,set:ra,strictObject:n6,string:nF,symbol:n$,transformer:rc,tuple:rt,undefined:nQ,union:n7,unknown:n2,void:n4,NEVER:tW,ZodIssueCode:tj,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:tU}),rb=(e,t)=>{var n;return window.__ENV?null!=(n=window.__ENV[e])?n:t:void 0},rv=rf.enum(["true","false"]).transform(e=>"true"===e),ry={server:{NODE_ENV:rf.enum(["development","production","test"]).optional(),DATABASE_URL:rf.string().url().refine(e=>e.startsWith("postgres")||e.startsWith("mysql")),ENCRYPTION_SECRET:rf.string().length(32),NEXTAUTH_URL:rf.preprocess(e=>e&&"string"==typeof e&&e.length>0||"preview"!==I.env.VERCEL_ENV||!I.env.VERCEL_BUILDER_PROJECT_NAME||!I.env.NEXT_PUBLIC_VERCEL_VIEWER_PROJECT_NAME?e:I.env.VERCEL_BRANCH_URL.includes(I.env.VERCEL_BUILDER_PROJECT_NAME)?"https://".concat(I.env.VERCEL_BRANCH_URL):"https://".concat(I.env.VERCEL_BRANCH_URL).replace(I.env.NEXT_PUBLIC_VERCEL_VIEWER_PROJECT_NAME,I.env.VERCEL_BUILDER_PROJECT_NAME),rf.string().url()),DISABLE_SIGNUP:rv.optional().default("false"),ADMIN_EMAIL:rf.string().min(1).optional().transform(e=>null==e?void 0:e.split(",")),DEFAULT_WORKSPACE_PLAN:rf.enum(["FREE","STARTER","PRO","LIFETIME","UNLIMITED"]).refine(e=>["FREE","STARTER","PRO","LIFETIME","UNLIMITED"].includes(e)).default("FREE"),DEBUG:rv.optional().default("false"),CHAT_API_TIMEOUT:rf.coerce.number().optional(),RADAR_HIGH_RISK_KEYWORDS:rf.string().min(1).transform(e=>e.split(",")).optional(),RADAR_INTERMEDIATE_RISK_KEYWORDS:rf.string().min(1).transform(e=>e.split(",")).optional(),RADAR_CUMULATIVE_KEYWORDS:rf.string().min(1).transform(e=>e.split("/").map(e=>e.split(",").map(e=>e.split("|")))).optional()},client:{NEXT_PUBLIC_E2E_TEST:rv.optional(),NEXT_PUBLIC_VIEWER_URL:rf.preprocess(e=>e&&"string"==typeof e&&e.length>0||"preview"!==I.env.VERCEL_ENV||!I.env.VERCEL_BUILDER_PROJECT_NAME||!I.env.NEXT_PUBLIC_VERCEL_VIEWER_PROJECT_NAME?e:I.env.VERCEL_BRANCH_URL.includes(I.env.NEXT_PUBLIC_VERCEL_VIEWER_PROJECT_NAME)?"https://".concat(I.env.VERCEL_BRANCH_URL):"https://".concat(I.env.VERCEL_BRANCH_URL).replace(I.env.VERCEL_BUILDER_PROJECT_NAME,I.env.NEXT_PUBLIC_VERCEL_VIEWER_PROJECT_NAME),rf.string().min(1).transform(e=>e.split(","))),NEXT_PUBLIC_ONBOARDING_TYPEBOT_ID:rf.string().min(1).optional(),NEXT_PUBLIC_BOT_FILE_UPLOAD_MAX_SIZE:rf.coerce.number().optional()},runtimeEnv:{NEXT_PUBLIC_E2E_TEST:rb("NEXT_PUBLIC_E2E_TEST"),NEXT_PUBLIC_VIEWER_URL:rb("NEXT_PUBLIC_VIEWER_URL"),NEXT_PUBLIC_ONBOARDING_TYPEBOT_ID:rb("NEXT_PUBLIC_ONBOARDING_TYPEBOT_ID"),NEXT_PUBLIC_BOT_FILE_UPLOAD_MAX_SIZE:rb("NEXT_PUBLIC_BOT_FILE_UPLOAD_MAX_SIZE")}},r_={server:{GITHUB_CLIENT_ID:rf.string().min(1).optional(),GITHUB_CLIENT_SECRET:rf.string().min(1).optional()}},rE={server:{FACEBOOK_CLIENT_ID:rf.string().min(1).optional(),FACEBOOK_CLIENT_SECRET:rf.string().min(1).optional()}},rx={server:{SMTP_USERNAME:rf.string().min(1).optional(),SMTP_PASSWORD:rf.string().min(1).optional(),SMTP_HOST:rf.string().min(1).optional(),SMTP_PORT:rf.coerce.number().optional().default(25),SMTP_AUTH_DISABLED:rv.optional().default("false"),SMTP_SECURE:rv.optional().default("false")},client:{NEXT_PUBLIC_SMTP_FROM:rf.string().min(1).optional()},runtimeEnv:{NEXT_PUBLIC_SMTP_FROM:rb("NEXT_PUBLIC_SMTP_FROM")}},rw={server:{GITLAB_CLIENT_ID:rf.string().min(1).optional(),GITLAB_CLIENT_SECRET:rf.string().min(1).optional(),GITLAB_BASE_URL:rf.string().url().optional().default("https://gitlab.com"),GITLAB_NAME:rf.string().min(1).optional().default("GitLab"),GITLAB_REQUIRED_GROUPS:rf.string().transform(e=>e?e.split(","):void 0).optional()}},rI={server:{AZURE_AD_CLIENT_ID:rf.string().min(1).optional(),AZURE_AD_CLIENT_SECRET:rf.string().min(1).optional(),AZURE_AD_TENANT_ID:rf.string().min(1).optional()}},rT={server:{CUSTOM_OAUTH_NAME:rf.string().min(1).optional().default("Custom OAuth"),CUSTOM_OAUTH_SCOPE:rf.string().min(1).optional().default("openid profile email"),CUSTOM_OAUTH_CLIENT_ID:rf.string().min(1).optional(),CUSTOM_OAUTH_CLIENT_SECRET:rf.string().min(1).optional(),CUSTOM_OAUTH_WELL_KNOWN_URL:rf.string().url().optional(),CUSTOM_OAUTH_USER_ID_PATH:rf.string().min(1).optional().default("id"),CUSTOM_OAUTH_USER_EMAIL_PATH:rf.string().min(1).optional().default("email"),CUSTOM_OAUTH_USER_NAME_PATH:rf.string().min(1).optional().default("name"),CUSTOM_OAUTH_USER_IMAGE_PATH:rf.string().min(1).optional().default("image")}},rC={server:{GOOGLE_CLIENT_ID:rf.string().min(1).optional(),GOOGLE_CLIENT_SECRET:rf.string().min(1).optional()},client:{NEXT_PUBLIC_GOOGLE_API_KEY:rf.string().min(1).optional()},runtimeEnv:{NEXT_PUBLIC_GOOGLE_API_KEY:rb("NEXT_PUBLIC_GOOGLE_API_KEY")}},rS={server:{STRIPE_SECRET_KEY:rf.string().min(1).optional(),STRIPE_WEBHOOK_SECRET:rf.string().min(1).optional(),STRIPE_STARTER_PRICE_ID:rf.string().min(1).optional(),STRIPE_STARTER_CHATS_PRICE_ID:rf.string().min(1).optional(),STRIPE_PRO_PRICE_ID:rf.string().min(1).optional(),STRIPE_PRO_CHATS_PRICE_ID:rf.string().min(1).optional()},client:{NEXT_PUBLIC_STRIPE_PUBLIC_KEY:rf.string().min(1).optional()},runtimeEnv:{NEXT_PUBLIC_STRIPE_PUBLIC_KEY:rb("NEXT_PUBLIC_STRIPE_PUBLIC_KEY")}},rN={server:{S3_ACCESS_KEY:rf.string().min(1).optional(),S3_SECRET_KEY:rf.string().min(1).optional(),S3_BUCKET:rf.string().min(1).optional().default("typebot"),S3_PORT:rf.coerce.number().optional(),S3_ENDPOINT:rf.string().min(1).optional(),S3_SSL:rv.optional().default("true"),S3_REGION:rf.string().min(1).optional(),S3_PUBLIC_CUSTOM_DOMAIN:rf.string().url().optional()}},rP={client:{NEXT_PUBLIC_GIPHY_API_KEY:rf.string().min(1).optional()},runtimeEnv:{NEXT_PUBLIC_GIPHY_API_KEY:rb("NEXT_PUBLIC_GIPHY_API_KEY")}},rk={server:{VERCEL_TOKEN:rf.string().min(1).optional(),VERCEL_TEAM_ID:rf.string().min(1).optional(),VERCEL_GIT_COMMIT_SHA:rf.string().min(1).optional(),VERCEL_BUILDER_PROJECT_NAME:rf.string().min(1).optional()},client:{NEXT_PUBLIC_VERCEL_VIEWER_PROJECT_NAME:rf.string().min(1).optional(),NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA:rf.string().min(1).optional(),NEXT_PUBLIC_VERCEL_ENV:rf.string().min(1).optional()},runtimeEnv:{NEXT_PUBLIC_VERCEL_VIEWER_PROJECT_NAME:rb("NEXT_PUBLIC_VERCEL_VIEWER_PROJECT_NAME"),NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA:rb("NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA"),NEXT_PUBLIC_VERCEL_ENV:rb("NEXT_PUBLIC_VERCEL_ENV")}},rR={server:{SLEEKPLAN_SSO_KEY:rf.string().min(1).optional()}},rL={client:{NEXT_PUBLIC_UNSPLASH_APP_NAME:rf.string().min(1).optional(),NEXT_PUBLIC_UNSPLASH_ACCESS_KEY:rf.string().min(1).optional()},runtimeEnv:{NEXT_PUBLIC_UNSPLASH_APP_NAME:rb("NEXT_PUBLIC_UNSPLASH_APP_NAME"),NEXT_PUBLIC_UNSPLASH_ACCESS_KEY:rb("NEXT_PUBLIC_UNSPLASH_ACCESS_KEY")}},rA={server:{META_SYSTEM_USER_TOKEN:rf.string().min(1).optional(),WHATSAPP_PREVIEW_FROM_PHONE_NUMBER_ID:rf.string().min(1).optional(),WHATSAPP_PREVIEW_TEMPLATE_NAME:rf.string().min(1).optional(),WHATSAPP_PREVIEW_TEMPLATE_LANG:rf.string().min(1).optional().default("en"),WHATSAPP_CLOUD_API_URL:rf.string().url().optional().default("https://graph.facebook.com")}},rO={server:{UPSTASH_REDIS_REST_URL:rf.string().url().optional(),UPSTASH_REDIS_REST_TOKEN:rf.string().min(1).optional()}},rj={client:{NEXT_PUBLIC_SENTRY_DSN:rf.string().min(1).optional()},server:{SENTRY_AUTH_TOKEN:rf.string().min(1).optional(),SENTRY_PROJECT:rf.string().min(1).optional(),SENTRY_ORG:rf.string().min(1).optional()},runtimeEnv:{NEXT_PUBLIC_SENTRY_DSN:rb("NEXT_PUBLIC_SENTRY_DSN")}},rU={server:{MESSAGE_WEBHOOK_URL:rf.string().url().optional(),USER_CREATED_WEBHOOK_URL:rf.string().url().optional()}},rB={client:{NEXT_PUBLIC_POSTHOG_KEY:rf.string().min(1).optional(),NEXT_PUBLIC_POSTHOG_HOST:rf.string().min(1).optional().default("https://app.posthog.com")},runtimeEnv:{NEXT_PUBLIC_POSTHOG_KEY:rb("NEXT_PUBLIC_POSTHOG_KEY"),NEXT_PUBLIC_POSTHOG_HOST:rb("NEXT_PUBLIC_POSTHOG_HOST")}},rM={client:{NEXT_PUBLIC_TOLGEE_API_KEY:rf.string().min(1).optional(),NEXT_PUBLIC_TOLGEE_API_URL:rf.string().url().optional().default('https://tolgee.server.baptistearno.com"')},runtimeEnv:{NEXT_PUBLIC_TOLGEE_API_KEY:rb("NEXT_PUBLIC_TOLGEE_API_KEY"),NEXT_PUBLIC_TOLGEE_API_URL:rb("NEXT_PUBLIC_TOLGEE_API_URL","https://tolgee.server.baptistearno.com")}},rV=(r="object"==typeof(l={server:(0,g.a)((0,g.a)((0,g.a)((0,g.a)((0,g.a)((0,g.a)((0,g.a)((0,g.a)((0,g.a)((0,g.a)((0,g.a)((0,g.a)((0,g.a)((0,g.a)((0,g.a)((0,g.a)({},ry.server),r_.server),rE.server),rx.server),rC.server),rS.server),rN.server),rk.server),rR.server),rA.server),rO.server),rw.server),rI.server),rT.server),rj.server),rU.server),client:(0,g.a)((0,g.a)((0,g.a)((0,g.a)((0,g.a)((0,g.a)((0,g.a)((0,g.a)((0,g.a)((0,g.a)({},ry.client),rx.client),rC.client),rS.client),rP.client),rk.client),rL.client),rj.client),rB.client),rM.client),experimental__runtimeEnv:(0,g.a)((0,g.a)((0,g.a)((0,g.a)((0,g.a)((0,g.a)((0,g.a)((0,g.a)((0,g.a)((0,g.a)({},ry.runtimeEnv),rx.runtimeEnv),rC.runtimeEnv),rS.runtimeEnv),rP.runtimeEnv),rk.runtimeEnv),rL.runtimeEnv),rj.runtimeEnv),rB.runtimeEnv),rM.runtimeEnv),skipValidation:"true"===I.env.SKIP_ENV_CHECK||void 0===window.__ENV,onValidationError(e){throw console.error(" Invalid environment variables:",e.flatten().fieldErrors),Error("Invalid environment variables: ".concat(JSON.stringify(e.flatten().fieldErrors)))},onInvalidAccess:e=>{throw Error(" Attempted to access a server-side environment variable on the client: ".concat(e))}}).client?l.client:{},a="object"==typeof l.server?l.server:{},i=l.shared,o=l.runtimeEnv?l.runtimeEnv:(0,g.a)((0,g.a)({},I.env),l.experimental__runtimeEnv),function(e){var t,n,r,a,i,o;let s=null!=(n=null!=(t=e.runtimeEnvStrict)?t:e.runtimeEnv)?n:I.env;if(null!=(r=e.emptyStringAsUndefined)&&r)for(let[e,t]of Object.entries(s))""===t&&delete s[e];if(e.skipValidation)return s;let l="object"==typeof e.client?e.client:{},d="object"==typeof e.server?e.server:{},u="object"==typeof e.shared?e.shared:{},c=rf.object(l),p=rf.object(d),h=rf.object(u),m=null!=(a=e.isServer)&&a,g=c.merge(h),f=p.merge(h).merge(c),b=m?f.safeParse(s):g.safeParse(s),v=null!=(i=e.onValidationError)?i:e=>{throw console.error(" Invalid environment variables:",e.flatten().fieldErrors),Error("Invalid environment variables")},y=null!=(o=e.onInvalidAccess)?o:e=>{throw Error(" Attempted to access a server-side environment variable on the client")};return!1===b.success?v(b.error):new Proxy(b.data,{get(t,n){if(!("string"!=typeof n||"__esModule"===n||"$$typeof"===n))return m||!e.clientPrefix||n.startsWith(e.clientPrefix)||void 0!==h.shape[n]?t[n]:y(n)}})}((0,g.b)((0,g.a)({},l),{shared:i,client:r,server:a,clientPrefix:"NEXT_PUBLIC_",runtimeEnv:o}))),rD=e=>{var t,n,r,a,i,o,s,l;let{typebot:d,apiHost:u=rV.NEXT_PUBLIC_VIEWER_URL[0],isPreview:c=!1,isLoading:p=!1,resultId:h,startGroupId:g,predefinedVariables:b,onNewLog:v,onNewGroupVisible:y,onNewAnswer:_,onCompleted:E,onVariablesUpdated:x}=e,w=(0,f.useMemo)(()=>{var e,t,n;return(null==(n=null==(t=null==(e=null==d?void 0:d.theme)?void 0:e.general)?void 0:t.background)?void 0:n.type)==="Color"?d.theme.general.background.content:"transparent"},[null==(n=null==(t=null==d?void 0:d.theme)?void 0:t.general)?void 0:n.background]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("style",{children:["/* CSS variables. */\n:root {\n  --PhoneInput-color--focus: #03b2cb;\n  --PhoneInputInternationalIconPhone-opacity: 0.8;\n  --PhoneInputInternationalIconGlobe-opacity: 0.65;\n  --PhoneInputCountrySelect-marginRight: 0.35em;\n  --PhoneInputCountrySelectArrow-width: 0.3em;\n  --PhoneInputCountrySelectArrow-marginLeft: var(\n    --PhoneInputCountrySelect-marginRight\n  );\n  --PhoneInputCountrySelectArrow-borderWidth: 1px;\n  --PhoneInputCountrySelectArrow-opacity: 0.45;\n  --PhoneInputCountrySelectArrow-color: currentColor;\n  --PhoneInputCountrySelectArrow-color--focus: var(--PhoneInput-color--focus);\n  --PhoneInputCountrySelectArrow-transform: rotate(45deg);\n  --PhoneInputCountryFlag-aspectRatio: 1.5;\n  --PhoneInputCountryFlag-height: 1em;\n  --PhoneInputCountryFlag-borderWidth: 1px;\n  --PhoneInputCountryFlag-borderColor: rgba(0, 0, 0, 0.5);\n  --PhoneInputCountryFlag-borderColor--focus: var(--PhoneInput-color--focus);\n  --PhoneInputCountryFlag-backgroundColor--loading: rgba(0, 0, 0, 0.1);\n}\n\n.PhoneInput {\n  /* This is done to stretch the contents of this component. */\n  display: flex;\n  align-items: center;\n}\n\n.PhoneInputInput {\n  /* The phone number input stretches to fill all empty space */\n  flex: 1;\n  /* The phone number input should shrink\n	   to make room for the extension input */\n  min-width: 0;\n}\n\n.PhoneInputCountryIcon {\n  width: calc(\n    var(--PhoneInputCountryFlag-height) *\n      var(--PhoneInputCountryFlag-aspectRatio)\n  );\n  height: var(--PhoneInputCountryFlag-height);\n}\n\n.PhoneInputCountryIcon--square {\n  width: var(--PhoneInputCountryFlag-height);\n}\n\n.PhoneInputCountryIcon--border {\n  /* Removed `background-color` because when an `<img/>` was still loading\n	   it would show a dark gray rectangle. */\n  /* For some reason the `<img/>` is not stretched to 100% width and height\n	   and sometime there can be seen white pixels of the background at top and bottom. */\n  background-color: var(--PhoneInputCountryFlag-backgroundColor--loading);\n  /* Border is added via `box-shadow` because `border` interferes with `width`/`height`. */\n  /* For some reason the `<img/>` is not stretched to 100% width and height\n	   and sometime there can be seen white pixels of the background at top and bottom,\n	   so an additional \"inset\" border is added. */\n  box-shadow: 0 0 0 var(--PhoneInputCountryFlag-borderWidth)\n      var(--PhoneInputCountryFlag-borderColor),\n    inset 0 0 0 var(--PhoneInputCountryFlag-borderWidth)\n      var(--PhoneInputCountryFlag-borderColor);\n}\n\n.PhoneInputCountryIconImg {\n  /* Fixes weird vertical space above the flag icon. */\n  /* https://gitlab.com/catamphetamine/react-phone-number-input/-/issues/7#note_348586559 */\n  display: block;\n  /* 3rd party <SVG/> flag icons won't stretch if they have `width` and `height`.\n	   Also, if an <SVG/> icon's aspect ratio was different, it wouldn't fit too. */\n  width: 100%;\n  height: 100%;\n}\n\n.PhoneInputInternationalIconPhone {\n  opacity: var(--PhoneInputInternationalIconPhone-opacity);\n}\n\n.PhoneInputInternationalIconGlobe {\n  opacity: var(--PhoneInputInternationalIconGlobe-opacity);\n}\n\n/* Styling native country `<select/>`. */\n\n.PhoneInputCountry {\n  position: relative;\n  align-self: stretch;\n  display: flex;\n  align-items: center;\n  margin-right: var(--PhoneInputCountrySelect-marginRight);\n}\n\n.PhoneInputCountrySelect {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  z-index: 1;\n  border: 0;\n  opacity: 0;\n  cursor: pointer;\n}\n\n.PhoneInputCountrySelect[disabled],\n.PhoneInputCountrySelect[readonly] {\n  cursor: default;\n}\n\n.PhoneInputCountrySelectArrow {\n  display: block;\n  content: '';\n  width: var(--PhoneInputCountrySelectArrow-width);\n  height: var(--PhoneInputCountrySelectArrow-width);\n  margin-left: var(--PhoneInputCountrySelectArrow-marginLeft);\n  border-style: solid;\n  border-color: var(--PhoneInputCountrySelectArrow-color);\n  border-top-width: 0;\n  border-bottom-width: var(--PhoneInputCountrySelectArrow-borderWidth);\n  border-left-width: 0;\n  border-right-width: var(--PhoneInputCountrySelectArrow-borderWidth);\n  transform: var(--PhoneInputCountrySelectArrow-transform);\n  opacity: var(--PhoneInputCountrySelectArrow-opacity);\n}\n\n.PhoneInputCountrySelect:focus\n  + .PhoneInputCountryIcon\n  + .PhoneInputCountrySelectArrow {\n  opacity: 1;\n  color: var(--PhoneInputCountrySelectArrow-color--focus);\n}\n\n.PhoneInputCountrySelect:focus + .PhoneInputCountryIcon--border {\n  box-shadow: 0 0 0 var(--PhoneInputCountryFlag-borderWidth)\n      var(--PhoneInputCountryFlag-borderColor--focus),\n    inset 0 0 0 var(--PhoneInputCountryFlag-borderWidth)\n      var(--PhoneInputCountryFlag-borderColor--focus);\n}\n\n.PhoneInputCountrySelect:focus\n  + .PhoneInputCountryIcon\n  .PhoneInputInternationalIconGlobe {\n  opacity: 1;\n  color: var(--PhoneInputCountrySelectArrow-color--focus);\n}\n\n.PhoneInputInput {\n  padding: 1rem 0.5rem;\n  outline: none !important;\n  background: transparent;\n  flex: 1 1 0%;\n  width: 100%;\n  font-size: 16px;\n}\n\n.PhoneInputCountry {\n  padding-left: 0.5rem;\n}\n\n.PhoneInputCountryIcon,\n.PhoneInputCountryIconImg {\n  border-radius: 3px;\n}\n\ninput.PhoneInputInput::-moz-placeholder {\n  color: var(--typebot-input-placeholder-color);\n}\n\ninput.PhoneInputInput::placeholder {\n  color: var(--typebot-input-placeholder-color);\n}\n",'/*\n! tailwindcss v3.2.4 | MIT License | https://tailwindcss.com\n*//*\n1. Prevent padding and border from affecting element width. (https://github.com/mozdevs/cssremedy/issues/4)\n2. Allow adding a border to an element by just adding a border-width. (https://github.com/tailwindcss/tailwindcss/pull/116)\n*/\n\n*,\n::before,\n::after {\n  box-sizing: border-box; /* 1 */\n  border-width: 0; /* 2 */\n  border-style: solid; /* 2 */\n  border-color: #e5e7eb; /* 2 */\n}\n\n::before,\n::after {\n  --tw-content: \'\';\n}\n\n/*\n1. Use a consistent sensible line-height in all browsers.\n2. Prevent adjustments of font size after orientation changes in iOS.\n3. Use a more readable tab size.\n4. Use the user\'s configured `sans` font-family by default.\n5. Use the user\'s configured `sans` font-feature-settings by default.\n*/\n\nhtml {\n  line-height: 1.5; /* 1 */\n  -webkit-text-size-adjust: 100%; /* 2 */\n  -moz-tab-size: 4; /* 3 */\n  -o-tab-size: 4;\n     tab-size: 4; /* 3 */\n  font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"; /* 4 */\n  font-feature-settings: normal; /* 5 */\n}\n\n/*\n1. Remove the margin in all browsers.\n2. Inherit line-height from `html` so users can set them as a class directly on the `html` element.\n*/\n\nbody {\n  margin: 0; /* 1 */\n  line-height: inherit; /* 2 */\n}\n\n/*\n1. Add the correct height in Firefox.\n2. Correct the inheritance of border color in Firefox. (https://bugzilla.mozilla.org/show_bug.cgi?id=190655)\n3. Ensure horizontal rules are visible by default.\n*/\n\nhr {\n  height: 0; /* 1 */\n  color: inherit; /* 2 */\n  border-top-width: 1px; /* 3 */\n}\n\n/*\nAdd the correct text decoration in Chrome, Edge, and Safari.\n*/\n\nabbr:where([title]) {\n  -webkit-text-decoration: underline dotted;\n          text-decoration: underline dotted;\n}\n\n/*\nRemove the default font size and weight for headings.\n*/\n\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  font-size: inherit;\n  font-weight: inherit;\n}\n\n/*\nReset links to optimize for opt-in styling instead of opt-out.\n*/\n\na {\n  color: inherit;\n  text-decoration: inherit;\n}\n\n/*\nAdd the correct font weight in Edge and Safari.\n*/\n\nb,\nstrong {\n  font-weight: bolder;\n}\n\n/*\n1. Use the user\'s configured `mono` font family by default.\n2. Correct the odd `em` font sizing in all browsers.\n*/\n\ncode,\nkbd,\nsamp,\npre {\n  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; /* 1 */\n  font-size: 1em; /* 2 */\n}\n\n/*\nAdd the correct font size in all browsers.\n*/\n\nsmall {\n  font-size: 80%;\n}\n\n/*\nPrevent `sub` and `sup` elements from affecting the line height in all browsers.\n*/\n\nsub,\nsup {\n  font-size: 75%;\n  line-height: 0;\n  position: relative;\n  vertical-align: baseline;\n}\n\nsub {\n  bottom: -0.25em;\n}\n\nsup {\n  top: -0.5em;\n}\n\n/*\n1. Remove text indentation from table contents in Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=999088, https://bugs.webkit.org/show_bug.cgi?id=201297)\n2. Correct table border color inheritance in all Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=935729, https://bugs.webkit.org/show_bug.cgi?id=195016)\n3. Remove gaps between table borders by default.\n*/\n\ntable {\n  text-indent: 0; /* 1 */\n  border-color: inherit; /* 2 */\n  border-collapse: collapse; /* 3 */\n}\n\n/*\n1. Change the font styles in all browsers.\n2. Remove the margin in Firefox and Safari.\n3. Remove default padding in all browsers.\n*/\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  font-family: inherit; /* 1 */\n  font-size: 100%; /* 1 */\n  font-weight: inherit; /* 1 */\n  line-height: inherit; /* 1 */\n  color: inherit; /* 1 */\n  margin: 0; /* 2 */\n  padding: 0; /* 3 */\n}\n\n/*\nRemove the inheritance of text transform in Edge and Firefox.\n*/\n\nbutton,\nselect {\n  text-transform: none;\n}\n\n/*\n1. Correct the inability to style clickable types in iOS and Safari.\n2. Remove default button styles.\n*/\n\nbutton,\n[type=\'button\'],\n[type=\'reset\'],\n[type=\'submit\'] {\n  -webkit-appearance: button; /* 1 */\n  background-color: transparent; /* 2 */\n  background-image: none; /* 2 */\n}\n\n/*\nUse the modern Firefox focus style for all focusable elements.\n*/\n\n:-moz-focusring {\n  outline: auto;\n}\n\n/*\nRemove the additional `:invalid` styles in Firefox. (https://github.com/mozilla/gecko-dev/blob/2f9eacd9d3d995c937b4251a5557d95d494c9be1/layout/style/res/forms.css#L728-L737)\n*/\n\n:-moz-ui-invalid {\n  box-shadow: none;\n}\n\n/*\nAdd the correct vertical alignment in Chrome and Firefox.\n*/\n\nprogress {\n  vertical-align: baseline;\n}\n\n/*\nCorrect the cursor style of increment and decrement buttons in Safari.\n*/\n\n::-webkit-inner-spin-button,\n::-webkit-outer-spin-button {\n  height: auto;\n}\n\n/*\n1. Correct the odd appearance in Chrome and Safari.\n2. Correct the outline style in Safari.\n*/\n\n[type=\'search\'] {\n  -webkit-appearance: textfield; /* 1 */\n  outline-offset: -2px; /* 2 */\n}\n\n/*\nRemove the inner padding in Chrome and Safari on macOS.\n*/\n\n::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n\n/*\n1. Correct the inability to style clickable types in iOS and Safari.\n2. Change font properties to `inherit` in Safari.\n*/\n\n::-webkit-file-upload-button {\n  -webkit-appearance: button; /* 1 */\n  font: inherit; /* 2 */\n}\n\n/*\nAdd the correct display in Chrome and Safari.\n*/\n\nsummary {\n  display: list-item;\n}\n\n/*\nRemoves the default spacing and border for appropriate elements.\n*/\n\nblockquote,\ndl,\ndd,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\nhr,\nfigure,\np,\npre {\n  margin: 0;\n}\n\nfieldset {\n  margin: 0;\n  padding: 0;\n}\n\nlegend {\n  padding: 0;\n}\n\nol,\nul,\nmenu {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n/*\nPrevent resizing textareas horizontally by default.\n*/\n\ntextarea {\n  resize: vertical;\n}\n\n/*\n1. Reset the default placeholder opacity in Firefox. (https://github.com/tailwindlabs/tailwindcss/issues/3300)\n2. Set the default placeholder color to the user\'s configured gray 400 color.\n*/\n\ninput::-moz-placeholder, textarea::-moz-placeholder {\n  opacity: 1; /* 1 */\n  color: #9ca3af; /* 2 */\n}\n\ninput::placeholder,\ntextarea::placeholder {\n  opacity: 1; /* 1 */\n  color: #9ca3af; /* 2 */\n}\n\n/*\nSet the default cursor for buttons.\n*/\n\nbutton,\n[role="button"] {\n  cursor: pointer;\n}\n\n/*\nMake sure disabled buttons don\'t get the pointer cursor.\n*/\n:disabled {\n  cursor: default;\n}\n\n/*\n1. Make replaced elements `display: block` by default. (https://github.com/mozdevs/cssremedy/issues/14)\n2. Add `vertical-align: middle` to align replaced elements more sensibly by default. (https://github.com/jensimmons/cssremedy/issues/14#issuecomment-634934210)\n   This can trigger a poorly considered lint error in some tools but is included by design.\n*/\n\nimg,\nsvg,\nvideo,\ncanvas,\naudio,\niframe,\nembed,\nobject {\n  display: block; /* 1 */\n  vertical-align: middle; /* 2 */\n}\n\n/*\nConstrain images and videos to the parent width and preserve their intrinsic aspect ratio. (https://github.com/mozdevs/cssremedy/issues/14)\n*/\n\nimg,\nvideo {\n  max-width: 100%;\n  height: auto;\n}\n\n/* Make elements with the HTML hidden attribute stay hidden by default */\n[hidden] {\n  display: none;\n}\n\n*, ::before, ::after {\n  --tw-border-spacing-x: 0;\n  --tw-border-spacing-y: 0;\n  --tw-translate-x: 0;\n  --tw-translate-y: 0;\n  --tw-rotate: 0;\n  --tw-skew-x: 0;\n  --tw-skew-y: 0;\n  --tw-scale-x: 1;\n  --tw-scale-y: 1;\n  --tw-pan-x:  ;\n  --tw-pan-y:  ;\n  --tw-pinch-zoom:  ;\n  --tw-scroll-snap-strictness: proximity;\n  --tw-ordinal:  ;\n  --tw-slashed-zero:  ;\n  --tw-numeric-figure:  ;\n  --tw-numeric-spacing:  ;\n  --tw-numeric-fraction:  ;\n  --tw-ring-inset:  ;\n  --tw-ring-offset-width: 0px;\n  --tw-ring-offset-color: #fff;\n  --tw-ring-color: rgb(59 130 246 / 0.5);\n  --tw-ring-offset-shadow: 0 0 #0000;\n  --tw-ring-shadow: 0 0 #0000;\n  --tw-shadow: 0 0 #0000;\n  --tw-shadow-colored: 0 0 #0000;\n  --tw-blur:  ;\n  --tw-brightness:  ;\n  --tw-contrast:  ;\n  --tw-grayscale:  ;\n  --tw-hue-rotate:  ;\n  --tw-invert:  ;\n  --tw-saturate:  ;\n  --tw-sepia:  ;\n  --tw-drop-shadow:  ;\n  --tw-backdrop-blur:  ;\n  --tw-backdrop-brightness:  ;\n  --tw-backdrop-contrast:  ;\n  --tw-backdrop-grayscale:  ;\n  --tw-backdrop-hue-rotate:  ;\n  --tw-backdrop-invert:  ;\n  --tw-backdrop-opacity:  ;\n  --tw-backdrop-saturate:  ;\n  --tw-backdrop-sepia:  ;\n}\n\n::backdrop {\n  --tw-border-spacing-x: 0;\n  --tw-border-spacing-y: 0;\n  --tw-translate-x: 0;\n  --tw-translate-y: 0;\n  --tw-rotate: 0;\n  --tw-skew-x: 0;\n  --tw-skew-y: 0;\n  --tw-scale-x: 1;\n  --tw-scale-y: 1;\n  --tw-pan-x:  ;\n  --tw-pan-y:  ;\n  --tw-pinch-zoom:  ;\n  --tw-scroll-snap-strictness: proximity;\n  --tw-ordinal:  ;\n  --tw-slashed-zero:  ;\n  --tw-numeric-figure:  ;\n  --tw-numeric-spacing:  ;\n  --tw-numeric-fraction:  ;\n  --tw-ring-inset:  ;\n  --tw-ring-offset-width: 0px;\n  --tw-ring-offset-color: #fff;\n  --tw-ring-color: rgb(59 130 246 / 0.5);\n  --tw-ring-offset-shadow: 0 0 #0000;\n  --tw-ring-shadow: 0 0 #0000;\n  --tw-shadow: 0 0 #0000;\n  --tw-shadow-colored: 0 0 #0000;\n  --tw-blur:  ;\n  --tw-brightness:  ;\n  --tw-contrast:  ;\n  --tw-grayscale:  ;\n  --tw-hue-rotate:  ;\n  --tw-invert:  ;\n  --tw-saturate:  ;\n  --tw-sepia:  ;\n  --tw-drop-shadow:  ;\n  --tw-backdrop-blur:  ;\n  --tw-backdrop-brightness:  ;\n  --tw-backdrop-contrast:  ;\n  --tw-backdrop-grayscale:  ;\n  --tw-backdrop-hue-rotate:  ;\n  --tw-backdrop-invert:  ;\n  --tw-backdrop-opacity:  ;\n  --tw-backdrop-saturate:  ;\n  --tw-backdrop-sepia:  ;\n}\n.container {\n  width: 100%;\n}\n@media (min-width: 400px) {\n\n  .container {\n    max-width: 400px;\n  }\n}\n@media (min-width: 640px) {\n\n  .container {\n    max-width: 640px;\n  }\n}\n@media (min-width: 768px) {\n\n  .container {\n    max-width: 768px;\n  }\n}\n@media (min-width: 1024px) {\n\n  .container {\n    max-width: 1024px;\n  }\n}\n@media (min-width: 1280px) {\n\n  .container {\n    max-width: 1280px;\n  }\n}\n@media (min-width: 1536px) {\n\n  .container {\n    max-width: 1536px;\n  }\n}\n.fixed {\n  position: fixed;\n}\n.absolute {\n  position: absolute;\n}\n.relative {\n  position: relative;\n}\n.top-0 {\n  top: 0px;\n}\n.left-0 {\n  left: 0px;\n}\n.right-0 {\n  right: 0px;\n}\n.-right-1 {\n  right: -0.25rem;\n}\n.z-50 {\n  z-index: 50;\n}\n.z-10 {\n  z-index: 10;\n}\n.z-20 {\n  z-index: 20;\n}\n.m-2 {\n  margin: 0.5rem;\n}\n.mx-4 {\n  margin-left: 1rem;\n  margin-right: 1rem;\n}\n.my-2 {\n  margin-top: 0.5rem;\n  margin-bottom: 0.5rem;\n}\n.mb-1 {\n  margin-bottom: 0.25rem;\n}\n.mb-2 {\n  margin-bottom: 0.5rem;\n}\n.-ml-1 {\n  margin-left: -0.25rem;\n}\n.mr-3 {\n  margin-right: 0.75rem;\n}\n.mr-1 {\n  margin-right: 0.25rem;\n}\n.mr-2 {\n  margin-right: 0.5rem;\n}\n.mb-4 {\n  margin-bottom: 1rem;\n}\n.mt-1 {\n  margin-top: 0.25rem;\n}\n.ml-2 {\n  margin-left: 0.5rem;\n}\n.-mt-1 {\n  margin-top: -0.25rem;\n}\n.-mr-1 {\n  margin-right: -0.25rem;\n}\n.mb-3 {\n  margin-bottom: 0.75rem;\n}\n.mt-4 {\n  margin-top: 1rem;\n}\n.block {\n  display: block;\n}\n.\\!block {\n  display: block !important;\n}\n.inline {\n  display: inline;\n}\n.flex {\n  display: flex;\n}\n.inline-flex {\n  display: inline-flex;\n}\n.hidden {\n  display: none;\n}\n.h-32 {\n  height: 8rem;\n}\n.h-5 {\n  height: 1.25rem;\n}\n.h-screen {\n  height: 100vh;\n}\n.h-full {\n  height: 100%;\n}\n.h-2 {\n  height: 0.5rem;\n}\n.h-6 {\n  height: 1.5rem;\n}\n.h-3 {\n  height: 0.75rem;\n}\n.h-2\\.5 {\n  height: 0.625rem;\n}\n.h-4 {\n  height: 1rem;\n}\n.min-h-full {\n  min-height: 100%;\n}\n.w-full {\n  width: 100%;\n}\n.w-5 {\n  width: 1.25rem;\n}\n.w-screen {\n  width: 100vw;\n}\n.w-2 {\n  width: 0.5rem;\n}\n.w-6 {\n  width: 1.5rem;\n}\n.w-auto {\n  width: auto;\n}\n.w-3 {\n  width: 0.75rem;\n}\n.min-w-0 {\n  min-width: 0px;\n}\n.max-w-xs {\n  max-width: 20rem;\n}\n.max-w-full {\n  max-width: 100%;\n}\n.max-w-lg {\n  max-width: 32rem;\n}\n.flex-1 {\n  flex: 1 1 0%;\n}\n.flex-shrink-0 {\n  flex-shrink: 0;\n}\n.transform {\n  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\n}\n@keyframes spin {\n\n  to {\n    transform: rotate(360deg);\n  }\n}\n.animate-spin {\n  animation: spin 1s linear infinite;\n}\n@keyframes ping {\n\n  75%, 100% {\n    transform: scale(2);\n    opacity: 0;\n  }\n}\n.animate-ping {\n  animation: ping 1s cubic-bezier(0, 0, 0.2, 1) infinite;\n}\n.cursor-pointer {\n  cursor: pointer;\n}\n.flex-col {\n  flex-direction: column;\n}\n.flex-wrap {\n  flex-wrap: wrap;\n}\n.items-start {\n  align-items: flex-start;\n}\n.items-end {\n  align-items: flex-end;\n}\n.items-center {\n  align-items: center;\n}\n.justify-end {\n  justify-content: flex-end;\n}\n.justify-center {\n  justify-content: center;\n}\n.justify-between {\n  justify-content: space-between;\n}\n.gap-2 {\n  gap: 0.5rem;\n}\n.overflow-hidden {\n  overflow: hidden;\n}\n.overflow-y-scroll {\n  overflow-y: scroll;\n}\n.whitespace-pre-wrap {\n  white-space: pre-wrap;\n}\n.rounded {\n  border-radius: 0.25rem;\n}\n.rounded-lg {\n  border-radius: 0.5rem;\n}\n.rounded-md {\n  border-radius: 0.375rem;\n}\n.rounded-full {\n  border-radius: 9999px;\n}\n.border-2 {\n  border-width: 2px;\n}\n.border-dashed {\n  border-style: dashed;\n}\n.border-gray-300 {\n  --tw-border-opacity: 1;\n  border-color: rgb(209 213 219 / var(--tw-border-opacity));\n}\n.bg-white {\n  --tw-bg-opacity: 1;\n  background-color: rgb(255 255 255 / var(--tw-bg-opacity));\n}\n.bg-transparent {\n  background-color: transparent;\n}\n.bg-gray-50 {\n  --tw-bg-opacity: 1;\n  background-color: rgb(249 250 251 / var(--tw-bg-opacity));\n}\n.bg-gray-200 {\n  --tw-bg-opacity: 1;\n  background-color: rgb(229 231 235 / var(--tw-bg-opacity));\n}\n.bg-cover {\n  background-size: cover;\n}\n.object-cover {\n  -o-object-fit: cover;\n     object-fit: cover;\n}\n.p-4 {\n  padding: 1rem;\n}\n.px-3 {\n  padding-left: 0.75rem;\n  padding-right: 0.75rem;\n}\n.py-1 {\n  padding-top: 0.25rem;\n  padding-bottom: 0.25rem;\n}\n.px-2 {\n  padding-left: 0.5rem;\n  padding-right: 0.5rem;\n}\n.px-4 {\n  padding-left: 1rem;\n  padding-right: 1rem;\n}\n.py-2 {\n  padding-top: 0.5rem;\n  padding-bottom: 0.5rem;\n}\n.py-4 {\n  padding-top: 1rem;\n  padding-bottom: 1rem;\n}\n.py-6 {\n  padding-top: 1.5rem;\n  padding-bottom: 1.5rem;\n}\n.px-8 {\n  padding-left: 2rem;\n  padding-right: 2rem;\n}\n.px-1 {\n  padding-left: 0.25rem;\n  padding-right: 0.25rem;\n}\n.pt-10 {\n  padding-top: 2.5rem;\n}\n.pr-2 {\n  padding-right: 0.5rem;\n}\n.pb-0 {\n  padding-bottom: 0px;\n}\n.text-left {\n  text-align: left;\n}\n.text-center {\n  text-align: center;\n}\n.text-right {\n  text-align: right;\n}\n.text-sm {\n  font-size: 0.875rem;\n  line-height: 1.25rem;\n}\n.text-base {\n  font-size: 1rem;\n  line-height: 1.5rem;\n}\n.font-semibold {\n  font-weight: 600;\n}\n.font-normal {\n  font-weight: 400;\n}\n.text-blue-500 {\n  --tw-text-opacity: 1;\n  color: rgb(59 130 246 / var(--tw-text-opacity));\n}\n.text-gray-500 {\n  --tw-text-opacity: 1;\n  color: rgb(107 114 128 / var(--tw-text-opacity));\n}\n.text-gray-900 {\n  --tw-text-opacity: 1;\n  color: rgb(17 24 39 / var(--tw-text-opacity));\n}\n.text-white {\n  --tw-text-opacity: 1;\n  color: rgb(255 255 255 / var(--tw-text-opacity));\n}\n.text-red-500 {\n  --tw-text-opacity: 1;\n  color: rgb(239 68 68 / var(--tw-text-opacity));\n}\n.opacity-25 {\n  opacity: 0.25;\n}\n.opacity-75 {\n  opacity: 0.75;\n}\n.opacity-0 {\n  opacity: 0;\n}\n.opacity-100 {\n  opacity: 1;\n}\n.shadow-md {\n  --tw-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);\n  --tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);\n  box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);\n}\n.shadow {\n  --tw-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);\n  --tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);\n  box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);\n}\n.brightness-225 {\n  --tw-brightness: brightness(2.25);\n  filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\n}\n.brightness-200 {\n  --tw-brightness: brightness(2);\n  filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\n}\n.filter {\n  filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\n}\n.transition-all {\n  transition-property: all;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 150ms;\n}\n.transition {\n  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-backdrop-filter;\n  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;\n  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-backdrop-filter;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 150ms;\n}\n.duration-100 {\n  transition-duration: 100ms;\n}\n\n:root {\n  --typebot-container-bg-image: none;\n  --typebot-container-bg-color: transparent;\n  --typebot-container-font-family: \'Open Sans\';\n\n  --typebot-button-bg-color: #0042da;\n  --typebot-button-color: #ffffff;\n\n  --typebot-host-bubble-bg-color: #f7f8ff;\n  --typebot-host-bubble-color: #303235;\n\n  --typebot-guest-bubble-bg-color: #ff8e21;\n  --typebot-guest-bubble-color: #ffffff;\n\n  --typebot-input-bg-color: #ffffff;\n  --typebot-input-color: #303235;\n  --typebot-input-placeholder-color: #9095a0;\n\n  --typebot-header-bg-color: #ffffff;\n  --typebot-header-color: #303235;\n\n  /* Phone input */\n  --PhoneInputCountryFlag-borderColor: transparent;\n  --PhoneInput-color--focus: transparent;\n}\n\n/* Hide scrollbar for Chrome, Safari and Opera */\n.scrollable-container::-webkit-scrollbar {\n  display: none;\n}\n\n/* Hide scrollbar for IE, Edge and Firefox */\n.scrollable-container {\n  -ms-overflow-style: none; /* IE and Edge */\n  scrollbar-width: none; /* Firefox */\n}\n\n/* Transitions */\n.bubble-enter {\n  opacity: 0;\n}\n.bubble-enter-active {\n  opacity: 1;\n  transition-property: opacity;\n  transition-duration: 500ms;\n  transition-timing-function: ease-out;\n}\n.bubble-exit {\n  opacity: 1;\n}\n.bubble-exit-active {\n  opacity: 0;\n  transition-delay: 0ms !important;\n  transition-property: opacity;\n  transition-duration: 400ms;\n  transition-timing-function: ease-out;\n}\n\n.bubble-typing {\n  transition: width 400ms ease-out, height 400ms ease-out;\n}\n\n.content-opacity {\n  transition: opacity 400ms ease-in 200ms;\n}\n\n.bubble1,\n.bubble2,\n.bubble3 {\n  background-color: var(--typebot-host-bubble-color);\n  opacity: 0.5;\n}\n\n.bubble1 {\n  animation: chatBubbles 1s ease-in-out infinite;\n}\n\n.bubble2 {\n  animation: chatBubbles 1s ease-in-out infinite;\n  animation-delay: 0.3s;\n}\n\n.bubble3 {\n  animation: chatBubbles 1s ease-in-out infinite;\n  animation-delay: 0.5s;\n}\n\n@keyframes chatBubbles {\n  0% {\n    transform: translateY(0);\n  }\n  50% {\n    transform: translateY(-5px);\n  }\n  100% {\n    transform: translateY(0);\n  }\n}\n\nbutton,\ninput,\ntextarea {\n  font-weight: 300;\n}\n\n.slate-a {\n  text-decoration: underline;\n}\n\n.slate-html-container > div {\n  min-height: 24px;\n}\n\n.slate-bold {\n  font-weight: bold;\n}\n\n.slate-italic {\n  font-style: oblique;\n}\n\n.slate-underline {\n  text-decoration: underline;\n}\n.text-input::-moz-placeholder {\n  color: var(--typebot-input-placeholder-color) !important;\n  opacity: 1 !important;\n}\n.text-input::placeholder {\n  color: var(--typebot-input-placeholder-color) !important;\n  opacity: 1 !important;\n}\n\n.typebot-container {\n  background-image: var(--typebot-container-bg-image);\n  background-color: var(--typebot-container-bg-color);\n  font-family: var(--typebot-container-font-family);\n}\n\n.custom-header {\n  color: var(--typebot-header-color);\n  background-color: var(--typebot-header-bg-color);\n}\n\n.typebot-button {\n  color: var(--typebot-button-color);\n  background-color: var(--typebot-button-bg-color);\n  border: 1px solid var(--typebot-button-bg-color);\n}\n\n.typebot-button.selectable {\n  color: var(--typebot-host-bubble-color);\n  background-color: var(--typebot-host-bubble-bg-color);\n  border: 1px solid var(--typebot-button-bg-color);\n}\n\n.typebot-host-bubble {\n  color: var(--typebot-host-bubble-color);\n}\n\n.typebot-host-bubble > .bubble-typing {\n  background-color: var(--typebot-host-bubble-bg-color);\n  border: var(--typebot-host-bubble-border);\n}\n\n.typebot-guest-bubble {\n  color: var(--typebot-guest-bubble-color);\n  background-color: var(--typebot-guest-bubble-bg-color);\n}\n\n.typebot-input {\n  color: var(--typebot-input-color);\n  background-color: var(--typebot-input-bg-color);\n  box-shadow: 0 2px 6px -1px rgba(0, 0, 0, 0.1);\n}\n\n.typebot-input-error-message {\n  color: var(--typebot-input-color);\n}\n\n.typebot-button > .send-icon {\n  fill: var(--typebot-button-color);\n}\n\n.typebot-chat-view {\n  max-width: 800px;\n}\n\n.ping span {\n  background-color: var(--typebot-button-bg-color);\n}\n\n.rating-icon-container svg {\n  width: 42px;\n  height: 42px;\n  stroke: var(--typebot-button-bg-color);\n  fill: var(--typebot-host-bubble-bg-color);\n  transition: fill 100ms ease-out;\n}\n\n.rating-icon-container.selected svg {\n  fill: var(--typebot-button-bg-color);\n}\n\n.rating-icon-container:hover svg {\n  filter: brightness(0.9);\n}\n\n.rating-icon-container:active svg {\n  filter: brightness(0.75);\n}\n\n.upload-progress-bar {\n  background-color: var(--typebot-button-bg-color);\n}\n\n.total-files-indicator {\n  background-color: var(--typebot-button-bg-color);\n  color: var(--typebot-button-color);\n  font-size: 10px;\n}\n\n.typebot-upload-input {\n  transition: border-color 100ms ease-out;\n}\n\n.typebot-upload-input.dragging-over {\n  border-color: var(--typebot-button-bg-color);\n}\n\n.secondary-button {\n  background-color: var(--typebot-host-bubble-bg-color);\n  color: var(--typebot-host-bubble-color);\n}\n\n.hover\\:bg-gray-100:hover {\n  --tw-bg-opacity: 1;\n  background-color: rgb(243 244 246 / var(--tw-bg-opacity));\n}\n\n.hover\\:brightness-90:hover {\n  --tw-brightness: brightness(.9);\n  filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\n}\n\n.focus\\:outline-none:focus {\n  outline: 2px solid transparent;\n  outline-offset: 2px;\n}\n\n.active\\:brightness-75:active {\n  --tw-brightness: brightness(.75);\n  filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\n}\n\n.disabled\\:cursor-not-allowed:disabled {\n  cursor: not-allowed;\n}\n\n.disabled\\:opacity-50:disabled {\n  opacity: 0.5;\n}\n\n.disabled\\:brightness-100:disabled {\n  --tw-brightness: brightness(1);\n  filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\n}\n\n@media (min-width: 400px) {\n\n  .xs\\:mb-2 {\n    margin-bottom: 0.5rem;\n  }\n\n  .xs\\:flex {\n    display: flex;\n  }\n\n  .xs\\:hidden {\n    display: none;\n  }\n\n  .xs\\:h-10 {\n    height: 2.5rem;\n  }\n\n  .xs\\:h-full {\n    height: 100%;\n  }\n\n  .xs\\:w-10 {\n    width: 2.5rem;\n  }\n\n  .xs\\:w-full {\n    width: 100%;\n  }\n\n  .xs\\:text-xl {\n    font-size: 1.25rem;\n    line-height: 1.75rem;\n  }\n}\n\n@media (min-width: 1024px) {\n\n  .lg\\:w-3\\/4 {\n    width: 75%;\n  }\n\n  .lg\\:w-11\\/12 {\n    width: 91.666667%;\n  }\n\n  .lg\\:w-4\\/6 {\n    width: 66.666667%;\n  }\n\n  .lg\\:px-5 {\n    padding-left: 1.25rem;\n    padding-right: 1.25rem;\n  }\n}\n']}),(0,m.jsx)("style",{children:null==(r=d.theme)?void 0:r.customCss}),(0,m.jsx)("style",{children:".lite-badge {\n  display: block !important;\n}\n"}),O(null==(i=null==(a=null==d?void 0:d.theme)?void 0:a.general)?void 0:i.font)&&(0,m.jsx)("style",{dangerouslySetInnerHTML:{__html:"@import url('https://fonts.googleapis.com/css2?family=".concat(null!=(s=null==(o=d.theme.general)?void 0:o.font)?s:"Open Sans",":ital,wght@0,300;0,400;0,600;1,300;1,400;1,600&display=swap');")}}),(0,m.jsx)($,{typebot:d,apiHost:u,isPreview:c,onNewLog:e=>v&&v(e),isLoading:p,children:(0,m.jsx)(em,{resultId:h,onNewAnswer:e=>_&&_(e),onVariablesUpdated:x,children:(0,m.jsxs)("div",{className:"flex text-base overflow-hidden bg-cover h-screen w-screen flex-col items-center typebot-container",style:{backgroundColor:null!=w?w:"transparent"},"data-testid":"container",children:[(0,m.jsx)("div",{className:"flex w-full h-full justify-center",children:(0,m.jsx)(tR,{theme:d.theme,onNewGroupVisible:e=>y&&y(e),onCompleted:()=>E&&E(),predefinedVariables:b,startGroupId:g})}),(null==(l=d.settings.general)?void 0:l.isBrandingEnabled)&&(0,m.jsx)(tL,{})]})})})]})},rz=n(3196),rZ=n(8579),rH=n(5460),rG=n(5972),rX=n(5617);let rF="resultId",rW=()=>{try{return sessionStorage.getItem(rF)}catch(e){}},rK=e=>{try{return sessionStorage.setItem(rF,e)}catch(e){}},rY=async e=>(0,rZ.wG)({url:"/api/typebots/t/results/r/answers",method:"PUT",body:e}),rJ=async e=>(0,rZ.wG)({url:"/api/typebots/".concat(e,"/results"),method:"POST"}),rq=async(e,t)=>(0,rZ.wG)({url:"/api/typebots/t/results/".concat(e),method:"PATCH",body:t});var r$=n(2062);let rQ=e=>{let{publishedTypebot:t,isIE:n,url:r,customHeadCode:a}=e,{asPath:i,push:o}=(0,rz.useRouter)(),[s,l]=(0,f.useState)(!1),[d,u]=(0,f.useState)(),[c,p]=(0,f.useState)(n?Error("Internet explorer is not supported"):void 0),[h,g]=(0,f.useState)(),[b,v]=(0,f.useState)([]),[y,_]=(0,f.useState)(!1);(0,f.useEffect)(()=>{var e;l(!0);let n=new URLSearchParams(location.search);E();let r={};n.forEach((e,t)=>{r[t]=e}),u(r),x().then(),(0,rZ.$K)(a)&&(0,rZ.vt)(a);let i=null===(e=t.settings.metadata)||void 0===e?void 0:e.googleTagManagerId;(0,rZ.UE)(i)&&document.body.prepend((0,rX.I)(i))},[]);let E=()=>{var e,n;i.includes("?")&&(null!==(n=null===(e=t.settings.general)||void 0===e?void 0:e.isHideQueryParamsEnabled)&&void 0!==n?n:r$.h.general.isHideQueryParamsEnabled)!==!1&&o(i.split("?")[0],void 0,{shallow:!0})},x=async()=>{let e=rW();if(e)g(e);else{let{error:e,data:r}=await rJ(t.typebotId);if(e)return p(e);if(null==r?void 0:r.hasReachedLimit)return p(Error("This bot is now closed."));if(null==r?void 0:r.result){var n;g(r.result.id),(null===(n=t.settings.general)||void 0===n?void 0:n.isNewResultOnRefreshEnabled)!==!0&&rK(r.result.id)}}};(0,f.useEffect)(()=>{h&&0!==b.length&&(Promise.all(b.map(I(h))).then(),v([]))},[h]);let w=async e=>{if(!h)return v([...b,e]);await I(h)(e)},I=e=>async t=>{let{error:n}=await rq(e,{variables:t});n&&p(n)},T=async e=>{if(!h)return p(Error("Error: result was not created"));let{error:t}=await rY({...e,resultId:h});t&&p(t),y||rq(h,{hasStarted:!0}).then(e=>{let{error:t}=e;return t?p(t):_(!0)})},C=async()=>{if(!h)return p(Error("Error: result was not created"));let{error:e}=await rq(h,{isCompleted:!0});e&&p(e)};return c?(0,m.jsx)(rG.m,{error:c}):(0,m.jsxs)("div",{style:{height:"100vh"},children:[(0,m.jsx)(rH.H,{url:r,typebotName:t.typebot.name,metadata:t.settings.metadata}),s&&(0,m.jsx)(rD,{typebot:t,resultId:h,predefinedVariables:d,onNewAnswer:T,onCompleted:C,onVariablesUpdated:w,isLoading:(0,rZ.z4)(h)})]})}},5617:function(e,t,n){"use strict";n.d(t,{I:function(){return a},J:function(){return r}});let r=e=>"<!-- Google Tag Manager -->\n(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\nnew Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\nj=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,'script','dataLayer','".concat(e,"');\n<!-- End Google Tag Manager -->"),a=e=>{if(document.getElementById("gtm-noscript"))return"";let t=document.createElement("noscript");t.id="gtm-noscript";let n=document.createElement("iframe");return n.src="https://www.googletagmanager.com/ns.html?id=".concat(e),n.height="0",n.width="0",n.style.display="none",n.style.visibility="hidden",t.appendChild(n),t}},6282:function(e,t,n){"use strict";n.d(t,{O:function(){return N}});var r=n(3259),a=n(1850);n(3698);let i=(e,t)=>{var n;return window.__ENV?null!==(n=window.__ENV[e])&&void 0!==n?n:t:void 0};var o=n(3698);let s=a.z.enum(["true","false"]).transform(e=>"true"===e),l={server:{NODE_ENV:a.z.enum(["development","production","test"]).optional(),DATABASE_URL:a.z.string().url().refine(e=>e.startsWith("postgres")||e.startsWith("mysql")),ENCRYPTION_SECRET:a.z.string().length(32),NEXTAUTH_URL:a.z.preprocess(e=>e&&"string"==typeof e&&e.length>0||"preview"!==o.env.VERCEL_ENV||!o.env.VERCEL_BUILDER_PROJECT_NAME||!o.env.NEXT_PUBLIC_VERCEL_VIEWER_PROJECT_NAME?e:o.env.VERCEL_BRANCH_URL.includes(o.env.VERCEL_BUILDER_PROJECT_NAME)?"https://".concat(o.env.VERCEL_BRANCH_URL):"https://".concat(o.env.VERCEL_BRANCH_URL).replace(o.env.NEXT_PUBLIC_VERCEL_VIEWER_PROJECT_NAME,o.env.VERCEL_BUILDER_PROJECT_NAME),a.z.string().url()),DISABLE_SIGNUP:s.optional().default("false"),ADMIN_EMAIL:a.z.string().min(1).optional().transform(e=>null==e?void 0:e.split(",")),DEFAULT_WORKSPACE_PLAN:a.z.enum(["FREE","STARTER","PRO","LIFETIME","UNLIMITED"]).refine(e=>["FREE","STARTER","PRO","LIFETIME","UNLIMITED"].includes(e)).default("FREE"),DEBUG:s.optional().default("false"),CHAT_API_TIMEOUT:a.z.coerce.number().optional(),RADAR_HIGH_RISK_KEYWORDS:a.z.string().min(1).transform(e=>e.split(",")).optional(),RADAR_INTERMEDIATE_RISK_KEYWORDS:a.z.string().min(1).transform(e=>e.split(",")).optional(),RADAR_CUMULATIVE_KEYWORDS:a.z.string().min(1).transform(e=>e.split("/").map(e=>e.split(",").map(e=>e.split("|")))).optional()},client:{NEXT_PUBLIC_E2E_TEST:s.optional(),NEXT_PUBLIC_VIEWER_URL:a.z.preprocess(e=>e&&"string"==typeof e&&e.length>0||"preview"!==o.env.VERCEL_ENV||!o.env.VERCEL_BUILDER_PROJECT_NAME||!o.env.NEXT_PUBLIC_VERCEL_VIEWER_PROJECT_NAME?e:o.env.VERCEL_BRANCH_URL.includes(o.env.NEXT_PUBLIC_VERCEL_VIEWER_PROJECT_NAME)?"https://".concat(o.env.VERCEL_BRANCH_URL):"https://".concat(o.env.VERCEL_BRANCH_URL).replace(o.env.VERCEL_BUILDER_PROJECT_NAME,o.env.NEXT_PUBLIC_VERCEL_VIEWER_PROJECT_NAME),a.z.string().min(1).transform(e=>e.split(","))),NEXT_PUBLIC_ONBOARDING_TYPEBOT_ID:a.z.string().min(1).optional(),NEXT_PUBLIC_BOT_FILE_UPLOAD_MAX_SIZE:a.z.coerce.number().optional()},runtimeEnv:{NEXT_PUBLIC_E2E_TEST:i("NEXT_PUBLIC_E2E_TEST"),NEXT_PUBLIC_VIEWER_URL:i("NEXT_PUBLIC_VIEWER_URL"),NEXT_PUBLIC_ONBOARDING_TYPEBOT_ID:i("NEXT_PUBLIC_ONBOARDING_TYPEBOT_ID"),NEXT_PUBLIC_BOT_FILE_UPLOAD_MAX_SIZE:i("NEXT_PUBLIC_BOT_FILE_UPLOAD_MAX_SIZE")}},d={server:{GITHUB_CLIENT_ID:a.z.string().min(1).optional(),GITHUB_CLIENT_SECRET:a.z.string().min(1).optional()}},u={server:{FACEBOOK_CLIENT_ID:a.z.string().min(1).optional(),FACEBOOK_CLIENT_SECRET:a.z.string().min(1).optional()}},c={server:{SMTP_USERNAME:a.z.string().min(1).optional(),SMTP_PASSWORD:a.z.string().min(1).optional(),SMTP_HOST:a.z.string().min(1).optional(),SMTP_PORT:a.z.coerce.number().optional().default(25),SMTP_AUTH_DISABLED:s.optional().default("false"),SMTP_SECURE:s.optional().default("false")},client:{NEXT_PUBLIC_SMTP_FROM:a.z.string().min(1).optional()},runtimeEnv:{NEXT_PUBLIC_SMTP_FROM:i("NEXT_PUBLIC_SMTP_FROM")}},p={server:{GITLAB_CLIENT_ID:a.z.string().min(1).optional(),GITLAB_CLIENT_SECRET:a.z.string().min(1).optional(),GITLAB_BASE_URL:a.z.string().url().optional().default("https://gitlab.com"),GITLAB_NAME:a.z.string().min(1).optional().default("GitLab"),GITLAB_REQUIRED_GROUPS:a.z.string().transform(e=>e?e.split(","):void 0).optional()}},h={server:{AZURE_AD_CLIENT_ID:a.z.string().min(1).optional(),AZURE_AD_CLIENT_SECRET:a.z.string().min(1).optional(),AZURE_AD_TENANT_ID:a.z.string().min(1).optional()}},m={server:{CUSTOM_OAUTH_NAME:a.z.string().min(1).optional().default("Custom OAuth"),CUSTOM_OAUTH_SCOPE:a.z.string().min(1).optional().default("openid profile email"),CUSTOM_OAUTH_CLIENT_ID:a.z.string().min(1).optional(),CUSTOM_OAUTH_CLIENT_SECRET:a.z.string().min(1).optional(),CUSTOM_OAUTH_WELL_KNOWN_URL:a.z.string().url().optional(),CUSTOM_OAUTH_USER_ID_PATH:a.z.string().min(1).optional().default("id"),CUSTOM_OAUTH_USER_EMAIL_PATH:a.z.string().min(1).optional().default("email"),CUSTOM_OAUTH_USER_NAME_PATH:a.z.string().min(1).optional().default("name"),CUSTOM_OAUTH_USER_IMAGE_PATH:a.z.string().min(1).optional().default("image")}},g={server:{GOOGLE_CLIENT_ID:a.z.string().min(1).optional(),GOOGLE_CLIENT_SECRET:a.z.string().min(1).optional()},client:{NEXT_PUBLIC_GOOGLE_API_KEY:a.z.string().min(1).optional()},runtimeEnv:{NEXT_PUBLIC_GOOGLE_API_KEY:i("NEXT_PUBLIC_GOOGLE_API_KEY")}},f={server:{STRIPE_SECRET_KEY:a.z.string().min(1).optional(),STRIPE_WEBHOOK_SECRET:a.z.string().min(1).optional(),STRIPE_STARTER_PRICE_ID:a.z.string().min(1).optional(),STRIPE_STARTER_CHATS_PRICE_ID:a.z.string().min(1).optional(),STRIPE_PRO_PRICE_ID:a.z.string().min(1).optional(),STRIPE_PRO_CHATS_PRICE_ID:a.z.string().min(1).optional()},client:{NEXT_PUBLIC_STRIPE_PUBLIC_KEY:a.z.string().min(1).optional()},runtimeEnv:{NEXT_PUBLIC_STRIPE_PUBLIC_KEY:i("NEXT_PUBLIC_STRIPE_PUBLIC_KEY")}},b={server:{S3_ACCESS_KEY:a.z.string().min(1).optional(),S3_SECRET_KEY:a.z.string().min(1).optional(),S3_BUCKET:a.z.string().min(1).optional().default("typebot"),S3_PORT:a.z.coerce.number().optional(),S3_ENDPOINT:a.z.string().min(1).optional(),S3_SSL:s.optional().default("true"),S3_REGION:a.z.string().min(1).optional(),S3_PUBLIC_CUSTOM_DOMAIN:a.z.string().url().optional()}},v={client:{NEXT_PUBLIC_GIPHY_API_KEY:a.z.string().min(1).optional()},runtimeEnv:{NEXT_PUBLIC_GIPHY_API_KEY:i("NEXT_PUBLIC_GIPHY_API_KEY")}},y={server:{VERCEL_TOKEN:a.z.string().min(1).optional(),VERCEL_TEAM_ID:a.z.string().min(1).optional(),VERCEL_GIT_COMMIT_SHA:a.z.string().min(1).optional(),VERCEL_BUILDER_PROJECT_NAME:a.z.string().min(1).optional()},client:{NEXT_PUBLIC_VERCEL_VIEWER_PROJECT_NAME:a.z.string().min(1).optional(),NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA:a.z.string().min(1).optional(),NEXT_PUBLIC_VERCEL_ENV:a.z.string().min(1).optional()},runtimeEnv:{NEXT_PUBLIC_VERCEL_VIEWER_PROJECT_NAME:i("NEXT_PUBLIC_VERCEL_VIEWER_PROJECT_NAME"),NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA:i("NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA"),NEXT_PUBLIC_VERCEL_ENV:i("NEXT_PUBLIC_VERCEL_ENV")}},_={server:{SLEEKPLAN_SSO_KEY:a.z.string().min(1).optional()}},E={client:{NEXT_PUBLIC_UNSPLASH_APP_NAME:a.z.string().min(1).optional(),NEXT_PUBLIC_UNSPLASH_ACCESS_KEY:a.z.string().min(1).optional()},runtimeEnv:{NEXT_PUBLIC_UNSPLASH_APP_NAME:i("NEXT_PUBLIC_UNSPLASH_APP_NAME"),NEXT_PUBLIC_UNSPLASH_ACCESS_KEY:i("NEXT_PUBLIC_UNSPLASH_ACCESS_KEY")}},x={server:{META_SYSTEM_USER_TOKEN:a.z.string().min(1).optional(),WHATSAPP_PREVIEW_FROM_PHONE_NUMBER_ID:a.z.string().min(1).optional(),WHATSAPP_PREVIEW_TEMPLATE_NAME:a.z.string().min(1).optional(),WHATSAPP_PREVIEW_TEMPLATE_LANG:a.z.string().min(1).optional().default("en"),WHATSAPP_CLOUD_API_URL:a.z.string().url().optional().default("https://graph.facebook.com")}},w={server:{UPSTASH_REDIS_REST_URL:a.z.string().url().optional(),UPSTASH_REDIS_REST_TOKEN:a.z.string().min(1).optional()}},I={client:{NEXT_PUBLIC_SENTRY_DSN:a.z.string().min(1).optional()},server:{SENTRY_AUTH_TOKEN:a.z.string().min(1).optional(),SENTRY_PROJECT:a.z.string().min(1).optional(),SENTRY_ORG:a.z.string().min(1).optional()},runtimeEnv:{NEXT_PUBLIC_SENTRY_DSN:i("NEXT_PUBLIC_SENTRY_DSN")}},T={server:{MESSAGE_WEBHOOK_URL:a.z.string().url().optional(),USER_CREATED_WEBHOOK_URL:a.z.string().url().optional()}},C={client:{NEXT_PUBLIC_POSTHOG_KEY:a.z.string().min(1).optional(),NEXT_PUBLIC_POSTHOG_HOST:a.z.string().min(1).optional().default("https://app.posthog.com")},runtimeEnv:{NEXT_PUBLIC_POSTHOG_KEY:i("NEXT_PUBLIC_POSTHOG_KEY"),NEXT_PUBLIC_POSTHOG_HOST:i("NEXT_PUBLIC_POSTHOG_HOST")}},S={client:{NEXT_PUBLIC_TOLGEE_API_KEY:a.z.string().min(1).optional(),NEXT_PUBLIC_TOLGEE_API_URL:a.z.string().url().optional().default('https://tolgee.server.baptistearno.com"')},runtimeEnv:{NEXT_PUBLIC_TOLGEE_API_KEY:i("NEXT_PUBLIC_TOLGEE_API_KEY"),NEXT_PUBLIC_TOLGEE_API_URL:i("NEXT_PUBLIC_TOLGEE_API_URL","https://tolgee.server.baptistearno.com")}},N=(0,r.D)({server:{...l.server,...d.server,...u.server,...c.server,...g.server,...f.server,...b.server,...y.server,..._.server,...x.server,...w.server,...p.server,...h.server,...m.server,...I.server,...T.server},client:{...l.client,...c.client,...g.client,...f.client,...v.client,...y.client,...E.client,...I.client,...C.client,...S.client},experimental__runtimeEnv:{...l.runtimeEnv,...c.runtimeEnv,...g.runtimeEnv,...f.runtimeEnv,...v.runtimeEnv,...y.runtimeEnv,...E.runtimeEnv,...I.runtimeEnv,...C.runtimeEnv,...S.runtimeEnv},skipValidation:"true"===o.env.SKIP_ENV_CHECK||void 0===window.__ENV,onValidationError(e){throw console.error(" Invalid environment variables:",e.flatten().fieldErrors),Error("Invalid environment variables: ".concat(JSON.stringify(e.flatten().fieldErrors)))},onInvalidAccess:e=>{throw Error(" Attempted to access a server-side environment variable on the client: ".concat(e))}})},8579:function(e,t,n){"use strict";var r,a,i,o,s,l,d,u;n.d(t,{vt:function(){return g},$K:function(){return p},z4:function(){return h},UE:function(){return m},wG:function(){return c}}),(s=r||(r={})).TEXT="text",s.IMAGE="image",s.VIDEO="video",s.EMBED="embed",s.AUDIO="audio",(l=a||(a={})).TEXT="text input",l.NUMBER="number input",l.EMAIL="email input",l.URL="url input",l.DATE="date input",l.PHONE="phone number input",l.CHOICE="choice input",l.PICTURE_CHOICE="picture choice input",l.PAYMENT="payment input",l.RATING="rating input",l.FILE="file input",(d=i||(i={})).GOOGLE_SHEETS="Google Sheets",d.OPEN_AI="OpenAI",d.GOOGLE_ANALYTICS="Google Analytics",d.WEBHOOK="Webhook",d.EMAIL="Email",d.ZAPIER="Zapier",d.MAKE_COM="Make.com",d.PABBLY_CONNECT="Pabbly",d.CHATWOOT="Chatwoot",d.PIXEL="Pixel",d.ZEMANTIC_AI="Zemantic AI",(u=o||(o={})).SET_VARIABLE="Set variable",u.CONDITION="Condition",u.REDIRECT="Redirect",u.SCRIPT="Code",u.TYPEBOT_LINK="Typebot link",u.WAIT="Wait",u.JUMP="Jump",u.AB_TEST="AB test";let c=async e=>{let t;try{let n="string"==typeof e?e:e.url;t=await fetch(n,{method:"string"==typeof e?"GET":e.method,mode:"cors",headers:"string"!=typeof e&&p(e.body)?{"Content-Type":"application/json"}:void 0,body:"string"!=typeof e&&p(e.body)?JSON.stringify(e.body):void 0});let r=await t.json();if(!t.ok)throw"error"in r?r.error:r;return{data:r,response:t}}catch(e){return console.error(e),{error:e,response:t}}},p=e=>null!=e,h=e=>null==e,m=e=>null!=e&&""!==e,g=e=>{e.split("</noscript>").forEach(e=>{let[t,n]=e.split("<noscript>"),r=document.createRange().createContextualFragment(t);if(document.head.append(r),h(n))return;let a=document.createElement("noscript"),i=document.createRange().createContextualFragment(n);a.append(i),document.head.append(a)})}},2062:function(e,t,n){"use strict";n.d(t,{h:function(){return r}});let r={general:{isInputPrefillEnabled:!1,isHideQueryParamsEnabled:!0,isNewResultOnRefreshEnabled:!0,rememberUser:{isEnabled:!1,storage:"session"},isBrandingEnabled:!1,isTypingEmulationEnabled:!0},typingEmulation:{enabled:!0,speed:400,maxDelay:3,delayBetweenBubbles:0,isDisabledOnFirstMessage:!0},metadata:{description:"Build beautiful conversational forms and embed them directly in your applications without a line of code. Triple your response rate and collect answers that has more value compared to a traditional form.",favIconUrl:e=>e+"/favicon.png",imageUrl:e=>e+"/site-preview.png"}}},3452:function(){},389:function(e,t,n){"use strict";n.d(t,{a:function(){return u},b:function(){return c},c:function(){return p},d:function(){return h},e:function(){return m},f:function(){return g}});var r=Object.defineProperty,a=Object.defineProperties,i=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(e,t,n)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u=(e,t)=>{for(var n in t||(t={}))s.call(t,n)&&d(e,n,t[n]);if(o)for(var n of o(t))l.call(t,n)&&d(e,n,t[n]);return e},c=(e,t)=>a(e,i(t)),p=(e,t)=>{var n={};for(var r in e)s.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&o)for(var r of o(e))0>t.indexOf(r)&&l.call(e,r)&&(n[r]=e[r]);return n},h=(e,t,n)=>new Promise((r,a)=>{var i=e=>{try{s(n.next(e))}catch(e){a(e)}},o=e=>{try{s(n.throw(e))}catch(e){a(e)}},s=e=>e.done?r(e.value):Promise.resolve(e.value).then(i,o);s((n=n.apply(e,t)).next())}),m=e=>{e&&gtag("event",e.action,{event_category:e.category,event_label:e.label,value:e.value})},g=e=>new Promise(t=>{let n=document.getElementById("gtag");if(!n){let n=document.createElement("script");n.src="https://www.googletagmanager.com/gtag/js?id=".concat(e),n.id="gtag";let r=document.createElement("script");r.innerHTML="window.dataLayer = window.dataLayer || [];\n      function gtag(){dataLayer.push(arguments);}\n      gtag('js', new Date());\n    \n      gtag('config', '".concat(e,"');\n      "),document.body.appendChild(n),document.body.appendChild(r),n.onload=()=>{t()}}n&&t()})}}]);